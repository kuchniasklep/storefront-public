import{r as e,h as a,H as t,a as i}from"./index-0TTgkKkd.js";import{V as c}from"./validate-D9-0FS3L.js";const n="ks-page-account-data{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-ms-flex:1 1 auto;flex:1 1 auto}ks-page-account-data .container{max-width:100%;width:1000px;-webkit-box-sizing:border-box;box-sizing:border-box;padding:30px;margin:30px 0px;background-color:#fff;border-radius:10px}ks-page-account-data .buttons{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:10px;margin-top:30px}ks-page-account-data .container>h1{text-align:center;margin:10px 0px 5px 0px}ks-page-account-data form>h2{margin-top:30px}ks-page-account-data form>ks-button{margin-top:40px}ks-page-account-data .columns{display:-ms-flexbox;display:flex;gap:20px;margin-bottom:15px}ks-page-account-data .columns>*{width:100%}ks-page-account-data .radio{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:10px}ks-page-account-data .success{text-align:center}ks-page-account-data .success .loader{position:relative;width:100px;height:100px;margin:auto}ks-page-account-data ks-dialog .content{width:100%}ks-page-account-data #notification-dialog section ks-button{margin-top:20px}@media (max-width: 1060px){ks-page-account-data{background-color:#fff}ks-page-account-data .container{padding:20px;margin:0px}}@media (max-width: 960px){ks-page-account-data .columns{-ms-flex-direction:column;flex-direction:column;gap:20px}}";const s=class{constructor(a){e(this,a);this.heading="Moje dane";this.update="Aktualizuj dane";this.removeInfo="W celu usunięcia konta skontaktuj się z naszym działem obsługi klienta drogą mailową lub telefoniczną.";this.updateApi="";this.emailApi="res/true?email=";this.emailError="Podany email został już wykorzystany, skorzystaj z funkcji odzyskiwania hasła.";this.postcodeError="Wprowadź kod pocztowy w formacie XX-XXX";this.streetError="Wprowadź conajmniej nazwę ulicy oraz numer domu";this.phoneError="Wprowadź prawidłowy numer telefonu";this.success_heading="Dane zaktualizowane";this.success_message="Twoje dane zostały zaktualizowane, za chwilę nastąpi przekierowanie na panel klienta.";this.failure_heading="Dane nie zaktualizowane";this.failure_message="Sprawdź wprowadzone dane i spróbuj ponownie, jeżeli problem dalej występuje skontaktuj się z naszą obsługą.";this.notification_button="Wróć do aktualizacji danych";this.country="170";this.company="1";this.email="";this.companyName="";this.companyNip="";this.firstname="";this.lastname="";this.phone="";this.city="";this.street="";this.postcode="";this.loading=false}async countryWatcher(){setTimeout((()=>{this.root.querySelector("#postcode_input").Validate()}),100)}render(){const e=this.country=="170"?"^[0-9]{2}-[0-9]{3}$":undefined;return a(t,{key:"89f0386ef3c5a3ac94c7c19c4c2e2dddf1f4c92b"},a("section",{key:"c95741dee707cb5a54aae48c1950ecdb0b827880",class:"container"},a("h1",{key:"f9acdfbf646f1e10c76924ff8c023cc917457e6e"},this.heading),a("form",{key:"768ed3f86de98405407f28fe3853c166486a02bd",id:"dataupdate",enctype:"application/x-www-form-urlencoded",onSubmit:e=>this.submit_register(e)},a("ks-input-dynamic",{key:"e6cef34733c90e47ed92cc2712d76098d1e94295",api:this.emailApi,message:this.emailError},a("ks-input-text",{key:"4cbf3a7ee42b3ad5292b57c136a39098673717ab",email:true,required:true,name:"email",label:"Adres email",icon:"mail",value:this.email})),a("div",{key:"2ee3e6a4275e7135c24f4298ad47c3e647ccc2f6",class:"radio"},a("ks-input-check",{key:"c6e0bda4e7a2bfb45a197f46fe00641156c997ca",radio:true,name:"osobowosc",value:"1",label:"Osoba fizyczna",checked:this.company=="1",onChange:()=>this.company="1"}),a("ks-input-check",{key:"f14763ba086456292719660121143391672205f1",radio:true,name:"osobowosc",value:"0",label:"Firma",checked:this.company=="0",onChange:()=>this.company="0"})),this.company&&a("div",{key:"5e0bc7109e36910cbce96ad6075060a25bc63009",class:"columns"},a("ks-input-text",{key:"9e35a28d2a18c8754aecfa9d00ec195dbc92d2b2",required:true,name:"nazwa_firmy",label:"Nazwa Firmy",icon:"briefcase",value:this.companyName}),a("ks-input-text",{key:"cba39c7f75c0fb8745cc536e6536d2159a6845cf",required:true,name:"nip_firmy",label:"Numer NIP",icon:"briefcase",value:this.companyNip})),a("ks-input-select",{key:"3c2e7ea99125160361004285b6babba26da18b78",name:"panstwo",label:"Kraj",onChange:e=>this.country=e.target.value},a("slot",{key:"a6f91d7635359cb60db94914bc2d6db19cff7a66",name:"country"})),a("div",{key:"b3fd1e3ba9aee318abcd8c820cee7444f8076790",class:"columns"},a("div",{key:"7a396985dc17f3dbdd0de7c058dc84503a341aaa"},a("ks-input-text",{key:"08d9fa0a591b479f5d529ec81393df08a5184c57",required:true,name:"imie",label:"Imię",icon:"user",value:this.firstname}),a("ks-input-text",{key:"f635d4f48f2dca325c1fecf3d2a0461dad618845",required:true,name:"nazwisko",label:"Nazwisko",icon:"user",value:this.lastname}),a("ks-input-text",{key:"1486d0755c0391329c65884db61bb6fd84a930a1",required:true,phone:true,name:"telefon",label:"Numer Telefonu",icon:"phone",value:this.phone})),a("div",{key:"86acdc3186a3d3d43e7bbc8ae171e864877b52e1"},a("ks-input-text",{key:"13489c8162de5bb028d9a96ee1035a307a9592a9",required:true,name:"miasto",label:"Miasto",icon:"map-pin",value:this.city}),a("ks-input-text",{key:"8d5ec21828259e71101d3ac96f10cb74b17b2425",required:true,name:"ulica",label:"Ulica i numer domu / lokalu",icon:"map-pin",value:this.street,regex:"[a-zа-я].*[0-9]|[0-9].*[a-zа-я]",regexMessage:this.streetError}),a("ks-input-text",{key:"35f68aca107147b54b7f08886a741b1652919ea7",required:true,id:"postcode_input",name:"kod_pocztowy",label:"Kod Pocztowy",icon:"map-pin",value:this.postcode,regex:e,regexMessage:this.postcodeError}))),a("input",{key:"c1fea145af0fb359e6cec1ef06bfd00483a0806f",type:"hidden",value:"1",name:"przetwarzanie_dodatkowe"}),a("input",{key:"2e22c8cad57f4cff1e10bcd338f03e4f78286da1",type:"hidden",name:"adres_id",value:this.address_id}),a("input",{key:"da16afb18aa95cfb987682c06df507e4139d7067",type:"hidden",name:"id_klienta",id:"id_klienta",value:this.customer_id}),a("input",{key:"2f1d7eb284694ad03ff70d56a2562ad674d7fe6e",type:"hidden",name:"tok",value:this.token}),a("input",{key:"51f05a05192992ca4cd99f304f49538fa45ccc2b",type:"hidden",name:"akcja",value:"zapisz"}),a("p",{key:"100ddcc32c306d946fa566de4f07c4ed03e6f282"},this.removeInfo),a("div",{key:"a5cf316a9b105c7de7d3070120e47fb156850901",class:"buttons"},a("ks-button",{key:"6874921c9441020ef55974c668c945ca51a02248",rounded:true,submit:true,name:this.update,loading:this.loading}),a("ks-button",{key:"1a664a3e620c0e9b2750408b35a6999e288b375e",rounded:true,border:true,link:this.accountLink,name:"Wróć do panelu klienta",loading:this.loading}))),a("ks-dialog",{key:"92ac798fa4fe4df0b60af7f480c9e438442389f1",id:"notification-dialog",dark:true},a("section",{key:"b2de3bd9bdae0bf0b6f393a9f45af6dc79516622"},a("h1",{key:"1d38753cf77ad5209b6d47856f0e1659d1270302"},this.notification_heading),a("p",{key:"0f787b81913d8567153aec18f4c53dd2cf184a19"},this.notification_message),a("ks-button",{key:"5870ac7116614dc85889bfcb0449812cb91a0140",rounded:true,onClick:()=>this.hide_notification(),name:this.notification_button}))),a("ks-overlay",{key:"89a997a6427139ea0c1e028335cd76fb43bc905b",dark:true,id:"loading-overlay",close:false},a("div",{key:"c0bf525e6b7b9f230fe1b818502df30532ffc899",class:"success"},a("h1",{key:"b17de9e69c0371b429e5b95d296b9bb362bbf5ab"},this.success_heading),a("p",{key:"64c47c3259021525bad3a25cc73826493293d527"},this.success_message),a("div",{key:"59f9725ca0b5bc8a7f9d1ce5ab24c8c1c2baf479",class:"loader"},a("ks-loader",{key:"276df7f461b98e5ce42b1343419d8f47967a3329",large:true}))))))}redirect_to_account(){const e=this.root.querySelector("#loading-overlay");e.show();setTimeout((()=>{window.location.href=this.accountLink}),1e3)}show_notification(e,a){this.notification_heading=e;this.notification_message=a;const t=this.root.querySelector("#notification-dialog");t.show()}hide_notification(){const e=this.root.querySelector("#notification-dialog");e.hide()}async submit_register(e){e.preventDefault();this.loading=true;const a=this.root.querySelector("#dataupdate");if(!await c(a)){this.loading=false;return}const t=new URLSearchParams;new FormData(a).forEach(((e,a)=>{t.append(a,e.toString())}));const i=new FormData;i.append("data",t.toString());var n=new Headers;n.append("pragma","no-cache");n.append("cache-control","no-cache");await fetch(this.updateApi,{body:i,method:"POST",headers:n,credentials:"same-origin"}).then((e=>{if(!e.ok)throw e.status;return e.text()})).then((e=>{if(e.includes("Twoje konto zostało założone")||true)this.redirect_to_account()})).catch((e=>{console.log(e);let a=e;if(!navigator.onLine)a="Brak połączenia z internetem.";else if(Number.isInteger(e))a=`Błąd połączenia - ${e}`;this.show_notification(this.failure_heading,a)}));this.loading=false}get root(){return i(this)}static get watchers(){return{country:["countryWatcher"]}}};s.style=n;export{s as ks_page_account_data};
//# sourceMappingURL=ks-page-account-data.entry.js.map