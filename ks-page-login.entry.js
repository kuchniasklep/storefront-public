import{r as e,h as o,g as t,B as n}from"./index-1b90b4d2.js";import{c as a}from"./index-33fbe4a7.js";import{l as i}from"./loadCommon-1c9bf0eb.js";import{f as r}from"./fetch-13200e62.js";import"./common-46fdf31d.js";import"./commonDynamic-3e6c308f.js";import"./dataLayer-d75ea728.js";const s=a({});const l="ks-page-login .background{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;background-color:white;padding:80px 20px}ks-page-login .card{width:100%;max-width:400px;background-color:white}ks-page-login h1{text-align:center;margin-bottom:10px}ks-page-login .forgot{float:right;cursor:pointer;margin-top:-10px;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease}ks-page-login .forgot:hover{opacity:0.7}ks-page-login .forgot:active{opacity:0.5}ks-page-login .login{margin-top:50px}ks-page-login .login>*{background:rgb(24,141,219);background:linear-gradient(321deg, rgba(24,141,219,1) 0%, rgba(0,26,78,1) 100%);-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease}ks-page-login .login>*:hover{opacity:0.9}ks-page-login .login>*:active{opacity:0.8}ks-page-login .register{margin:10px auto 0 auto;width:90%}ks-page-login .forgot-dialog p{text-align:center}ks-page-login .forgotSubmit{margin:20px 0 20px 0}ks-page-login .externalButtons{display:-ms-flexbox;display:flex;margin-top:10px;margin-bottom:20px;gap:5px;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}ks-page-login .external{width:100%}ks-page-login .external>*{background:linear-gradient(321deg, rgb(77 77 77) 0%, rgba(26,26,26,1) 100%);-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease}ks-page-login .external:last-child>*{background:linear-gradient(30deg, rgb(77 77 77) 0%, rgba(26,26,26,1) 100%)}ks-page-login .external>*:hover{opacity:0.9}ks-page-login .external>*:active{opacity:0.8}";const g=class{constructor(o){e(this,o);this.skipbase=undefined;this.commonData=undefined;this.commonDynamicData=undefined;this.loginData=undefined}componentWillLoad(){const e=document.getElementById(this.loginData);const o=JSON.parse(e.innerHTML);Object.keys(o).map((e=>{s.set(e,o[e])}));i(this.commonData,this.commonDynamicData,n)}componentDidLoad(){if(s.get("externalLogin")&&s.get("externalRegister"))this.externalLogin(s.get("externalLogin"),s.get("externalRegister"))}showForgot(){const e=this.root.querySelector("ks-dialog.forgot-dialog");e.show()}render(){const e=s.get("strings");const t=s.get("google");const n=s.get("facebook");return o("ks-page-base",{loadCommon:false,skipbase:this.skipbase,commonData:this.commonData,commonDynamicData:this.commonDynamicData},o("div",{class:"background"},o("ks-simpleform",{class:"card",action:s.get("login"),method:"post"},o("h1",null,e.header),o("ks-input-text",{required:true,email:true,name:"email",label:e.email,icon:"at-sign","right-icon":true,placeholder:e.emailPlaceholder}),o("ks-input-text",{required:true,password:true,name:"haslo",label:e.password,icon:"key","right-icon":true,placeholder:e.passwordPlaceholder}),o("span",{class:"forgot",onClick:()=>this.showForgot()},e.forgotPassword),o("ks-button",{submit:true,class:"login",primary:true,name:e.login,round:true}),t||n?o("div",{class:"externalButtons"},t?o("ks-button",{nofollow:true,round:true,icon:"google",class:"external",link:t.link,name:e.externalLogin}):null,n?o("ks-button",{nofollow:true,round:true,icon:"facebook",class:"external",link:n.link,name:e.externalLogin}):null):null,o("ks-button",{nofollow:true,link:s.get("register"),class:"register",border:true,narrow:true,name:e.register,round:true})),o("ks-dialog",{class:"forgot-dialog",dark:true},o("ks-simpleform",{action:s.get("forgot"),method:"post"},o("p",null,e.forgotMessage),o("ks-input-text",{email:true,name:"emailprzypomnienie",label:e.email,icon:"at-sign","right-icon":true,placeholder:e.emailPlaceholder}),o("ks-button",{class:"forgotSubmit",border:true,narrow:true,name:e.forgotSubmit,round:true}))),o("ks-overlay",{dark:true,close:false,class:"loading"},o("ks-loader",null))))}externalLogin(e,o){const t=document.querySelector("ks-error-popup");const n=this.root.querySelector("ks-overlay.loading");n.show();const a=s.get("strings");r(e,{data:"social"}).then((e=>e.text())).then((e=>{if(e.includes("noaccount"))window.location.replace(o);else if(e.length>10){n.hide();t.show(new Error(e))}else{n.hide();t.show(new Error(a.externalLoginError))}}))}get root(){return t(this)}};g.style=l;export{g as ks_page_login};
//# sourceMappingURL=ks-page-login.entry.js.map