import{r as t,h as s}from"./index-1b90b4d2.js";import{c as e}from"./common-46fdf31d.js";import"./index-33fbe4a7.js";const i=class{constructor(s){t(this,s);this.name=undefined;this.label=undefined;this.api=undefined;this.apiData="";this.selectedId=undefined;this.lightUp=false;this.data=new Array;this.loading=false;this.message=""}async FetchData(){const t=e.get("translations");var s=new Headers;s.append("pragma","no-cache");s.append("cache-control","no-cache");this.loading=true;this.message="";await fetch(this.api+this.apiData,{method:"GET",headers:s,credentials:"same-origin"}).then((t=>{if(!t.ok)throw t.status;return t.json()})).then((t=>{this.data=t})).catch((s=>{let e=s;if(Number.isInteger(s))e=t.inputConnectionError+s;else if(!navigator.onLine)e=t.inputInternetConnectionError;this.message=e}));this.loading=false}async Validate(){this.lightUp=false}async IsValid(){return!this.loading&&this.message==""}componentWillLoad(){this.FetchData()}Decode(t){var s=(new DOMParser).parseFromString(t,"text/html");return s.documentElement.textContent}render(){const t=e.get("translations");return s("div",{class:"uk-position-relative"},s("ks-input-select",{name:this.name,label:this.label,error:this.message!="","light-up":this.lightUp},this.data.map((t=>s("option",{selected:this.selectedId==t.value?true:false,value:t.value},this.Decode(t.name))))),this.loading?s("div",{class:"uk-position-absolute uk-animation-fade",style:{top:"20px",left:"0px",width:"100%",height:"50px",backgroundColor:"rgba(255, 255, 255, 0.7)"}},s("div",{"uk-spinner":true,class:"uk-position-center"})):null,this.message!=""?s("div",{class:"uk-position-absolute",style:{top:"20px",left:"0px",width:"100%",height:"50px",backgroundColor:"rgba(255, 255, 255)"}},s("p",{class:"uk-position-center uk-text-danger"},this.message," ",s("a",{onClick:()=>this.FetchData()},t.inputRefresh))):null)}static get watchers(){return{apiData:["FetchData"]}}};export{i as ks_input_select_dynamic};
//# sourceMappingURL=ks-input-select-dynamic.entry.js.map