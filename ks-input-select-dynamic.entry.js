import{r as t,h as s}from"./index-e3198654.js";import{c as i}from"./common-e4bd89b8.js";import"./index-5a4e318f.js";const e=class{constructor(s){t(this,s),this.name=void 0,this.label=void 0,this.api=void 0,this.apiData="",this.selectedId=void 0,this.lightUp=!1,this.data=new Array,this.loading=!1,this.message=""}async FetchData(){const t=i.get("translations");var s=new Headers;s.append("pragma","no-cache"),s.append("cache-control","no-cache"),this.loading=!0,this.message="",await fetch(this.api+this.apiData,{method:"GET",headers:s,credentials:"same-origin"}).then((t=>{if(!t.ok)throw t.status;return t.json()})).then((t=>{this.data=t})).catch((s=>{let i=s;Number.isInteger(s)?i=t.inputConnectionError+s:navigator.onLine||(i=t.inputInternetConnectionError),this.message=i})),this.loading=!1}async Validate(){this.lightUp=!1}async IsValid(){return!this.loading&&""==this.message}componentWillLoad(){this.FetchData()}Decode(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent}render(){const t=i.get("translations");return s("div",{class:"uk-position-relative"},s("ks-input-select",{name:this.name,label:this.label,error:""!=this.message,"light-up":this.lightUp},this.data.map((t=>s("option",{selected:this.selectedId==t.value,value:t.value},this.Decode(t.name))))),this.loading?s("div",{class:"uk-position-absolute uk-animation-fade",style:{top:"20px",left:"0px",width:"100%",height:"50px",backgroundColor:"rgba(255, 255, 255, 0.7)"}},s("div",{"uk-spinner":!0,class:"uk-position-center"})):null,""!=this.message?s("div",{class:"uk-position-absolute",style:{top:"20px",left:"0px",width:"100%",height:"50px",backgroundColor:"rgba(255, 255, 255)"}},s("p",{class:"uk-position-center uk-text-danger"},this.message," ",s("a",{onClick:()=>this.FetchData()},t.inputRefresh))):null)}static get watchers(){return{apiData:["FetchData"]}}};export{e as ks_input_select_dynamic}