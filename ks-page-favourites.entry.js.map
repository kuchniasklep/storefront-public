{"version":3,"names":["favourites","createStore","favouritesCss","PageRecipe","componentWillLoad","favouritesDataElement","document","getElementById","this","favouritesData","JSON","parse","innerHTML","Object","keys","map","key","set","removeAll","removeAllLoading","removeAllFavourites","then","location","reload","render","products","get","descriptions","h","skipbase","commonData","commonDynamicData","length","class","priceFormat","onClick","card","summary","id","product","round","border","name","link"],"sources":["src/global/data/favourites.ts","src/components/pages/favourites/favourites.css?tag=ks-page-favourites","src/components/pages/favourites/favourites.tsx"],"sourcesContent":["import { createStore } from \"@stencil/store\";\nimport { ProductCardData } from \"./listing\";\n\nexport const favourites = createStore({} as FavouritesData);\n\nexport interface FavouritesData {\n    value: number;\n    valueString: string;\n    removeAllString: string;\n\n    emptyHeading: string;\n    emptyButton: string;\n\n    descriptions: {[index: string]: string};\n    products: ProductCardData[];\n}","ks-page-favourites {\n    display: block;\n}\n\nks-page-favourites .favourites-container {\n    background: #fff;\n    color: #373737;\n    box-shadow: 0 2px 8px rgb(0 0 0 / 15%);\n    padding: 20px 30px;\n}\n\nks-page-favourites .favourites-header {\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n}\n\nks-page-favourites .favourites-header .removeAll {\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n}\n\nks-page-favourites .favourites-header .removeAll button {\n    position: relative;\n    max-width: 250px;\n    width: 100%;\n\n    background-color: var(--color-secondary);\n    color: white;\n    border-style: none;\n    height: 50px;\n    border-radius: 50px;\n\n    font-family: var(--font-emphasis);\n    font-size: 16px;\n    line-height: 16px;\n\n    transition: background-color 0.3s ease;\n}\n\nks-page-favourites .favourites-header .removeAll button:hover {\n    background-color: var(--color-secondary-hover);\n}\n\nks-page-favourites .favourites-header .removeAll button:active {\n    background-color: var(--color-secondary-active);\n}\n\nks-page-favourites .favourites-header > span {\n    font-size: 26px;\n    line-height: 26px;\n    font-weight: 700;\n    font-family: var(--font-emphasis);\n    white-space: nowrap;\n}\n\nks-page-favourites .favourites-header .valueString {\n    margin-right: 10px;\n}\n\nks-page-favourites .favourites-header .value {\n    color: var(--color-secondary);\n}\n\nks-page-favourites .empty {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    flex: 1 0 auto;\n    min-height: 320px;\n    padding: 40px 40px;\n}\n\nks-page-favourites .empty h1 {\n    font-size: 20px;\n    font-weight: 700;\n    margin-bottom: 30px;\n}\n\nks-page-favourites .empty ks-button {\n    max-width: 300px;\n    width: 100%;\n}\n\n\n@media screen and (max-width: 550px) {\n    ks-page-favourites .favourites-header {\n        flex-wrap: wrap;\n        justify-content: center;\n    }\n\n    ks-page-favourites .favourites-header > span {\n        font-size: 20px;\n        line-height: 20px;\n    }\n\n    ks-page-favourites .favourites-header .removeAll {\n        justify-content: center;\n        width: 100%;\n        margin-top: 10px;\n    }\n    \n}","import { Component, h, Prop, State } from '@stencil/core';\nimport { favourites, FavouritesData } from \"../../../global/data/favourites\";\nimport { removeAllFavourites } from \"../../../global/functions/favourites\";\nimport priceFormat from '../../../global/functions/price';\n\ndeclare global { interface Window { dataLayer: any[] }}\n\n@Component({\n    tag: 'ks-page-favourites',\n    styleUrl: 'favourites.css'\n})\nexport class PageRecipe{\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() favouritesData: string;\n    @State() removeAllLoading: boolean = false;\n\n    componentWillLoad() {\n        const favouritesDataElement = document.getElementById(this.favouritesData);\n\t\tconst favouritesData = JSON.parse(favouritesDataElement.innerHTML) as FavouritesData;\n\n        Object.keys(favouritesData).map(key => {\n\t\t\tfavourites.set(key as keyof FavouritesData, favouritesData[key]);\n\t\t});\n    }\n\n    removeAll() {\n        if(this.removeAllLoading) return;\n        this.removeAllLoading = true;\n    \n        removeAllFavourites().then(() => {\n            location.reload();\n        });\n    }\n\n\trender() {\n        const products = favourites.get('products');\n        const descriptions = favourites.get('descriptions');\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n            <ks-container>\n                {products?.length > 0 ?\n                    <div class=\"favourites-container\">\n                        <div class=\"favourites-header\">\n                            <span class=\"valueString\">{favourites.get('valueString')}</span>\n                            <span class=\"value\">{priceFormat(favourites.get('value'))}</span>\n                            <div class=\"removeAll\">\n                                <button class=\"fav\" onClick={()=>this.removeAll()}>\n                                    { this.removeAllLoading ? <ks-loader /> : favourites.get('removeAllString') }\n                                </button>\n                            </div>\n                        </div>\n\n                        <hr/>\n\n                        <div class=\"product-container\">\n                            {products?.map(card =>\n                                <ks-product-fav-card summary={descriptions[card.id]} product={card} />\n                            )}\n                        </div>\n                    </div>\n                :\n                    <div class=\"empty\">\n                        <h1>{favourites.get('emptyHeading')}</h1>\n                        <ks-button round border name={favourites.get('emptyButton')} link=\"/\" />\n                    </div>\n                }\n            </ks-container>\n        </ks-page-base>;\n\t}\n}\n"],"mappings":"ySAGO,MAAMA,EAAaC,EAAY,ICHtC,MAAMC,EAAgB,ojE,MCWTC,EAAU,M,gKAMkB,K,CAErCC,oBACI,MAAMC,EAAwBC,SAASC,eAAeC,KAAKC,gBACjE,MAAMA,EAAiBC,KAAKC,MAAMN,EAAsBO,WAElDC,OAAOC,KAAKL,GAAgBM,KAAIC,IACrChB,EAAWiB,IAAID,EAA6BP,EAAeO,GAAK,G,CAI/DE,YACI,GAAGV,KAAKW,iBAAkB,OAC1BX,KAAKW,iBAAmB,KAExBC,IAAsBC,MAAK,KACvBC,SAASC,QAAQ,G,CAI5BC,SACO,MAAMC,EAAWzB,EAAW0B,IAAI,YAChC,MAAMC,EAAe3B,EAAW0B,IAAI,gBAE1C,OAAOE,EAAA,gBAAcC,SAAUrB,KAAKqB,SAAUC,WAAYtB,KAAKsB,WAAYC,kBAAmBvB,KAAKuB,mBACzFH,EAAA,qBACKH,IAAQ,MAARA,SAAQ,SAARA,EAAUO,QAAS,EAChBJ,EAAA,OAAKK,MAAM,wBACPL,EAAA,OAAKK,MAAM,qBACPL,EAAA,QAAMK,MAAM,eAAejC,EAAW0B,IAAI,gBAC1CE,EAAA,QAAMK,MAAM,SAASC,EAAYlC,EAAW0B,IAAI,WAChDE,EAAA,OAAKK,MAAM,aACPL,EAAA,UAAQK,MAAM,MAAME,QAAS,IAAI3B,KAAKU,aAChCV,KAAKW,iBAAmBS,EAAA,kBAAgB5B,EAAW0B,IAAI,sBAKrEE,EAAA,WAEAA,EAAA,OAAKK,MAAM,qBACNR,IAAQ,MAARA,SAAQ,SAARA,EAAUV,KAAIqB,GACXR,EAAA,uBAAqBS,QAASV,EAAaS,EAAKE,IAAKC,QAASH,QAK1ER,EAAA,OAAKK,MAAM,SACPL,EAAA,UAAK5B,EAAW0B,IAAI,iBACpBE,EAAA,aAAWY,MAAK,KAACC,OAAM,KAACC,KAAM1C,EAAW0B,IAAI,eAAgBiB,KAAK,Q"}