import{c as n}from"./common-7de2ffe1.js";import{c as o}from"./commonDynamic-73d5b033.js";import{t,D as e,e as i,r as w}from"./dataLayer-4cab1eeb.js";class d{constructor(){this.ttq=new Promise((n=>{var o=setInterval((()=>{void 0!==ttq&&(n(ttq),clearInterval(o))}),100)}))}pageview(n,o){this.ttq.then((n=>{n.track("Browse")}))}product(n,o=""){this.ttq.then((o=>{o.track("ViewContent",{content_type:"product",content_id:n.id,content_name:n.name,currency:n.currency,price:n.currentPrice,quantity:1,value:n.currentPrice})}))}listing(n,o){}addToCart(n,o){this.ttq.then((o=>{o.track("AddToCart",{content_type:"product",content_id:n.id,content_name:n.name,currency:n.currency,price:n.currentPrice,quantity:n.quantity,value:n.currentPrice*n.quantity})}))}order_checkout(n,o,t){this.ttq.then((n=>{n.track("StartCheckout",{contents:this.transformProducts(o.products),value:o.productValue,currency:o.currency})}))}order_form(n,o,t){this.ttq.then((n=>{n.track("AddBilling",{contents:this.transformProducts(o.products),value:o.productValue,currency:o.currency})}))}order_placed(n,o,t){this.ttq.then((n=>{n.track("Checkout",{contents:this.transformProducts(o.products),value:o.productValue,currency:o.currency})}))}search(n){}subscribe(n,o){}transformProducts(n){return n.map((n=>({content_id:n.id,content_type:"product",content_name:n.name,quantity:n.quantity,price:n.currentPrice})))}}class c{constructor(n){const o=n.split(", ");this.pixel=new Promise((n=>{var t,e,i,w,d,c;t=window,e=document,i="script",t.fbq||(w=t.fbq=function(){w.callMethod?w.callMethod.apply(w,arguments):w.queue.push(arguments)},t._fbq||(t._fbq=w),w.push=w,w.loaded=!0,w.version="2.0",w.queue=[],(d=e.createElement(i)).async=!0,d.src="https://connect.facebook.net/en_US/fbevents.js",(c=e.getElementsByTagName(i)[0]).parentNode.insertBefore(d,c)),o.forEach((n=>{fbq("init",n)})),n(fbq)}))}pageview(n,o){this.pixel.then((n=>{n("track","PageView",{},{eventID:o})}))}product(n,o=""){this.pixel.then((t=>{t("track","ViewContent",{content_type:"product",content_name:n.name,value:n.currentPrice,currency:n.currency,content_ids:[n.id]},{eventID:o})}))}listing(n,o){}addToCart(n,o){this.pixel.then((t=>{t("track","AddToCart",{content_type:"product",content_name:n.name,value:n.currentPrice,currency:n.currency,contents:[{id:n.id,quantity:n.quantity}]},{eventID:o})}))}order_checkout(n,o,t){this.pixel.then((n=>{n("track","InitiateCheckout",{contents:this.transformProducts(o.products),content_type:"product",value:o.productValue,currency:o.currency},{eventID:t})}))}order_form(n,o,t){}order_placed(n,o,t){this.pixel.then((n=>{n("track","Purchase",{contents:this.transformProducts(o.products),content_type:"product",value:o.productValue,currency:o.currency},{eventID:t})}))}search(n){this.pixel.then((o=>{o("track","Search",{search_string:n})}))}subscribe(n,o){}transformProducts(n){return n.map((n=>({id:n.id,quantity:n.quantity})))}}class r{init(n){var o,t;(null===(o=window._edrone)||void 0===o?void 0:o.page_loaded)&&(null===(t=window._edrone)||void 0===t||t.init(n))}relativeToAbsolute(n){return n.includes("http")?n:document.baseURI+n}pageview(n,o){if(!n.loggedIn||!n.customer)return;const t=n.customer;window._edrone=window._edrone||{},window._edrone.email=t.email,window._edrone.first_name=t.firstName,window._edrone.last_name=t.lastName,window._edrone.subscriber_status=t.subscriber?1:0,window._edrone.country=t.countryISO2,window._edrone.city=t.city,window._edrone.phone=t.phone,this.init()}product(n,o=""){window._edrone=window._edrone||{},window._edrone.product_skus=n.model,window._edrone.product_ids=n.id,window._edrone.product_titles=encodeURIComponent(n.name),(null==n?void 0:n.images.length)>0&&(window._edrone.product_images=encodeURIComponent(this.relativeToAbsolute(n.images[0].full.url))),window._edrone.product_urls=encodeURIComponent(this.relativeToAbsolute(document.location.href)),window._edrone.product_availability=n.availability,window._edrone.product_category_ids=n.categories.map((n=>n.id)).join("~"),window._edrone.product_category_names=n.categories.map((n=>encodeURIComponent(n.name))).join("~"),window._edrone.action_type="product_view",this.init()}listing(n,o){window._edrone=window._edrone||{};const t=n.breadcrumbs.filter((n=>"0"!=n.id));window._edrone.product_category_ids=t.map((n=>n.id)).join("~"),window._edrone.product_category_names=t.map((n=>encodeURIComponent(n.name))).join("~"),window._edrone.action_type="category_view",this.init()}addToCart(n,o){window._edrone=window._edrone||{},window._edrone.product_ids=n.id,window._edrone.product_skus=n.sku,window._edrone.product_titles=encodeURIComponent(n.name),window._edrone.product_images=encodeURIComponent(this.relativeToAbsolute(n.imageFull)),window._edrone.product_urls=encodeURIComponent(this.relativeToAbsolute(n.link)),window._edrone.product_category_ids=n.categories.map((n=>n.id)).join("~"),window._edrone.product_category_names=n.categories.map((n=>encodeURIComponent(n.name))).join("~"),window._edrone.action_type="add_to_cart",this.init()}order_checkout(n,o,t){if(!n.loggedIn||!n.customer)return;const e=n.customer;window._edrone=window._edrone||{},window._edrone.email=e.email,window._edrone.first_name=e.firstName,window._edrone.last_name=e.lastName,window._edrone.subscriber_status=e.subscriber?1:0,window._edrone.country=e.countryISO2,window._edrone.city=e.city,window._edrone.phone=e.phone,window._edrone.action_type="other",this.init()}order_form(n,o,t){}order_placed(n,o,t){const e=n.customer,i=o.products;window._edrone=window._edrone||{},window._edrone.email=e.email,window._edrone.first_name=e.firstName,window._edrone.last_name=e.lastName,window._edrone.subscriber_status=e.subscriber?1:0,window._edrone.product_skus=i.map((n=>n.sku)).join("|"),window._edrone.product_ids=i.map((n=>n.id)).join("|"),window._edrone.product_titles=i.map((n=>encodeURIComponent(n.id))).join("|"),window._edrone.product_images=i.map((n=>encodeURIComponent(this.relativeToAbsolute(n.image)))).join("|"),window._edrone.product_urls=i.map((n=>encodeURIComponent(this.relativeToAbsolute(n.link)))).join("|"),window._edrone.product_counts=i.map((n=>n.quantity)).join("|"),window._edrone.product_category_ids=i.map((n=>n.categories.map((n=>n.id)).join("~"))).join("|"),window._edrone.product_category_names=i.map((n=>n.categories.map((n=>encodeURIComponent(n.name))).join("~"))).join("|"),window._edrone.order_id=o.id,window._edrone.country=e.countryISO2,window._edrone.city=e.city,window._edrone.base_currency=e.currency,window._edrone.order_currency=o.currency,window._edrone.base_payment_value=o.productValue,window._edrone.order_payment_value=o.productValue,window._edrone.action_type="order",this.init()}search(n){}subscribe(n,o){if(window._edrone=window._edrone||{},window._edrone.customer_tags=o.place,window._edrone.email=o.email,(null==o?void 0:o.name)&&(window._edrone.first_name=o.name),window._edrone.subscriber_status=o.subscriber?1:0,n.loggedIn&&n.customer){const o=n.customer;window._edrone.first_name=o.firstName,window._edrone.last_name=o.lastName,window._edrone.country=o.countryISO2,window._edrone.city=o.city,window._edrone.phone=o.phone}window._edrone.action_type="subscribe",this.init(!1)}}function s(s,a,u){const h=document.getElementById(s),p=JSON.parse(h.innerHTML);if(Object.keys(p).map((o=>{n.set(o,p[o])})),u.isBrowser){const n=document.getElementById(a),s=JSON.parse(n.innerHTML);Object.keys(s).map((n=>{o.set(n,s[n])})),setTimeout((()=>{o.set("loaded",!0)}),100),t.get("loaded").then((()=>{const n=o.get("tracking"),s=n=>t.set("trackers",[...t.get("trackers"),n]);n.tiktok&&s(new d),n.facebook&&s(new c(n.facebook)),n.edrone&&s(new r),e.pageview(o.state,n.pageview),i((t=>null==t?void 0:t.pageview(o.state,n.pageview))),w()}))}}export{s as l}