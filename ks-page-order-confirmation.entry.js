import{r as e,h as r,g as t}from"./index-6e14abe0.js";import{c as a}from"./common-3fbec05b.js";import{c as i}from"./commonDynamic-3300d49a.js";import{c as o}from"./index-a26ba0e6.js";const n=o({api:{},totalValue:0,productValue:0,productAmount:0,pointsForOrder:0,totalShippingTime:"",otherValues:[],products:{},easyprotect:[],recycle:[],shipping:{},payment:{},info:{}}),s=class{constructor(r){e(this,r),this.loading=!1}componentWillLoad(){const e=document.getElementById(this.orderData),r=JSON.parse(e.innerHTML);Object.keys(r).map((e=>{n.set(e,r[e])}))}async Submit(e){e.preventDefault();const r=this.root.querySelector("form.card"),t=r.querySelectorAll("ks-input-dynamic, ks-order-document-select, ks-input-text, ks-input-textarea, ks-input-check, ks-order-inpost, ks-order-pocztapunkt, ks-order-dpd");console.log(r);let a=Number.MAX_VALUE,i=!0;for(let n=0;n<t.length;n++){const e=t[n];if(null==e.closest("ks-input-dynamic *")&&(await e.Validate(),!(await e.IsValid()))){const r=e.getBoundingClientRect().top-document.body.getBoundingClientRect().top;r<a&&(a=r),i=!1}}if(i)this.loading=!0,r.submit();else try{window.scroll({top:a-100,behavior:"smooth"})}catch(o){window.scroll(0,a-100)}}ShowPrompt(e){const r=this.root.querySelector("ks-order-form-modal");r.setAttribute("message",e),r.Show()}render(){var e;const t=Object.entries(n.get("products")),o=n.get("shipping"),s=n.get("payment"),d=n.get("info"),l=n.get("api"),c=n.get("easyprotectStrings");return r("ks-page-base",{skipbase:this.skipbase,commonData:this.commonData,commonDynamicData:this.commonDynamicData},r("form",{class:"card",action:l.submit,method:"post",onSubmit:e=>this.Submit(e)},r("ks-tracker-order",{form:!0,"event-id":n.get("eventId"),value:n.get("productValue"),products:Object.keys(n.get("products")).join(",")}),r("ks-order-progress",{current:1}),r("div",{class:"uk-padding@m uk-padding-small"},r("ks-cart-product-heading",null),t.map((([e,t])=>r("ks-cart-product",{name:t.name,img:t.img,price:t.price,amount:t.amount,"shipping-time":t.shippingTime}))),r("ks-cart-product-price",{amount:n.get("productAmount"),price:n.get("productValue"),"shipping-time":n.get("totalShippingTime"),"edit-link":a.get("cartLink")}),r("br",null),r("br",null),n.get("easyprotect")?[r("ks-order-heading",{heading:c.heading,link:a.get("cartLink")}),r("p",{class:"easyprotect-info"},c.descriptionStart,r("a",{href:c.link,target:"_blank"},c.linkName),c.descriptionEnd),n.get("easyprotect").map((e=>r("ks-cart-easyprotect-warranty",{name:e.name,price:e.price,time:e.time}))),r("br",null),r("br",null)]:null,(null===(e=n.get("recycle"))||void 0===e?void 0:e.length)>0?[r("ks-order-heading",{heading:"Odbiór zużytego sprzętu",link:a.get("cartLink")+"#recycle"}),r("div",{style:{marginBottom:"40px"}},n.get("recycle").map((e=>r("p",{style:{margin:"5px 0"}},e))))]:null,r("div",{class:"uk-child-width-1-2@m","uk-grid":!0,"uk-height-match":"ks-cart-tile > div"},r("div",null,r("ks-order-heading",{heading:o.heading,link:a.get("cartLink")}),r("ks-cart-tile",{logo:o.logo,name:o.name,price:o.price,color:o.color},r("div",null,o.info,"inpost"==o.type?r("ks-order-inpost",{search:o.city,api:l.changeShippingLocation}):"pocztapunkt"==o.type?[r("script",{src:"https://mapa.ecommerce.poczta-polska.pl/widget/scripts/ppwidget.js"}),r("ks-order-pocztapunkt",{search:o.city,api:l.changeShippingLocation})]:"pickup"==o.type?r("div",{class:"ListaWyboru"},r("div",{id:"ListaOpcjiWysylki"},o.pickup.map((e=>r("div",{class:"pickupOption"},r("input",{id:e.key,type:"radio",value:e.key,name:"lokalizacjaOsobisty",checked:e.checked}),r("label",{htmlFor:e.key},e.value)))))):null))),r("div",null,r("ks-order-heading",{heading:s.heading,link:a.get("cartLink")}),r("ks-cart-tile",{logo:s.logo,name:s.name,price:s.price,color:s.color,innerHTML:s.info}))),r("div",{class:"uk-child-width-1-2@m","uk-grid":!0},r("div",null,r("ks-order-address-section",{heading:d.shippingInfoHeading,link:l.changeData},r("ks-order-address-field",{name:d.name.field},r("span",null,d.name.value)),d.company?r("ks-order-address-field",{name:d.company.field},r("span",null,d.company.value)):null,r("ks-order-address-field",{name:d.address.field},r("span",{innerHTML:d.address.value})),r("ks-order-address-field",{name:d.phone.field},r("span",null,d.phone.value)))),r("div",null,r("ks-order-address-section",{"hide-on-mobile":!0,heading:d.documentInfoHeading,link:l.changeData},d.documentName?r("ks-order-address-field",{name:d.documentName.field},r("span",null,d.documentName.value)):null,d.documentCompany?r("ks-order-address-field",{name:d.documentCompany.field},r("span",null,d.documentCompany.value)):null,r("ks-order-address-field",{name:d.documentAddress.field},r("span",{innerHTML:d.documentAddress.value}))),r("ks-order-document-select",{name:"dokument",api:l.changeDocument}),r("br",null))),r("br",null),r("ks-input-textarea",{name:"komentarz",label:"Uwagi",rows:4}),r("br",null),i.get("loggedIn")?[r("ks-input-check",{required:!0,name:"regulamin",value:"1",label:d.rules}),r("br",null),r("br",null)]:null,r("input",{type:"hidden",name:"zgoda_opinie",value:"1"}),n.get("otherValues").map((e=>r("ks-cart-summary",{text:e.name,price:e.value.toString()}))),r("ks-cart-summary",{large:!0,text:"Razem:",price:n.get("totalValue").toString()})),r("div",{class:"uk-position-relative"},r("button",{type:"submit",formnovalidate:!0,class:"uk-button uk-button-danger uk-width-1-1 uk-width-expand@m ks-text-decorated",style:{fontSize:"28px",fontWeight:"700",padding:"20px"}},"ZAMAWIAM I PŁACĘ"),this.loading?r("div",{class:"uk-overlay uk-light uk-padding-remove uk-position-cover uk-animation-fade",style:{animationDuration:"0.3s",backgroundColor:"#e21334"}},r("div",{"uk-spinner":"ratio: 1.5",class:"uk-position-center"})):null),r("ks-order-form-modal",null)))}get root(){return t(this)}};s.style="ks-page-order-confirmation .card{display:block;padding:0px;-webkit-box-sizing:border-box;box-sizing:border-box;max-width:1200px;width:100%;margin:20px auto;background:var(--card-background);color:var(--card-text-color);-webkit-box-shadow:var(--card-shadow);box-shadow:var(--card-shadow)}ks-page-order-confirmation .easyprotect-info{margin-top:-15px;margin-bottom:30px;text-align:justify}ks-page-order-confirmation .pickupOption input{margin-right:10px;-webkit-transform:translate(0, 1px);transform:translate(0, 1px)}ks-page-order-confirmation .pickupOption label{width:auto}ks-page-order-confirmation .paymentContainer{text-align:center;padding:5px}";export{s as ks_page_order_confirmation}