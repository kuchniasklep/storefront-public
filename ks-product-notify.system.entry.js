var __awaiter=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r["throw"](e))}catch(e){o(e)}}function u(e){e.done?n(e.value):i(e.value).then(a,c)}u((r=r.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return u([e,t])}}function u(c){if(r)throw new TypeError("Generator is already executing.");while(a&&(a=0,c[0]&&(n=0)),n)try{if(r=1,i&&(o=c[0]&2?i["return"]:c[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;if(i=0,o)c=[c[0]&2,o.value];switch(c[0]){case 0:case 1:o=c;break;case 4:n.label++;return{value:c[1],done:false};case 5:n.label++;i=c[1];c=[0];continue;case 7:c=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1];o=c;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(c);break}if(o[2])n.ops.pop();n.trys.pop();continue}c=t.call(e,n)}catch(e){c=[6,e];i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};System.register(["./index-c1zuSwDW.system.js","./product-BJOye32-.system.js","./common-BwSiL-IM.system.js","./commonDynamic-QobDgwzl.system.js","./validate-Dd7sh-1d.system.js","./index-BljFg8DE.system.js"],(function(e){"use strict";var t,n,r,i,o,a,c;return{setters:[function(e){t=e.r;n=e.h;r=e.a},function(e){i=e.p},function(e){o=e.c},function(e){a=e.c},function(e){c=e.V},null],execute:function(){var u="ks-product-notify{display:block}ks-product-notify fieldset{border:none;margin:0;padding:0}ks-product-notify .info{text-align:center;margin-bottom:40px}ks-product-notify .info a{text-decoration:none;color:black;margin:0 5px}ks-product-notify h3{font-family:var(--font-emphasis);font-size:20px;font-weight:700}ks-product-notify ks-input-check{margin-bottom:5px}ks-product-notify ks-button{margin-top:20px}";var s=e("ks_product_notify",function(){function e(e){t(this,e)}e.prototype.requestHandler=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,o,u;var s=this;return __generator(this,(function(f){switch(f.label){case 0:t=i.get("strings");n=i.get("id");r=a.get("api").notifyAvailability;e.preventDefault();return[4,c(this.root.querySelector("form"))];case 1:if(!f.sent())return[2];this.dialog.showLoading();o=e.target;u=new FormData(o);u.append("product",n);return[4,fetch(r,{body:u,method:"post"}).then((function(e){return __awaiter(s,void 0,void 0,(function(){return __generator(this,(function(t){return[2,e.json()]}))}))})).then((function(e){return __awaiter(s,void 0,void 0,(function(){var n;return __generator(this,(function(r){n="status"in e&&"heading"in e&&"paragraph"in e;if(!n)throw new Error(t.notifyErrorParagraph);if(e.status=="success")this.dialog.showSuccess(e.heading,e.paragraph);else this.dialog.showFailure(e.heading,e.paragraph);return[2]}))}))})).catch((function(e){return __awaiter(s,void 0,void 0,(function(){var n;return __generator(this,(function(r){n="";if(!window.navigator.onLine)n=t.noInternet;else if(e.message!="")n=e.message;console.log(e.message);this.dialog.showFailure(t.notifyErrorHeading,n);return[2]}))}))}))];case 2:f.sent();return[2]}}))}))};e.prototype.show=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.dialog.show();return[2]}))}))};e.prototype.componentDidLoad=function(){this.dialog=this.root.querySelector("ks-dialog")};e.prototype.render=function(){var e=this;var t=i.get("strings");return n("ks-dialog",{key:"7cd7e7b8fea665b4fe365abe781159258f862dd4",dark:true},n("form",{key:"d9709b9bb0d05e62999b40e6f623a30a93bde4cf",onSubmit:function(t){return e.requestHandler(t)}},n("fieldset",{key:"3d0522c37379429a0baf61e5e34c817eb535d403"},n("div",{key:"c565a75b0ccdb9a8d600410b148ab877a3e5d024",class:"info"},n("h3",{key:"4d66fb9ce3b659dcc8fe9ceca2a65e0ea9d5ac2c"},t.notifyHeading),n("p",{key:"7bd6734a972efb8496f89adc97e1662c6523ce3f"},t.notifyParagraph),n("a",{key:"bab5dea8c1ec9b9691789f952db9d08d9675071e",href:"mailto:"+o.get("email")},o.get("email"))," â€¢",n("a",{key:"a98f42584deb08f390ea75442dbca619b0382450",href:"tel:"+o.get("phone")},o.get("phone"))),n("ks-input-text",{key:"d4c68eacaeb8595b4e6af016aeb91b51bfa5b767",email:true,name:"email",required:true,nomessage:true,placeholder:"E-mail",icon:"mail"}),n("ks-input-check",{key:"116c3f90d79809b3d33959bcb9119c5278c9b07a",checked:true,name:"backorders",nomessage:true,label:t.notifyBackorders}),n("ks-input-check",{key:"ad021e15d15255282f7d1b7109bf046afe632126",name:"zgoda",required:true,nomessage:true,label:t.notifyAgreement}),n("ks-button",{key:"4231dc0c6f932b5ee1f7e259002c127a16189c2f",submit:true,name:t.notifyMe}))))};Object.defineProperty(e.prototype,"root",{get:function(){return r(this)},enumerable:false,configurable:true});return e}());s.style=u}}}));
//# sourceMappingURL=ks-product-notify.system.entry.js.map