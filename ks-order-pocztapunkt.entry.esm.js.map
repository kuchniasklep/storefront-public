{"version":3,"file":"ks-order-pocztapunkt.entry.esm.js","sources":["src/components/order/confirmation/OrderPocztaPunkt.tsx"],"sourcesContent":["import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\ndeclare var PPWidgetApp: any;\n\n@Component({\n  tag: 'ks-order-pocztapunkt',\n})\nexport class OrderPocztapunkt {\n\n    @Prop({mutable: true}) search: string = \"WrocÅ‚aw, Polska\";\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n\n    @Element() root: HTMLElement;\n\n    componentDidLoad() {\n        this.root.style.display = \"block\";\n    }\n\n    @State() description: string = \"\";\n    @State() address: string = \"\";\n    @State() code: string = \"\";\n\n    async Show(event: Event) {\n        event.preventDefault();\n\n        PPWidgetApp.toggleMap({\n            callback: (c)=>this.Callback(c),\n            payOnPickup: false,\n            address: this.search\n        });\n    }\n\n\n    Callback(callback: any) {\n        var value = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        var punktodbioru = callback['pni'];\n\n        this.address = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        this.search = callback['city'];\n        this.code = callback['pni'];\n\n        this.description = callback['description'];\n        this.description = this.description.replace(/#/gi,'<br />');\n\n        let formData = new FormData();\n            formData.append(\"value\", value);\n            formData.append(\"punktodbioru\", punktodbioru);\n\n        var headers = new Headers();\n            headers.append('pragma', 'no-cache');\n            headers.append('cache-control', 'no-cache');\n\n        fetch(this.api, {\n            method: 'POST',\n            headers: headers,\n            body: formData,\n            credentials: \"same-origin\"\n        });\n\n        this.Validate();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.address != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    render() {\n        return[\n            <style innerHTML=\"\n                #overlay {\n                    position: fixed !important;\n                    display: flex !important;\n                    width: 100%;\n                    height: 100vh;\n                    justify-content: center;\n                    align-items: center;\n\n                    top: 0 !important;\n                }\n\n                @keyframes ks-fade {\n                    from {opacity: 1.0;}\n                    to {opacity: 0.4;}\n                }\n            \"></style>,\n\n            <p innerHTML={this.address}></p>,\n\n            <button class={\"uk-button uk-width-1-1 uk-margin-top \" + (this.valid ? \"uk-button-secondary\" : \"uk-button-danger\")}\n                    style={{animation: this.valid ? \"\" : \"ks-fade 0.5s cubic-bezier(.86,.01,.67,1) infinite alternate\"}}\n                    onClick={(e)=>this.Show(e)}>{this.button}</button>,\n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.address}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n            <input type=\"hidden\" name=\"OpisPunktuOdbioru\" value={this.description}/>\n        ]\n    }\n}"],"names":[],"mappings":"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"}