{"version":3,"names":["registerCss","PageRegister","constructor","hostRef","this","heading","headingLoginData","headingUserData","headingPermissionData","newsletter","terms","register","registerApi","emailApi","emailError","success_heading","success_message","failure_heading","failure_message","notification_button","loading","company","render","h","Host","key","class","id","enctype","onSubmit","event","submit_register","api","message","email","required","name","label","icon","password","sameAs","radio","value","checked","onChange","type","ip","host","rounded","primary","tall","submit","dark","notification_heading","notification_message","onClick","hide_notification","close","large","redirect_to_account","dialog","root","querySelector","show","setTimeout","window","location","href","accountLink","show_notification","hide","preventDefault","form","ValidateInput","filteredParams","URLSearchParams","FormData","forEach","append","toString","formData","headers","Headers","fetch","body","method","credentials","then","response","ok","status","text","includes","catch","error","console","log","navigator","onLine","Number","isInteger"],"sources":["src/components/pages/register/register.css?tag=ks-page-register","src/components/pages/register/register.tsx"],"sourcesContent":["ks-page-register {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex: 1 1 auto;\n    \n}\n\nks-page-register .container {\n    max-width: 100%;\n    width: 1000px;\n    box-sizing: border-box;\n    padding: 30px;\n    margin: 30px 0px;\n    background-color: #fff;\n    border-radius: 10px;\n}\n\nks-page-register .container > h1 {\n    text-align: center;\n    margin: 10px 0px 5px 0px;\n}\n\nks-page-register form > h2 {\n    margin-top: 30px;\n}\n\nks-page-register form > ks-button {\n    margin-top: 40px;\n}\n\n\nks-page-register .columns {\n    display: flex;\n    gap: 20px;\n    margin-bottom: 15px;\n}\n\nks-page-register .columns > * {\n    width: 100%;\n}\n\nks-page-register .radio {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n}\n\nks-page-register .success {\n    text-align: center;\n}\n\nks-page-register .success .loader {\n    position: relative;\n    width: 100px;\n    height: 100px;\n    margin: auto;\n}\n\nks-page-register ks-dialog .content {\n    width: 100%;\n}\n\nks-page-register #notification-dialog section ks-button {\n    margin-top: 20px;\n}\n\n@media (max-width: 1060px) {\n    ks-page-register {\n        background-color: #fff;\n    }\n\n    ks-page-register .container {\n        padding: 20px;\n        margin: 0px;\n    }\n}\n\n@media (max-width: 960px) {\n    ks-page-register .columns {\n        flex-direction: column;\n        gap: 20px;\n    }\n}","import { Component, h, Host, Prop, Element, State } from '@stencil/core';\nimport ValidateInput from '../../input/validate';\n\n@Component({\n    tag: 'ks-page-register',\n    styleUrl: 'register.css'\n})\nexport class PageRegister {\n    @Element() root: HTMLElement;\n    \n    @Prop() heading: string = \"Rejestracja\";\n    @Prop() headingLoginData: string = \"Dane logowania\";\n    @Prop() headingUserData: string = \"Dane użytkownika\";\n    @Prop() headingPermissionData: string = \"Zgody\";\n\n    @Prop() newsletter: string = 'Wyrażam zgodę na otrzymywanie newslettera na podany adres e-mail. Wyrażam zgodę na przetwarzanie moich danych osobowych przez Insparo Patrycja Ordyk z siedzibą w Jeleniej Górze (58-500) przy ul. Sobieskiego 47 Hala E. <strong>Za dołączenie do newslettera otrzymasz kupon 10 zł!</strong>';\n    @Prop() terms: string = 'Oświadczam, że zapoznałem/am się z <a href=\"https://kuchniasklep.pl/regulamin-sklepu-internetowego-pm-113.html\" target=\"_blank\"><strong>regulaminem</strong></a> i <a href=\"https://kuchniasklep.pl/polityka-prywatnosci-pm-54.html\" target=\"_blank\"><strong>polityką prywatności</strong></a> oraz akceptuję ich warunki.<br> <br> Administratorem danych osobowych jest Insparo Patrycja Ordyk z siedzibą w Jeleniej Górze (58-500) przy ul. Sobieskiego 47 Hala E, e-mail: sklep@kuchniasklep.pl (Administrator) W Polityce Prywatności Administrator informuje o celu, okresie i podstawach prawnych przetwarzania danych osobowych, a także o prawach jakie przysługują osobom, których przetwarzane dane osobowe dotyczą, podmiotom którym Administrator może powierzyć do przetwarzania dane osobowe, oraz o zasadach zautomatyzowanego przetwarzania danych osobowych, w tym ich profilowaniu. Wyrażam zgodę na przetwarzanie przez Sprzedawcę moich danych osobowych zawartych w formularzu rejestracji konta w celu i zakresie niezbędnym do realizacji zamówień.';\n    @Prop() register: string = \"Zarejestruj się\";\n\n    @Prop() ip: string;\n    @Prop() host: string;\n    \n    @Prop() accountLink: string;\n    @Prop() registerApi: string = \"\";\n    @Prop() emailApi: string = \"res/true?email=\";\n    @Prop() emailError: string = \"Podany email został już wykorzystany, skorzystaj z funkcji odzyskiwania hasła.\";\n    \n\n    @Prop() success_heading: string = \"Zalogowano\";\n    @Prop() success_message: string = \"Twoje konto zostało założone, za chwilę nastąpi przekierowanie na panel klienta.\";\n\n    @Prop() failure_heading: string = \"Nie zarejestrowano\";\n    @Prop() failure_message: string = \"Sprawdź wprowadzone dane i spróbuj ponownie, jeżeli problem dalej występuje skontaktuj się z naszą obsługą.\";\n    @Prop() notification_button: string = \"Wróć do rejestracji\";\n    \n    @State() loading: boolean = false;\n    @State() company: boolean = false;\n    @State() notification_heading: string;\n    @State() notification_message: string;\n\n\trender() {\n\t\treturn <Host>\n            <section class=\"container\">\n                <h1>{this.heading}</h1>\n\n                <form id=\"register\" enctype=\"application/x-www-form-urlencoded\" onSubmit={(event)=>this.submit_register(event)}>\n                    <h2>{this.headingLoginData}</h2>\n                    <ks-input-dynamic api={this.emailApi} message={this.emailError}>\n                        <ks-input-text email required name='email' label=\"Adres email\" icon=\"mail\" />\n                    </ks-input-dynamic>\n\n                    <ks-input-text password required name='haslo' label=\"Hasło\" icon=\"key\" />\n                    <ks-input-text password required name='haslopowtorz' label=\"Powtórz hasło\" icon=\"key\" sameAs=\"haslo\" />\n\n                    <h2>{this.headingUserData}</h2>\n                    <div class=\"radio\">\n                        <ks-input-check radio name=\"osobowosc\" value=\"1\" label=\"Osoba fizyczna\" checked onChange={() => this.company = false} />\n                        <ks-input-check radio name=\"osobowosc\" value=\"0\" label=\"Firma\" onChange={() => this.company = true}/>\n                    </div>\n\n                    {this.company && <div class=\"columns\">\n                        <ks-input-text required name='nazwa_firmy' label=\"Nazwa Firmy\" icon=\"briefcase\" />\n                        <ks-input-text required name='nip_firmy' label=\"Numer NIP\" icon=\"briefcase\" />\n                    </div>}\n\n                    <ks-input-select name='panstwo' label=\"Kraj\">\n                        <slot name=\"country\" />\n                    </ks-input-select>\n\n                    <div class=\"columns\">\n                        <div>\n                            <ks-input-text required name='imie' label=\"Imię\" icon=\"user\" />\n                            <ks-input-text required name='nazwisko' label=\"Nazwisko\" icon=\"user\" />\n                            <ks-input-text required name='telefon' label=\"Numer Telefonu\" icon=\"phone\" />\n                        </div>\n\n                        <div>\n                            <ks-input-text required name='miasto' label=\"Miasto\" icon=\"map-pin\" />\n                            <ks-input-text required name='ulica' label=\"Ulica i numer domu / lokalu\" icon=\"map-pin\" />\n                            <ks-input-text required name='kod_pocztowy' label=\"Kod Pocztowy\" icon=\"map-pin\" />\n                        </div>\n                    </div>\n\n\n                    <h2>{this.headingPermissionData}</h2>\n\n                    <ks-input-check name=\"biuletyn\" label={this.newsletter} />\n                    <ks-input-check required name=\"regulamin\" label={this.terms} />\n\n                    <input type=\"hidden\" name=\"adres_ip\" value={this.ip} />\n                    <input type=\"hidden\" name=\"nazwa_hosta\" value={this.host} />\n                    <input type=\"hidden\" name=\"akcja\" value=\"zapisz\" />\n\n                    <ks-button rounded primary tall submit name={this.register} loading={this.loading} class=\"register\" />\n                </form>\n\n                <ks-dialog id=\"notification-dialog\" dark>\n                    <section>\n                        <h1>{this.notification_heading}</h1>\n                        <p>{this.notification_message}</p>\n\n                        <ks-button rounded onClick={()=>this.hide_notification()} name={this.notification_button} />\n                    </section>\n                </ks-dialog>\n\n                <ks-overlay dark id=\"loading-overlay\" close={false}>\n                    <div class=\"success\">\n                        <h1>{this.success_heading}</h1>\n                        <p>{this.success_message}</p>\n                        <div class=\"loader\">\n                            <ks-loader large />\n                        </div>\n                    </div>\n                </ks-overlay>\n            </section>\n        </Host>;\n\t}\n\n    redirect_to_account() {\n        const dialog = this.root.querySelector(\"#loading-overlay\") as any;\n        dialog.show();\n\n        setTimeout(() => {\n            window.location.href = this.accountLink;\n        }, 1000);\n    }\n\n    show_notification(heading: string, message: string) {\n        this.notification_heading = heading;\n        this.notification_message = message;\n\n        const dialog = this.root.querySelector(\"#notification-dialog\") as any;\n        dialog.show();\n    }\n\n    hide_notification() {\n        const dialog = this.root.querySelector(\"#notification-dialog\") as any;\n        dialog.hide();\n    }\n\n    async submit_register(event: Event) {\n        event.preventDefault();\n        this.loading = true;\n\n        const form = this.root.querySelector(\"#register\") as HTMLFormElement;\n\n        if(!await ValidateInput(form)) {\n            this.loading = false;\n            return;\n        }\n\n        const filteredParams = new URLSearchParams();\n\n        new FormData(form).forEach((value, key) => {\n            filteredParams.append(key, value.toString());\n        })\n\n        const formData = new FormData();\n        formData.append(\"data\", filteredParams.toString());\n\n        var headers = new Headers();\n        headers.append('pragma', 'no-cache');\n        headers.append('cache-control', 'no-cache');\n\n        await fetch(this.registerApi, {\n            body: formData,\n            method: 'POST',\n            headers: headers,\n            credentials: \"same-origin\"\n        })\n        .then(response => {\n            if(!response.ok) throw response.status;\n            return response.text();\n        })\n        .then(response => {\n            if(response.includes(\"Twoje konto zostało założone\") || true)\n                this.redirect_to_account();\n            //else this.show_notification(this.failure_heading, this.failure_message);\n        })\n        .catch(error => {\n            console.log(error);\n            let message = error;\n\n            if(!navigator.onLine)\n                message = \"Brak połączenia z internetem.\";\n\n            else if(Number.isInteger(error))\n                message = `Błąd połączenia - ${error}`;\n\n            this.show_notification(this.failure_heading, message);\n        });\n\n        this.loading = false;\n    }\n}\n"],"mappings":"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","ignoreList":[]}