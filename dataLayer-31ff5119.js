import{c as e}from"./commonDynamic-a3c330fc.js";import{j as o}from"./fetch-1f8a9006.js";import{j as c}from"./js.cookie-2cc1be5d.js";var r;!function(r){var t,n=new Promise((e=>{t=()=>{e()}}));function i(e){o("https://kuchniasklep.pl/api/fbconversion.php",e)}function u(){const o=e.get("customer"),r=e.get("loggedIn")&&o,t=c.get("cookie_banner_testing_group");return{customerDataAvailable:r,customerEmail:r?o.email:void 0,customerFirstName:r?o.firstName:void 0,customerLastName:r?o.lastName:void 0,customerSubscriberStatus:r?o.subscriber?1:0:void 0,customerCountryISO2:r?o.countryISO2:void 0,customerCity:r?o.city:void 0,customerPhone:r?o.phone:void 0,customerCurrency:r?o.currency:void 0,testingGroup:t||void 0}}function d(e){return e.includes("http")?e:document.baseURI+e}function a(e){return e.map(((e,o)=>{const c=e.breadcrumbs.filter((e=>"Strona główna"!=e.name)).map((e=>e.name)).reverse();return{item_id:e.id,item_name:e.name,currency:e.currency,index:o,price:e.currentPrice,item_brand:e.brandName,item_category:null==c?void 0:c[0],item_category2:null==c?void 0:c[1],item_category3:null==c?void 0:c[2],item_category4:null==c?void 0:c[3],item_category5:null==c?void 0:c[4]}}))}function m(e){return e.map(((e,o)=>{const c=e.breadcrumbs.filter((e=>"Strona główna"!=e.name)).map((e=>e.name));return{name:e.name,id:e.id,price:e.currentPrice,brand:e.brandName,category:c.join("/"),position:o+1,quantity:e.quantity}}))}r.pageview=async function(e){var o;e=crypto.randomUUID();const c=Object.assign({event:"ks.pageview",facebookEventId:e},u());null===(o=window.dataLayer)||void 0===o||o.push(c),t(),i(c)},r.product=async function(e,o=""){var c,r;await n,o=crypto.randomUUID();const t=e.breadcrumbs,s=Object.assign(Object.assign({event:"ks.product",facebookEventId:o},u()),{productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productImage:(null==e?void 0:e.images.length)>0?d(e.images[0].full.url):void 0,productURL:d(document.location.href),productSKU:e.model,productBrand:e.brand.name,productCategory:t[t.length-1].name,productAvailability:e.shippingTime,productQuantity:1,productCategories:e.categories,ecomm_prodid:e.id,ecomm_pagetype:"product",ecomm_totalvalue:e.currentPrice,ecommerce:{items:a([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,impressions:m([e])}}});null===(c=window.dataLayer)||void 0===c||c.push({ecommerce:null}),null===(r=window.dataLayer)||void 0===r||r.push(s),i(s)},r.listing=async function(e){var o,c,r,t;await n;const i="category"==e.type?"category":"manufacturer"==e.type?"manufacturer":"search"==e.type?"search":null;i&&(null===(o=window.dataLayer)||void 0===o||o.push({ecommerce:null}),null===(c=window.dataLayer)||void 0===c||c.push(Object.assign(Object.assign({event:"ks.listing"},u()),{type:i,listingCategories:"category"==i?e.breadcrumbs.filter((e=>"0"!=e.id)):void 0,listingProducts:e.products,ecommerce:{items:a(e.products)},uaecommerce:{ecommerce:{currencyCode:null===(t=null===(r=e.products)||void 0===r?void 0:r[0])||void 0===t?void 0:t.currency,impressions:m(e.products)}}})))},r.addToCart=async function(e,o){var c,r;await n,o=crypto.randomUUID();const t=Object.assign(Object.assign({event:"ks.addToCart",facebookEventId:o},u()),{productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:d(e.imageFull),productURL:d(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:a([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,add:{products:m([e])}}}});null===(c=window.dataLayer)||void 0===c||c.push({ecommerce:null}),null===(r=window.dataLayer)||void 0===r||r.push(t),i(t)},r.removeFromCart=async function(e){var o,c;await n,null===(o=window.dataLayer)||void 0===o||o.push({ecommerce:null}),null===(c=window.dataLayer)||void 0===c||c.push(Object.assign(Object.assign({event:"ks.removeFromCart"},u()),{productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:d(e.imageFull),productURL:d(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:a([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,remove:{products:m([e])}}}}))},r.addToFavourites=async function(e){var o,c;await n,null===(o=window.dataLayer)||void 0===o||o.push({ecommerce:null}),null===(c=window.dataLayer)||void 0===c||c.push(Object.assign(Object.assign({event:"ks.addToFavourites"},u()),{productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:d(e.imageFull),productURL:d(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:a([e]),value:e.currentPrice,currency:e.currency}}))},r.view_cart=async function(e){var o,c;await n,null===(o=window.dataLayer)||void 0===o||o.push({ecommerce:null}),null===(c=window.dataLayer)||void 0===c||c.push(Object.assign(Object.assign({event:"ks.viewCart"},u()),{cartCurrency:e.currency,cartProductValue:e.productValue,cartValue:e.totalValue,cartProducts:e.products,ecomm_prodid:JSON.stringify(Object.values(e.products).map((e=>e.id))),ecomm_pagetype:"cart",ecomm_totalvalue:e.productValue,ecommerce:{items:a(Object.values(e.products)),value:e.productValue,currency:e.currency},uaecommerce:{ecommerce:{checkout:{actionField:{step:1},currencyCode:e.currency,products:m(Object.values(e.products))}}}}))},r.order_checkout=async function(e,o){var c,r;await n,o=crypto.randomUUID();const t=Object.assign(Object.assign({event:"ks.checkout",facebookEventId:o},u()),{orderProducts:e.products,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderShippingTime:e.totalShippingTimeDays,orderCoupon:e.coupon,ecommerce:{items:a(e.products)},uaecommerce:{ecommerce:{checkout:{actionField:{step:3},currencyCode:e.currency,products:m(e.products)}}}});null===(c=window.dataLayer)||void 0===c||c.push({ecommerce:null}),null===(r=window.dataLayer)||void 0===r||r.push(t),i(t)},r.order_form=async function(e,o){var c,r;await n,o=crypto.randomUUID();const t=Object.assign(Object.assign({event:"ks.orderForm",facebookEventId:o},u()),{orderProducts:e.products,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderShippingTime:e.totalShippingTimeDays,orderCoupon:e.coupon,ecommerce:{items:a(e.products)},uaecommerce:{ecommerce:{checkout:{actionField:{step:2},currencyCode:e.currency,products:m(e.products)}}}});null===(c=window.dataLayer)||void 0===c||c.push({ecommerce:null}),null===(r=window.dataLayer)||void 0===r||r.push(t),i(t)},r.order_placed=async function(e,o){var c,r;await n,o=crypto.randomUUID();const t=Object.assign(Object.assign({event:"ks.order",facebookEventId:o},u()),{orderProducts:e.products,orderId:e.id,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderShippingTime:e.totalShippingTimeDays,orderCoupon:e.coupon,ecomm_prodid:JSON.stringify(Object.values(e.products).map((e=>e.id))),ecomm_pagetype:"purchase",ecomm_totalvalue:e.productValue,ecommerce:{transaction_id:e.id,value:e.totalValue,currency:e.currency,shipping:e.shippingValue,coupon:e.coupon,items:a(e.products)},uaecommerce:{ecommerce:{purchase:{currencyCode:e.currency,actionField:{id:e.id,revenue:e.totalValue,shipping:e.shippingValue,coupon:e.coupon},products:m(e.products)}}}});null===(c=window.dataLayer)||void 0===c||c.push({ecommerce:null}),null===(r=window.dataLayer)||void 0===r||r.push(t),i(t)},r.search=async function(e){var o;await n,null===(o=window.dataLayer)||void 0===o||o.push(Object.assign({event:"ks.search",searchQuery:e},u()))},r.subscribe=async function(e){var o;await n,null===(o=window.dataLayer)||void 0===o||o.push(Object.assign(Object.assign({event:"ks.subscribe"},u()),{subscriptionPlace:e.place,subscriptionEmail:e.email,subscriptionName:null==e?void 0:e.name,subscriptionStatus:e.subscriber?1:0}))},r.recipe=async function(e){var o;await n,null===(o=window.dataLayer)||void 0===o||o.push(Object.assign(Object.assign({event:"ks.recipe"},u()),{recipeName:e.title,recipeCategory:e.category,recipeCuisine:e.cuisine}))}}(r||(r={}));export{r as D}