import{r as i,h as e,a as s}from"./index-0TTgkKkd.js";import{c as o}from"./index-CZU_OQRD.js";import{j as t}from"./fetch-Cj4w559p.js";import{m as a}from"./marked.esm-CWDO8ZHo.js";const d=o({});const c='ks-page-guide{display:block;background-color:#f2f2f2}ks-page-guide .text{max-width:1000px;padding:20px;margin:auto}ks-page-guide .dialog{max-width:1000px;width:100%;padding:20px;margin:auto;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#ffffff;border:1px solid #e9e9e9;border-radius:10px;overflow:hidden}ks-page-guide .dialog .buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:10px;margin-top:10px}ks-page-guide .dialog .choices{display:-ms-flexbox;display:flex;gap:10px;-ms-flex-wrap:wrap;flex-wrap:wrap}ks-page-guide .dialog .choice{width:100%;max-width:215px;background-color:#f2f2f2;border-radius:10px;overflow:hidden;position:relative;padding:8px;cursor:pointer}ks-page-guide .dialog .choice ks-img3{height:140px;border-radius:10px;overflow:hidden}ks-page-guide .dialog .choice .description{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}ks-page-guide .dialog .choice h3{font-size:17px;padding:10px 10px 6px 10px;margin:0}ks-page-guide .dialog .choice p{padding:0px 10px 10px 10px;margin:0;font-size:14px}ks-page-guide .dialog .choice .select{position:absolute;top:4px;right:4px;width:35px;height:35px;background-color:#f2f2f2;border-radius:35px 0 35px 35px}ks-page-guide .dialog .choice .select::before{content:"";display:block;width:25px;height:25px;position:absolute;right:5px;top:5px;border-radius:25px;border:1px solid #818181;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .dialog .choice.active .select::after{content:"";display:block;width:17px;height:17px;position:absolute;right:9px;top:9px;border-radius:17px;background-color:#212121}ks-page-guide .dialog .choices.multiple .choice .select{border-radius:0 0 0 8px;top:8px;right:8px;width:30px;height:30px}ks-page-guide .dialog .choices.multiple .choice .select::before{right:0px;top:0px;border-radius:5px}ks-page-guide .dialog .choices.multiple .select::after{right:4px;top:4px;border-radius:3px}ks-page-guide .dialog .navigation{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:10px}ks-page-guide .dialog .navigation .breadcrumbs{display:-ms-flexbox;display:flex;gap:5px}ks-page-guide .dialog .navigation .breadcrumbs>*{background-color:#dddddd;padding:5px 10px;border-radius:7px;cursor:pointer}ks-page-guide .dialog .navigation .back{background-color:#dddddd;padding:5px 10px;border-radius:7px;cursor:pointer}ks-page-guide .products{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;gap:10px;width:100%;margin:20px auto 0 auto;padding:0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .products .product{position:relative;max-width:300px;-ms-flex:1 1 260px;flex:1 1 260px}ks-page-guide .products .product ks-product-card{width:100%;margin-bottom:10px}ks-page-guide .products .product .condition{padding:5px 0;font-size:14px}ks-page-guide .products .product .condition ks-icon{margin-right:5px}ks-page-guide .products .product .best{position:absolute;z-index:1;top:10px;left:-5px;background-color:#151515;color:#ffffff;padding:5px 15px;border-radius:5px}ks-page-guide .summary>div{margin:0 0 10px 0}ks-page-guide .summary>div>div{display:inline-block;background-color:#dddddd;padding:3px 7px;border-radius:5px;margin:2px}ks-page-guide .summary ks-button{margin:20px -20px -20px -20px}ks-page-guide .dialog .choice,ks-page-guide .dialog .navigation .breadcrumbs>*{-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;opacity:1}ks-page-guide .dialog .navigation .breadcrumbs>*:hover{opacity:0.8}ks-page-guide .dialog .choice:hover{opacity:0.95}ks-page-guide .dialog .choice:hover,ks-page-guide .dialog .navigation .breadcrumbs>*:active{opacity:0.7}ks-page-guide[loading] .dialog .choices,ks-page-guide[loading] .products{opacity:0;-webkit-transition:none;transition:none}ks-page-guide .dialog .choices,ks-page-guide .products{-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease}ks-page-guide .dialog .navigation .back{display:none}@media screen and (max-width: 1010px){ks-page-guide .dialog .navigation .breadcrumbs{display:none}ks-page-guide .dialog .navigation .back{display:block}ks-page-guide .dialog .choices .choice{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;max-width:100%}ks-page-guide .dialog .choice ks-img3{height:50px;width:80px}ks-page-guide .dialog .choice ks-img3.large{height:80px;width:80px}ks-page-guide .dialog .choices .choice .select{position:relative;top:0;right:0}ks-page-guide .dialog .choices.multiple .choice .select{position:relative;top:2.5px}ks-page-guide .product .condition{padding:2px 0}ks-page-guide .product .condition ks-icon{-webkit-transform:scale(0.9);transform:scale(0.9);margin:0}}@media screen and (min-width: 701px){ks-page-guide>ks-page-base>.content{padding:0 40px}}';const p=class{constructor(s){i(this,s);this.loading=false;this.active=null;this.summary=false;this.choices=[];this.choices_stage=()=>[e("h2",null,this.activeCategory()?.heading),e("div",{class:["choices",this.activeCategory()?.multiple?"multiple":null].join(" ")},this.activeCategory()?.choices.map((i=>e("div",{class:["choice",this.activeCategoryChoices()?.includes(i.id)?"active":null].join(" "),onClick:()=>this.selectChoice(this.active,i)},e("ks-img3",{fit:"cover",image:i.image,class:i.description?"large":null}),e("div",{class:"description"},e("h3",null,i.name),i.description?e("p",null,i.description):null),e("div",{class:"select"})))),this.loading),e("div",{class:"buttons"},this.activeCategory()?.nopreference?e("ks-button",{round:true,border:true,name:"Nie mam preferencji",onClick:()=>this.selectChoice(this.active,null)}):null,this.activeCategoryChoices()?.length>0?e("ks-button",{round:true,name:"Kontynuuj",onClick:()=>this.nextCategory()}):null)];this.summary_stage=i=>[e("h2",null,"Dziękujemy za Twoją opinię!"),e("p",null,"Na podstawie Twoich odpowiedzi możemy polecić Ci kilka świetnych rozwiązań. Sprawdź je poniżej."),e("div",{class:"summary"},i?.map((i=>this.categoryChoices(i.id)?.includes(null)?null:e("div",null,i.name,": ",this.categoryChoices(i.id)?.map((e=>i.choices?.find((i=>i.id==e))?.name))?.map((i=>e("div",null,i)))))),e("ks-button",{name:"Rozpocznij ponownie",icon:"edit-3",onClick:()=>this.reset()}))]}componentWillLoad(){const i=document.getElementById(this.guideData);const e=JSON.parse(i.innerHTML);Object.keys(e).map((i=>{d.set(i,e[i])}));this.resetActive()}initialCategory(){return d.get("dialog")?.[0]?.id}resetActive(){this.active=this.initialCategory()}nextCategory(){this.selectCategoryRelative(1)}previousCategory(){this.selectCategoryRelative(-1)}selectCategoryRelative(i){const e=d.get("dialog")?.[this.activeIndex()+i];this.selectCategory(e?.id)}activeIndex(){return this.index(this.active)}index(i){return d.get("dialog")?.findIndex((e=>e.id==i))}activeCategory(){return this.category(this.active)}category(i){return d.get("dialog")?.find((e=>e.id==i))}activeCategoryChoices(){return this.categoryChoices(this.active)}categoryChoices(i){return this.choices.find((e=>e.category==i))?.choices}selectChoice(i,e){let s=this.choices;const o=e?.id??null;const t=this.category(i)?.multiple;const a=this.choices.find((e=>e.category==i));if(a){if(t){const i=a.choices.indexOf(o);if(i!=-1)a.choices.splice(i,1);else a.choices.push(o)}else a.choices=[o]}else{this.choices.push({category:i,choices:[o]})}this.choices=[...s];if(e==null)this.nextCategory()}selectCategory(i){const e=this.activeIndex();const s=this.index(i);if(s==-1)this.summary=true;else{if(this.choices.length>s)this.choices=[...this.choices.slice(0,s)];this.active=i;this.summary=false}if(this.active==this.initialCategory())this.componentWillLoad();else this.dynamicResults(e);this.scroll()}scroll(){const i=this.root.querySelector(".dialog");const e=i.querySelector(".navigation")?.getBoundingClientRect();const s=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth);if(!s)setTimeout((()=>{const e=i?.getBoundingClientRect()?.top+window.scrollY;window.scroll({top:e,behavior:"smooth"})}),300)}reset(){this.summary=false;this.resetActive();this.choices=[];this.componentWillLoad()}async dynamicResults(i){this.loading=true;const e=await t(d.get("api"),{choices:this.choices});const s=await(e?.json());if(s){d.set("dialog",s?.dialog);d.set("products",s?.products)}this.loading=false;if(!this.activeCategory()){const e=d.get("dialog")?.[i+1];if(e)this.active=e.id;else this.summary=true}}render(){const i=d.get("dialog");const s=d.get("products");return e("ks-page-base",{key:"72233a52e0731d91738c8288b399ad83ec711eff",skipbase:this.skipbase,commonData:this.commonData,commonDynamicData:this.commonDynamicData},e("div",{key:"a68ee31da30b201b01d0b5ecb67f3ebc7692c70c",class:"content"},e("div",{key:"845f781319fdeb5a38e953c8721150719a6b0301",class:"text"},e("h1",{key:"593a8409e0efea460943c7ba8b0964e57de5b0bd"},d.get("heading")),e("p",{key:"4b3229508cbc422ded5120cd6c52f6b000173b02"},d.get("description"))),e("div",{key:"29d5a7409221fef0372226a911df2ad629899826",class:"dialog"},e("div",{key:"21fcbfc1e2092c08724098fb963e49cdcf01077f",class:"navigation"},e("div",{key:"49736f53025fdfac3234a79fa5500c9d7669c51e",class:"breadcrumbs"},i.slice(0,Math.max(this.choices.length,this.activeIndex())).map((i=>e("div",{onClick:()=>this.selectCategory(i.id)},i?.name)))),e("div",{key:"8af3844b48c9c48b7e32b4778c4e3516eefc78d5",class:"back",onClick:()=>this.previousCategory()},e("ks-icon",{key:"08b74f0f081b9dce6287e8169d9b5e95d55ce051",name:"chevron-left"})),e("div",{key:"2b5f621ee4b28ce4dde50760d66f47377627e94b"},this.summary?i.length:this.activeIndex()+1," z ",i.length)),this.summary?this.summary_stage(i):this.choices_stage()),s&&s?.length>0&&(this.activeIndex()>0||this.summary)?e("div",{class:"products"},s?.map(((i,s)=>e("div",{class:"product",key:i.id},s==0?e("div",{class:"best"},"Najlepszy wybór"):null,e("ks-product-card",{constheight:true,flat:true,linkOnly:true,product:i}),i?.conditions?.map((i=>e("div",{class:"condition"},e("ks-icon",{name:"check-circle"}),i.category,": ",i.items.join(", ")))))))):null,e("div",{key:"d61eb002e0a40d532292d7572ab36a9708c495ad",class:"text",innerHTML:a.parse(d.get("bottom_description"))})))}get root(){return s(this)}};p.style=c;export{p as ks_page_guide};
//# sourceMappingURL=ks-page-guide.entry.js.map