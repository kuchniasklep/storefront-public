import{r as i,h as e}from"./index-e3198654.js";import{c as o}from"./index-5a4e318f.js";import{j as s}from"./fetch-1f8a9006.js";import{m as d}from"./marked.umd-9c86639b.js";import"./_commonjsHelpers-ba3f0406.js";const t=o({}),a=class{constructor(o){i(this,o),this.choices_stage=i=>{var o;return[e("h2",null,i[this.active].heading),e("div",{class:["choices",i[this.active].multiple?"multiple":null].join(" ")},i[this.active].choices.map((i=>{var o,s;return e("div",{class:["choice",(null===(s=null===(o=this.choices)||void 0===o?void 0:o[this.active])||void 0===s?void 0:s.includes(i.id))?"active":null].join(" "),onClick:()=>this.selectChoice(this.active,i)},e("ks-img3",{fit:"cover",image:i.image,class:i.description?"large":null}),e("div",{class:"description"},e("h3",null,i.name),i.description?e("p",null,i.description):null),e("div",{class:"select"}))}))),e("div",{class:"buttons"},e("ks-button",{round:!0,border:!0,name:"Nie mam preferencji",onClick:()=>this.selectChoice(this.active,null)}),void 0!==(null===(o=this.choices)||void 0===o?void 0:o[this.active])?e("ks-button",{round:!0,name:"Kontynuuj",onClick:()=>this.nextCategory()}):null)]},this.summary_stage=i=>[e("h2",null,"Dziękujemy za Twoją opinię!"),e("p",null,"Na podstawie Twoich odpowiedzi możemy polecić Ci kilka świetnych rozwiązań. Sprawdź je poniżej."),e("div",{class:"summary"},null==i?void 0:i.map(((i,o)=>{var s,d;return e("div",null,i.name,": ",null===(d=null===(s=this.choices[o])||void 0===s?void 0:s.map((e=>{var o,s;return null===(s=null===(o=i.choices)||void 0===o?void 0:o.find((i=>i.id==e)))||void 0===s?void 0:s.name})))||void 0===d?void 0:d.map((i=>e("div",null,i))))})),e("ks-button",{name:"Rozpocznij ponownie",icon:"edit-3",onClick:()=>this.reset()}))],this.skipbase=void 0,this.commonData=void 0,this.commonDynamicData=void 0,this.guideData=void 0,this.active=0,this.summary=!1,this.choices=[]}componentWillLoad(){const i=document.getElementById(this.guideData),e=JSON.parse(i.innerHTML);Object.keys(e).map((i=>{t.set(i,e[i])}))}selectChoice(i,e){var o,s,d,a;let l=this.choices;const p=null!==(o=null==e?void 0:e.id)&&void 0!==o?o:null,r=null===(d=null===(s=t.get("dialog"))||void 0===s?void 0:s[i])||void 0===d?void 0:d.multiple;if(void 0!==(null===(a=this.choices)||void 0===a?void 0:a[i])&&this.choices.length==i+1)if(r){const e=l[i].indexOf(p);-1!=e?l[i].splice(e,1):l[i].push(p)}else l[i]=[p];else this.choices.length==i?l=[...l,[p]]:this.choices.length>i?l=[...l.slice(0,i),[p]]:(l=[],this.active=0);this.choices=[...l],null==e&&this.nextCategory()}selectCategory(i){this.choices.length>i&&(this.choices=[...this.choices.slice(0,i)]),t.get("dialog").length>i?(this.active=i,this.summary=!1):this.summary=!0,this.dynamicResults()}reset(){this.summary=!1,this.active=0,this.choices=[],this.componentWillLoad()}async nextCategory(){this.selectCategory(this.active+1)}async dynamicResults(){const i=await s(t.get("api"),{choices:this.choices,categories:t.get("dialog").map((i=>i.id))}),e=await(null==i?void 0:i.json());e&&(t.set("dialog",null==e?void 0:e.dialog),t.set("products",null==e?void 0:e.products))}render(){const i=t.get("dialog"),o=t.get("products");return e("ks-page-base",{skipbase:this.skipbase,commonData:this.commonData,commonDynamicData:this.commonDynamicData},e("div",{class:"text"},e("h1",null,t.get("heading")),e("p",null,t.get("description"))),e("div",{class:"dialog"},e("div",{class:"navigation"},e("div",{class:"breadcrumbs"},i.slice(0,Math.max(this.choices.length,this.active+1)).map(((i,o)=>e("div",{onClick:()=>this.selectCategory(o)},null==i?void 0:i.name)))),e("div",null,this.active+1," z ",i.length)),this.summary?this.summary_stage(i):this.choices_stage(i)),o&&(null==o?void 0:o.length)>0&&this.active>0?e("div",{class:"products"},null==o?void 0:o.map(((i,o)=>{var s;return e("div",{class:"product"},0==o?e("div",{class:"best"},"Najlepszy wybór"):null,e("ks-product-card",{flat:!0,linkOnly:!0,product:i}),null===(s=null==i?void 0:i.conditions)||void 0===s?void 0:s.map((i=>e("div",{class:"condition"},e("ks-icon",{name:"check-circle"}),i.category,": ",i.items.join(", ")))))}))):null,e("div",{class:"text",innerHTML:d.marked.parse(t.get("bottom_description"))}))}};a.style='ks-page-guide{display:block;background-color:#f2f2f2}ks-page-guide .text{max-width:1000px;padding:20px;margin:auto}ks-page-guide .dialog{max-width:1000px;width:100%;padding:20px;margin:auto;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#ffffff;border:1px solid #e9e9e9;border-radius:10px;overflow:hidden}ks-page-guide .dialog .buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:10px;margin-top:10px}ks-page-guide .dialog .choices{display:-ms-flexbox;display:flex;gap:10px;-ms-flex-wrap:wrap;flex-wrap:wrap}ks-page-guide .dialog .choice{width:100%;max-width:215px;background-color:#f2f2f2;border-radius:10px;overflow:hidden;position:relative;padding:8px;cursor:pointer}ks-page-guide .dialog .choice ks-img3{height:140px;border-radius:10px;overflow:hidden}ks-page-guide .dialog .choice .description{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}ks-page-guide .dialog .choice h3{font-size:17px}ks-page-guide .dialog .choice h3,ks-page-guide .dialog .choice p{padding:10px;margin:0}ks-page-guide .dialog .choice .select{position:absolute;top:4px;right:4px;width:35px;height:35px;background-color:#f2f2f2;border-radius:35px 0 35px 35px}ks-page-guide .dialog .choice .select::before{content:"";display:block;width:25px;height:25px;position:absolute;right:5px;top:5px;border-radius:25px;border:1px solid #818181;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .dialog .choice.active .select::after{content:"";display:block;width:17px;height:17px;position:absolute;right:9px;top:9px;border-radius:17px;background-color:#212121}ks-page-guide .dialog .choices.multiple .choice .select{border-radius:0 0 0 8px;top:8px;right:8px;width:30px;height:30px}ks-page-guide .dialog .choices.multiple .choice .select::before{right:0px;top:0px;border-radius:5px}ks-page-guide .dialog .choices.multiple .select::after{right:4px;top:4px;border-radius:3px}ks-page-guide .dialog .navigation{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:10px}ks-page-guide .dialog .navigation .breadcrumbs{display:-ms-flexbox;display:flex;gap:5px}ks-page-guide .dialog .navigation .breadcrumbs>*{background-color:#dddddd;padding:5px 10px;border-radius:7px;cursor:pointer}ks-page-guide .products{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;gap:10px;width:100%;margin:20px auto 0 auto;padding:0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .products .product{position:relative;max-width:300px;-ms-flex:1 1 260px;flex:1 1 260px}ks-page-guide .products .product ks-product-card{width:100%;margin-bottom:10px}ks-page-guide .products .product .condition{padding:5px 0}ks-page-guide .products .product .condition ks-icon{margin-right:5px}ks-page-guide .products .product .best{position:absolute;z-index:1;top:10px;left:-5px;background-color:#151515;color:#ffffff;padding:5px 15px;border-radius:5px}ks-page-guide .summary>div{margin:0 0 10px 0}ks-page-guide .summary>div>div{display:inline-block;background-color:#dddddd;padding:3px 7px;border-radius:5px;margin:0 3px}ks-page-guide .summary ks-button{margin:20px -20px -20px -20px}ks-page-guide .dialog .choice,ks-page-guide .dialog .navigation .breadcrumbs>*{-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;opacity:1}ks-page-guide .dialog .navigation .breadcrumbs>*:hover{opacity:0.8}ks-page-guide .dialog .choice:hover{opacity:0.95}ks-page-guide .dialog .choice:hover,ks-page-guide .dialog .navigation .breadcrumbs>*:active{opacity:0.7}@media screen and (max-width: 1010px){ks-page-guide .dialog .choices .choice{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;max-width:100%}ks-page-guide .dialog .choice ks-img3{height:50px;width:80px}ks-page-guide .dialog .choice ks-img3.large{height:80px;width:80px}ks-page-guide .dialog .choices .choice .select{position:relative;top:0;right:0}ks-page-guide .dialog .choices.multiple .choice .select{position:relative;top:2.5px}ks-page-guide .product .condition{font-size:14px;padding:2px 0}ks-page-guide .product .condition ks-icon{-webkit-transform:scale(0.9);transform:scale(0.9);margin:0}}';export{a as ks_page_guide}