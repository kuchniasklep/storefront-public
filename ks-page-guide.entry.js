import{r as i,h as o,g as e}from"./index-e3198654.js";import{c as d}from"./index-5a4e318f.js";import{j as s}from"./fetch-1f8a9006.js";import{m as t}from"./marked.umd-9c86639b.js";import"./_commonjsHelpers-ba3f0406.js";const a=d({}),l=class{constructor(e){i(this,e),this.choices_stage=()=>{var i,e,d,s,t;return[o("h2",null,null===(i=this.activeCategory())||void 0===i?void 0:i.heading),o("div",{class:["choices",(null===(e=this.activeCategory())||void 0===e?void 0:e.multiple)?"multiple":null].join(" ")},null===(d=this.activeCategory())||void 0===d?void 0:d.choices.map((i=>{var e;return o("div",{class:["choice",(null===(e=this.activeCategoryChoices())||void 0===e?void 0:e.includes(i.id))?"active":null].join(" "),onClick:()=>this.selectChoice(this.active,i)},o("ks-img3",{fit:"cover",image:i.image,class:i.description?"large":null}),o("div",{class:"description"},o("h3",null,i.name),i.description?o("p",null,i.description):null),o("div",{class:"select"}))})),this.loading),o("div",{class:"buttons"},(null===(s=this.activeCategory())||void 0===s?void 0:s.nopreference)?o("ks-button",{round:!0,border:!0,name:"Nie mam preferencji",onClick:()=>this.selectChoice(this.active,null)}):null,(null===(t=this.activeCategoryChoices())||void 0===t?void 0:t.length)>0?o("ks-button",{round:!0,name:"Kontynuuj",onClick:()=>this.nextCategory()}):null)]},this.summary_stage=i=>[o("h2",null,"Dziękujemy za Twoją opinię!"),o("p",null,"Na podstawie Twoich odpowiedzi możemy polecić Ci kilka świetnych rozwiązań. Sprawdź je poniżej."),o("div",{class:"summary"},null==i?void 0:i.map((i=>{var e,d,s;return(null===(e=this.categoryChoices(i.id))||void 0===e?void 0:e.includes(null))?null:o("div",null,i.name,": ",null===(s=null===(d=this.categoryChoices(i.id))||void 0===d?void 0:d.map((o=>{var e,d;return null===(d=null===(e=i.choices)||void 0===e?void 0:e.find((i=>i.id==o)))||void 0===d?void 0:d.name})))||void 0===s?void 0:s.map((i=>o("div",null,i))))})),o("ks-button",{name:"Rozpocznij ponownie",icon:"edit-3",onClick:()=>this.reset()}))],this.skipbase=void 0,this.commonData=void 0,this.commonDynamicData=void 0,this.guideData=void 0,this.loading=!1,this.active=null,this.summary=!1,this.choices=[]}componentWillLoad(){const i=document.getElementById(this.guideData),o=JSON.parse(i.innerHTML);Object.keys(o).map((i=>{a.set(i,o[i])})),this.resetActive()}initialCategory(){var i,o;return null===(o=null===(i=a.get("dialog"))||void 0===i?void 0:i[0])||void 0===o?void 0:o.id}resetActive(){this.active=this.initialCategory()}nextCategory(){this.selectCategoryRelative(1)}previousCategory(){this.selectCategoryRelative(-1)}selectCategoryRelative(i){var o;const e=null===(o=a.get("dialog"))||void 0===o?void 0:o[this.activeIndex()+i];this.selectCategory(null==e?void 0:e.id)}activeIndex(){return this.index(this.active)}index(i){var o;return null===(o=a.get("dialog"))||void 0===o?void 0:o.findIndex((o=>o.id==i))}activeCategory(){return this.category(this.active)}category(i){var o;return null===(o=a.get("dialog"))||void 0===o?void 0:o.find((o=>o.id==i))}activeCategoryChoices(){return this.categoryChoices(this.active)}categoryChoices(i){var o;return null===(o=this.choices.find((o=>o.category==i)))||void 0===o?void 0:o.choices}selectChoice(i,o){var e,d;let s=this.choices;const t=null!==(e=null==o?void 0:o.id)&&void 0!==e?e:null,a=null===(d=this.category(i))||void 0===d?void 0:d.multiple,l=this.choices.find((o=>o.category==i));if(l)if(a){const i=l.choices.indexOf(t);-1!=i?l.choices.splice(i,1):l.choices.push(t)}else l.choices=[t];else this.choices.push({category:i,choices:[t]});this.choices=[...s],null==o&&this.nextCategory()}selectCategory(i){const o=this.index(i);-1==o?this.summary=!0:(this.choices.length>o&&(this.choices=[...this.choices.slice(0,o)]),this.active=i,this.summary=!1),this.active==this.initialCategory()?this.componentWillLoad():this.dynamicResults(),this.scroll()}scroll(){var i;const o=this.root.querySelector(".dialog"),e=null===(i=o.querySelector(".navigation"))||void 0===i?void 0:i.getBoundingClientRect();e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)||setTimeout((()=>{var i;const e=(null===(i=null==o?void 0:o.getBoundingClientRect())||void 0===i?void 0:i.top)+window.scrollY;window.scroll({top:e,behavior:"smooth"})}),300)}reset(){this.summary=!1,this.resetActive(),this.choices=[],this.componentWillLoad()}async dynamicResults(){this.loading=!0;const i=await s(a.get("api"),{choices:this.choices}),o=await(null==i?void 0:i.json());o&&(a.set("dialog",null==o?void 0:o.dialog),a.set("products",null==o?void 0:o.products)),this.loading=!1}render(){const i=a.get("dialog"),e=a.get("products");return console.log(this.choices),o("ks-page-base",{skipbase:this.skipbase,commonData:this.commonData,commonDynamicData:this.commonDynamicData},o("div",{class:"content"},o("div",{class:"text"},o("h1",null,a.get("heading")),o("p",null,a.get("description"))),o("div",{class:"dialog"},o("div",{class:"navigation"},o("div",{class:"breadcrumbs"},i.slice(0,Math.max(this.choices.length,this.activeIndex())).map((i=>o("div",{onClick:()=>this.selectCategory(i.id)},null==i?void 0:i.name)))),o("div",{class:"back",onClick:()=>this.previousCategory()},o("ks-icon",{name:"chevron-left"})),o("div",null,this.activeIndex()+1," z ",i.length)),this.summary?this.summary_stage(i):this.choices_stage()),e&&(null==e?void 0:e.length)>0&&this.activeIndex()>0?o("div",{class:"products"},null==e?void 0:e.map(((i,e)=>{var d;return o("div",{class:"product",key:i.id},0==e?o("div",{class:"best"},"Najlepszy wybór"):null,o("ks-product-card",{constheight:!0,flat:!0,linkOnly:!0,product:i}),null===(d=null==i?void 0:i.conditions)||void 0===d?void 0:d.map((i=>o("div",{class:"condition"},o("ks-icon",{name:"check-circle"}),i.category,": ",i.items.join(", ")))))}))):null,o("div",{class:"text",innerHTML:t.marked.parse(a.get("bottom_description"))})))}get root(){return e(this)}};l.style='ks-page-guide{display:block;background-color:#f2f2f2}ks-page-guide .text{max-width:1000px;padding:20px;margin:auto}ks-page-guide .dialog{max-width:1000px;width:100%;padding:20px;margin:auto;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#ffffff;border:1px solid #e9e9e9;border-radius:10px;overflow:hidden}ks-page-guide .dialog .buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:10px;margin-top:10px}ks-page-guide .dialog .choices{display:-ms-flexbox;display:flex;gap:10px;-ms-flex-wrap:wrap;flex-wrap:wrap}ks-page-guide .dialog .choice{width:100%;max-width:215px;background-color:#f2f2f2;border-radius:10px;overflow:hidden;position:relative;padding:8px;cursor:pointer}ks-page-guide .dialog .choice ks-img3{height:140px;border-radius:10px;overflow:hidden}ks-page-guide .dialog .choice .description{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}ks-page-guide .dialog .choice h3{font-size:17px;padding:10px 10px 6px 10px;margin:0}ks-page-guide .dialog .choice p{padding:0px 10px 10px 10px;margin:0;font-size:14px}ks-page-guide .dialog .choice .select{position:absolute;top:4px;right:4px;width:35px;height:35px;background-color:#f2f2f2;border-radius:35px 0 35px 35px}ks-page-guide .dialog .choice .select::before{content:"";display:block;width:25px;height:25px;position:absolute;right:5px;top:5px;border-radius:25px;border:1px solid #818181;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .dialog .choice.active .select::after{content:"";display:block;width:17px;height:17px;position:absolute;right:9px;top:9px;border-radius:17px;background-color:#212121}ks-page-guide .dialog .choices.multiple .choice .select{border-radius:0 0 0 8px;top:8px;right:8px;width:30px;height:30px}ks-page-guide .dialog .choices.multiple .choice .select::before{right:0px;top:0px;border-radius:5px}ks-page-guide .dialog .choices.multiple .select::after{right:4px;top:4px;border-radius:3px}ks-page-guide .dialog .navigation{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:10px}ks-page-guide .dialog .navigation .breadcrumbs{display:-ms-flexbox;display:flex;gap:5px}ks-page-guide .dialog .navigation .breadcrumbs>*{background-color:#dddddd;padding:5px 10px;border-radius:7px;cursor:pointer}ks-page-guide .dialog .navigation .back{background-color:#dddddd;padding:5px 10px;border-radius:7px;cursor:pointer}ks-page-guide .products{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;gap:10px;width:100%;margin:20px auto 0 auto;padding:0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .products .product{position:relative;max-width:300px;-ms-flex:1 1 260px;flex:1 1 260px}ks-page-guide .products .product ks-product-card{width:100%;margin-bottom:10px}ks-page-guide .products .product .condition{padding:5px 0;font-size:14px}ks-page-guide .products .product .condition ks-icon{margin-right:5px}ks-page-guide .products .product .best{position:absolute;z-index:1;top:10px;left:-5px;background-color:#151515;color:#ffffff;padding:5px 15px;border-radius:5px}ks-page-guide .summary>div{margin:0 0 10px 0}ks-page-guide .summary>div>div{display:inline-block;background-color:#dddddd;padding:3px 7px;border-radius:5px;margin:2px}ks-page-guide .summary ks-button{margin:20px -20px -20px -20px}ks-page-guide .dialog .choice,ks-page-guide .dialog .navigation .breadcrumbs>*{-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;opacity:1}ks-page-guide .dialog .navigation .breadcrumbs>*:hover{opacity:0.8}ks-page-guide .dialog .choice:hover{opacity:0.95}ks-page-guide .dialog .choice:hover,ks-page-guide .dialog .navigation .breadcrumbs>*:active{opacity:0.7}ks-page-guide[loading] .dialog .choices,ks-page-guide[loading] .products{opacity:0;-webkit-transition:none;transition:none}ks-page-guide .dialog .choices,ks-page-guide .products{-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease}ks-page-guide .dialog .navigation .back{display:none}@media screen and (max-width: 1010px){ks-page-guide .dialog .navigation .breadcrumbs{display:none}ks-page-guide .dialog .navigation .back{display:block}ks-page-guide .dialog .choices .choice{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;max-width:100%}ks-page-guide .dialog .choice ks-img3{height:50px;width:80px}ks-page-guide .dialog .choice ks-img3.large{height:80px;width:80px}ks-page-guide .dialog .choices .choice .select{position:relative;top:0;right:0}ks-page-guide .dialog .choices.multiple .choice .select{position:relative;top:2.5px}ks-page-guide .product .condition{padding:2px 0}ks-page-guide .product .condition ks-icon{-webkit-transform:scale(0.9);transform:scale(0.9);margin:0}}@media screen and (min-width: 701px){ks-page-guide .content{padding:0 40px}}';export{l as ks_page_guide}