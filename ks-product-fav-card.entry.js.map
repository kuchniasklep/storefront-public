{"version":3,"names":["productFavCardCss","ProductCard","cart","this","cartLoading","product","id","traitIDs","sku","brandName","name","link","image","imageFull","currentPrice","quantity","currency","categories","breadcrumbs","addToCart","then","favourites","favLoading","removeFromFavourites","location","reload","render","translations","common","get","priceFormat","previousPrice","h","href","class","fill","limit","center","src","webp","width","height","alt","summary","onClick","disabled","unavailable"],"sources":["src/components/listing/product-fav-card.css?tag=ks-product-fav-card","src/components/listing/product-fav-card.tsx"],"sourcesContent":["\nks-product-fav-card {\n    display: flex;\n    align-items: stretch;\n    flex-wrap: nowrap;\n}\n\nks-product-fav-card > a {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n\n    text-decoration: none !important;\n    color: #000 !important;\n}\n\nks-product-fav-card .image {\n    max-height: 180px;\n    max-width: 180px;\n    margin-right: 20px;\n}\n\nks-product-fav-card h3 {\n    font-family: var(--font-emphasis);\n    margin-bottom: 5px;\n    font-size: 20px;\n}\n\nks-product-fav-card p {\n    font-size: 15px;\n}\n\nks-product-fav-card .price {\n    font-size: 18px;\n    font-family: var(--font-emphasis);\n}\n\nks-product-fav-card .price .current {\n    font-weight: 700;\n    color: var(--color-secondary);\n}\n\nks-product-fav-card .price .previous {\n    margin: 0px 10px;\n    color: #909090\n}\n\nks-product-fav-card .buttons {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    padding: 10px 0px;\n    margin-left: 10px;\n}\n\nks-product-fav-card .buttons button {\n    background-color: var(--color-secondary);\n    color: white;\n    border-style: none;\n    width: 50px;\n    height: 100%;\n    position: relative;\n\n    transition: background-color 0.3s ease;\n}\n\nks-product-fav-card .buttons button:hover {\n    background-color: var(--color-secondary-hover);\n}\n\nks-product-fav-card .buttons button:active {\n    background-color: var(--color-secondary-active);\n}\n\nks-product-fav-card .buttons .cart {\n    border-top: solid 1px var(--color-secondary-darker);\n}\n\nks-product-fav-card .buttons .cart span {\n    display: none;\n}\n\nks-product-fav-card[unavailable] .buttons .cart {\n    border-top: none;\n    background-color: var(--color-faded);\n    color: var(--color-faded-text);\n}\n\n\n@media screen and (max-width: 750px) {\n    ks-product-fav-card p {\n        display: none;\n    }\n}\n\n@media screen and (max-width: 550px) {\n    ks-product-fav-card {\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n    }\n\n    ks-product-fav-card > a {\n        flex-direction: column;\n        align-items: center;\n    }\n\n    ks-product-fav-card .image {\n        margin: 0;\n    }\n\n    ks-product-fav-card .buttons {\n        flex-direction: row;\n        margin: 0;\n        width: 100%;\n    }\n\n    ks-product-fav-card .buttons button {\n        height: 40px;\n    }\n\n    ks-product-fav-card .buttons .fav {\n        flex: 1 0 40px;\n        width: 40px;\n        border-radius: 100px;\n        margin-right: 5px;\n    }\n\n    ks-product-fav-card .buttons .cart {\n        width: 100%;\n        border-radius: 10px;\n    }\n\n    ks-product-fav-card .buttons .cart ks-icon {\n        display: none;\n    }\n\n    ks-product-fav-card .buttons .cart span {\n        display: inline;\n    }\n}","import { Component, h, Prop, State } from '@stencil/core';\nimport { addToCart } from '../../global/functions/addToCart';\nimport { removeFromFavourites } from '../../global/functions/favourites';\nimport { ProductShortData } from '../../global/data/product';\nimport { ProductCardData } from '../../global/data/listing';\nimport { common } from '../../global/data/common';\nimport priceFormat from '../../global/functions/price';\n\n@Component({\n  tag: 'ks-product-fav-card',\n  styleUrl: 'product-fav-card.css'\n})\nexport class ProductCard {\n  @Prop({reflect: true}) unavailable: boolean = false;\n  @Prop() linkOnly: boolean = false;\n  @Prop() summary: string;\n  \n  @Prop() product: ProductCardData;\n\n  @State() cartLoading: boolean = false;\n  @State() favLoading: boolean = false;\n  @State() favSuccess: boolean = false;\n\n  cart() {\n    this.cartLoading = true;\n    \n    const product: ProductShortData = {\n      id: this.product.id,\n      traitIDs: \"\",\n      sku: this.product.sku,\n      brandName: this.product.brandName,\n      name: this.product.name,\n      link: this.product.link,\n      image: this.product.image,\n      imageFull: this.product.imageFull,\n      currentPrice: this.product.currentPrice,\n      quantity: 1,\n      currency: this.product.currency,\n      categories: this.product.categories,\n      breadcrumbs: this.product.breadcrumbs\n    };\n\n    addToCart(product, 1)\n      .then(() => this.cartLoading = false);\n  }\n\n  favourites() {\n    if(this.favLoading) return;\n    this.favLoading = true;\n\n    removeFromFavourites(this.product.id).then(() => {\n        location.reload()\n    });\n  }\n\n  render() {\n    const translations = common.get('translations');\n    const currentPrice = priceFormat(this.product.currentPrice);\n    const previousPrice = priceFormat(this.product.previousPrice);\n\n    return[\n        <a href={this.product.link} aria-label={this.product.name}>\n            <div class=\"image\">\n              <ks-img2 fill limit center src={this.product.image} webp={this.product.webp} width={280} height={280} alt={this.product.name} />\n            </div>\n            <div class=\"info\">\n                <h3>{this.product.name}</h3>\n                <div class=\"price\">\n                    <span class=\"current\">{currentPrice}</span>\n                    {this.product.previousPrice ? <s class=\"previous\">{previousPrice}</s> : null}\n                </div>\n                {this.summary ? <p>{this.summary}</p> : null}\n            </div>\n        </a>,\n\n        <div class=\"buttons\">\n            <button class=\"fav\" onClick={()=>this.favourites()}>\n                { this.favLoading ? <ks-loader /> : <ks-icon name=\"x\" /> }\n            </button>\n\n            <button disabled={this.unavailable} class=\"cart\" onClick={()=>this.cart()}>\n                { this.cartLoading ? <ks-loader /> : [\n                  <ks-icon name=\"shopping-bag\" />,\n                  <span>{this.unavailable ? translations.unavailable : translations.addToCart}</span>\n                ]}\n            </button>\n        </div>\n    ];\n  }\n}\n"],"mappings":"gVAAA,MAAMA,EAAoB,q4E,MCYbC,EAAW,M,0CACwB,M,cAClB,M,+DAKI,M,gBACD,M,gBACA,K,CAE/BC,OACEC,KAAKC,YAAc,KAEnB,MAAMC,EAA4B,CAChCC,GAAIH,KAAKE,QAAQC,GACjBC,SAAU,GACVC,IAAKL,KAAKE,QAAQG,IAClBC,UAAWN,KAAKE,QAAQI,UACxBC,KAAMP,KAAKE,QAAQK,KACnBC,KAAMR,KAAKE,QAAQM,KACnBC,MAAOT,KAAKE,QAAQO,MACpBC,UAAWV,KAAKE,QAAQQ,UACxBC,aAAcX,KAAKE,QAAQS,aAC3BC,SAAU,EACVC,SAAUb,KAAKE,QAAQW,SACvBC,WAAYd,KAAKE,QAAQY,WACzBC,YAAaf,KAAKE,QAAQa,aAG5BC,EAAUd,EAAS,GAChBe,MAAK,IAAMjB,KAAKC,YAAc,O,CAGnCiB,aACE,GAAGlB,KAAKmB,WAAY,OACpBnB,KAAKmB,WAAa,KAElBC,EAAqBpB,KAAKE,QAAQC,IAAIc,MAAK,KACvCI,SAASC,QAAQ,G,CAIvBC,SACE,MAAMC,EAAeC,EAAOC,IAAI,gBAChC,MAAMf,EAAegB,EAAY3B,KAAKE,QAAQS,cAC9C,MAAMiB,EAAgBD,EAAY3B,KAAKE,QAAQ0B,eAE/C,MAAM,CACFC,EAAA,KAAGC,KAAM9B,KAAKE,QAAQM,KAAI,aAAcR,KAAKE,QAAQK,MACjDsB,EAAA,OAAKE,MAAM,SACTF,EAAA,WAASG,KAAI,KAACC,MAAK,KAACC,OAAM,KAACC,IAAKnC,KAAKE,QAAQO,MAAO2B,KAAMpC,KAAKE,QAAQkC,KAAMC,MAAO,IAAKC,OAAQ,IAAKC,IAAKvC,KAAKE,QAAQK,QAE1HsB,EAAA,OAAKE,MAAM,QACPF,EAAA,UAAK7B,KAAKE,QAAQK,MAClBsB,EAAA,OAAKE,MAAM,SACPF,EAAA,QAAME,MAAM,WAAWpB,GACtBX,KAAKE,QAAQ0B,cAAgBC,EAAA,KAAGE,MAAM,YAAYH,GAAqB,MAE3E5B,KAAKwC,QAAUX,EAAA,SAAI7B,KAAKwC,SAAe,OAIhDX,EAAA,OAAKE,MAAM,WACPF,EAAA,UAAQE,MAAM,MAAMU,QAAS,IAAIzC,KAAKkB,cAChClB,KAAKmB,WAAaU,EAAA,kBAAgBA,EAAA,WAAStB,KAAK,OAGtDsB,EAAA,UAAQa,SAAU1C,KAAK2C,YAAaZ,MAAM,OAAOU,QAAS,IAAIzC,KAAKD,QAC7DC,KAAKC,YAAc4B,EAAA,kBAAgB,CACnCA,EAAA,WAAStB,KAAK,iBACdsB,EAAA,YAAO7B,KAAK2C,YAAcnB,EAAamB,YAAcnB,EAAaR,c"}