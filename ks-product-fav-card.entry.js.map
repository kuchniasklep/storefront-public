{"version":3,"names":["productFavCardCss","ProductCard","constructor","hostRef","this","unavailable","linkOnly","cartLoading","favLoading","favSuccess","cart","product","id","traitIDs","sku","brandName","name","link","image","imageFull","currentPrice","quantity","currency","categories","breadcrumbs","addToCart","then","favourites","removeFromFavourites","location","reload","render","translations","common","get","priceFormat","button","h","key","href","class","fit","webp","width","height","alt","summary","onClick","disabled"],"sources":["src/components/listing/product-fav-card.css?tag=ks-product-fav-card","src/components/listing/product-fav-card.tsx"],"sourcesContent":["\nks-product-fav-card {\n    display: flex;\n    align-items: stretch;\n    flex-wrap: nowrap;\n}\n\nks-product-fav-card > a {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n\n    text-decoration: none !important;\n    color: #000 !important;\n}\n\nks-product-fav-card .image {\n    height: 100%;\n    width: 100%;\n    max-height: 180px;\n    max-width: 180px;\n\n    margin-right: 10px;\n    padding: 10px;\n    box-sizing: border-box;\n}\n\nks-product-fav-card h3 {\n    font-family: var(--font-emphasis);\n    margin-bottom: 5px;\n    font-size: 20px;\n}\n\nks-product-fav-card p {\n    font-size: 15px;\n}\n\nks-product-fav-card .price {\n    font-size: 18px;\n    font-family: var(--font-emphasis);\n}\n\nks-product-fav-card .price .current {\n    font-weight: 700;\n    color: var(--color-secondary);\n}\n\nks-product-fav-card .price .previous {\n    margin: 0px 10px;\n    color: #909090\n}\n\nks-product-fav-card .buttons {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    margin-left: 10px;\n}\n\nks-product-fav-card .buttons button {\n    background-color: var(--color-secondary);\n    color: white;\n    border-style: none;\n    width: 50px;\n    height: 100%;\n    position: relative;\n\n    transition: background-color 0.3s ease;\n}\n\nks-product-fav-card .buttons button:hover {\n    background-color: var(--color-secondary-hover);\n}\n\nks-product-fav-card .buttons button:active {\n    background-color: var(--color-secondary-active);\n}\n\nks-product-fav-card .buttons .fav {\n    border-radius: 10px 10px 0 0 ;\n}\n\nks-product-fav-card .buttons .cart {\n    border-top: solid 1px var(--color-secondary-darker);\n    border-radius: 0 0 10px 10px;\n}\n\nks-product-fav-card .buttons .cart span {\n    display: none;\n}\n\nks-product-fav-card[unavailable] .buttons .cart {\n    border-top: none;\n    background-color: var(--color-faded);\n    color: var(--color-faded-text);\n}\n\n\n@media screen and (max-width: 750px) {\n    ks-product-fav-card p {\n        display: none;\n    }\n}\n\n@media screen and (max-width: 550px) {\n    ks-product-fav-card {\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n    }\n\n    ks-product-fav-card > a {\n        flex-direction: column;\n        align-items: center;\n    }\n\n    ks-product-fav-card .image {\n        margin: 0;\n    }\n\n    ks-product-fav-card .buttons {\n        flex-direction: row;\n        margin: 0;\n        width: 100%;\n        max-width: 240px;\n        margin-top: 10px;\n    }\n\n    ks-product-fav-card .buttons button {\n        height: 40px;\n    }\n\n    ks-product-fav-card .buttons .fav {\n        flex: 1 0 40px;\n        width: 40px;\n        border-radius: 100px;\n        margin-right: 5px;\n    }\n\n    ks-product-fav-card .buttons .cart {\n        width: 100%;\n        border-radius: 10px;\n    }\n\n    ks-product-fav-card .buttons .cart ks-icon {\n        display: none;\n    }\n\n    ks-product-fav-card .buttons .cart span {\n        display: inline;\n    }\n}","import { Component, h, Prop, State } from '@stencil/core';\nimport { addToCart } from '../../global/functions/addToCart';\nimport { removeFromFavourites } from '../../global/functions/favourites';\nimport { ProductShortData } from '../../global/data/product';\nimport { ProductCardData } from '../../global/data/listing';\nimport { common } from '../../global/data/common';\nimport priceFormat from '../../global/functions/price';\n\n@Component({\n  tag: 'ks-product-fav-card',\n  styleUrl: 'product-fav-card.css'\n})\nexport class ProductCard {\n  @Prop({reflect: true}) unavailable: boolean = false;\n  @Prop() linkOnly: boolean = false;\n  @Prop() summary: string;\n  \n  @Prop() product: ProductCardData;\n\n  @State() cartLoading: boolean = false;\n  @State() favLoading: boolean = false;\n  @State() favSuccess: boolean = false;\n\n  cart() {\n    this.cartLoading = true;\n    \n    const product: ProductShortData = {\n      id: this.product.id,\n      traitIDs: \"\",\n      sku: this.product.sku,\n      brandName: this.product.brandName,\n      name: this.product.name,\n      link: this.product.link,\n      image: this.product.image,\n      imageFull: this.product.imageFull,\n      currentPrice: this.product.currentPrice,\n      quantity: 1,\n      currency: this.product.currency,\n      categories: this.product.categories,\n      breadcrumbs: this.product.breadcrumbs\n    };\n\n    addToCart(product, 1)\n      .then(() => this.cartLoading = false);\n  }\n\n  favourites() {\n    if(this.favLoading) return;\n    this.favLoading = true;\n\n    removeFromFavourites(this.product.id).then(() => {\n        location.reload()\n    });\n  }\n\n  render() {\n    const translations = common.get('translations');\n    const currentPrice = priceFormat(this.product.currentPrice);\n\n    const button = this.unavailable ? translations.unavailable : translations.addToCart;\n\n    return[\n        <a href={this.product.link} aria-label={this.product.name}>\n            <div class=\"image\">\n              <ks-img3 fit=\"contain\" image={this.product.image} webp={this.product.webp} width={280} height={280} alt=\"zdjęcie produktu\" aria-hidden />\n            </div>\n            <div class=\"info\">\n                <h3>{this.product.name}</h3>\n                <div class=\"price\">\n                    <span class=\"current\">{currentPrice}</span>\n                </div>\n                {this.summary ? <p>{this.summary}</p> : null}\n            </div>\n        </a>,\n\n        <div class=\"buttons\">\n            <button aria-label=\"Usuń ze schowka\" class=\"fav\" onClick={()=>this.favourites()}>\n                { this.favLoading ? <ks-loader /> : <ks-icon name=\"x\" aria-hidden /> }\n            </button>\n\n            <button disabled={this.unavailable} class=\"cart\" onClick={()=>this.cart()} aria-label={button}>\n                { this.cartLoading ? <ks-loader /> : [\n                  <ks-icon name=\"shopping-bag\" aria-hidden />,\n                  <span>{button}</span>\n                ]}\n            </button>\n        </div>\n    ];\n  }\n}\n"],"mappings":"qVAAA,MAAMA,EAAoB,skF,MCYbC,EAAW,MAJxB,WAAAC,CAAAC,G,UAKyBC,KAAWC,YAAY,MACtCD,KAAQE,SAAY,MAKnBF,KAAWG,YAAY,MACvBH,KAAUI,WAAY,MACtBJ,KAAUK,WAAY,KAoEhC,CAlEC,IAAAC,GACEN,KAAKG,YAAc,KAEnB,MAAMI,EAA4B,CAChCC,GAAIR,KAAKO,QAAQC,GACjBC,SAAU,GACVC,IAAKV,KAAKO,QAAQG,IAClBC,UAAWX,KAAKO,QAAQI,UACxBC,KAAMZ,KAAKO,QAAQK,KACnBC,KAAMb,KAAKO,QAAQM,KACnBC,MAAOd,KAAKO,QAAQO,MACpBC,UAAWf,KAAKO,QAAQQ,UACxBC,aAAchB,KAAKO,QAAQS,aAC3BC,SAAU,EACVC,SAAUlB,KAAKO,QAAQW,SACvBC,WAAYnB,KAAKO,QAAQY,WACzBC,YAAapB,KAAKO,QAAQa,aAG5BC,EAAUd,EAAS,GAChBe,MAAK,IAAMtB,KAAKG,YAAc,O,CAGnC,UAAAoB,GACE,GAAGvB,KAAKI,WAAY,OACpBJ,KAAKI,WAAa,KAElBoB,EAAqBxB,KAAKO,QAAQC,IAAIc,MAAK,KACvCG,SAASC,QAAQ,G,CAIvB,MAAAC,GACE,MAAMC,EAAeC,EAAOC,IAAI,gBAChC,MAAMd,EAAee,EAAY/B,KAAKO,QAAQS,cAE9C,MAAMgB,EAAShC,KAAKC,YAAc2B,EAAa3B,YAAc2B,EAAaP,UAE1E,MAAM,CACFY,EAAA,KAAAC,IAAA,2CAAGC,KAAMnC,KAAKO,QAAQM,KAAI,aAAcb,KAAKO,QAAQK,MACjDqB,EAAK,OAAAC,IAAA,2CAAAE,MAAM,SACTH,EAAA,WAAAC,IAAA,2CAASG,IAAI,UAAUvB,MAAOd,KAAKO,QAAQO,MAAOwB,KAAMtC,KAAKO,QAAQ+B,KAAMC,MAAO,IAAKC,OAAQ,IAAKC,IAAI,mBAAkB,sBAE5HR,EAAK,OAAAC,IAAA,2CAAAE,MAAM,QACPH,EAAA,MAAAC,IAAA,4CAAKlC,KAAKO,QAAQK,MAClBqB,EAAK,OAAAC,IAAA,2CAAAE,MAAM,SACPH,EAAA,QAAAC,IAAA,2CAAME,MAAM,WAAWpB,IAE1BhB,KAAK0C,QAAUT,EAAI,SAAAjC,KAAK0C,SAAe,OAIhDT,EAAK,OAAAC,IAAA,2CAAAE,MAAM,WACPH,EAAA,UAAAC,IAAA,wDAAmB,kBAAkBE,MAAM,MAAMO,QAAS,IAAI3C,KAAKuB,cAC7DvB,KAAKI,WAAa6B,EAAa,kBAAGA,EAAS,WAAArB,KAAK,IAAG,sBAGzDqB,EAAA,UAAAC,IAAA,2CAAQU,SAAU5C,KAAKC,YAAamC,MAAM,OAAOO,QAAS,IAAI3C,KAAKM,OAAoB,aAAA0B,GACjFhC,KAAKG,YAAc8B,EAAa,kBAAG,CACnCA,EAAS,WAAArB,KAAK,eAA6B,qBAC3CqB,EAAA,YAAOD,M","ignoreList":[]}