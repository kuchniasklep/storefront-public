{"version":3,"file":"index-BljFg8DE.system.js","sources":["node_modules/@stencil/store/dist/index.js"],"sourcesContent":["import { getRenderingRef, forceUpdate } from '@stencil/core';\n\nconst appendToMap = (map, propName, value) => {\n    const items = map.get(propName);\n    if (!items) {\n        map.set(propName, [value]);\n    }\n    else if (!items.includes(value)) {\n        items.push(value);\n    }\n};\nconst debounce = (fn, ms) => {\n    let timeoutId;\n    return (...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(() => {\n            timeoutId = 0;\n            fn(...args);\n        }, ms);\n    };\n};\n\n/**\n * Check if a possible element isConnected.\n * The property might not be there, so we check for it.\n *\n * We want it to return true if isConnected is not a property,\n * otherwise we would remove these elements and would not update.\n *\n * Better leak in Edge than to be useless.\n */\nconst isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;\nconst cleanupElements = debounce((map) => {\n    for (let key of map.keys()) {\n        map.set(key, map.get(key).filter(isConnected));\n    }\n}, 2_000);\nconst stencilSubscription = () => {\n    if (typeof getRenderingRef !== 'function') {\n        // If we are not in a stencil project, we do nothing.\n        // This function is not really exported by @stencil/core.\n        return {};\n    }\n    const elmsToUpdate = new Map();\n    return {\n        dispose: () => elmsToUpdate.clear(),\n        get: (propName) => {\n            const elm = getRenderingRef();\n            if (elm) {\n                appendToMap(elmsToUpdate, propName, elm);\n            }\n        },\n        set: (propName) => {\n            const elements = elmsToUpdate.get(propName);\n            if (elements) {\n                elmsToUpdate.set(propName, elements.filter(forceUpdate));\n            }\n            cleanupElements(elmsToUpdate);\n        },\n        reset: () => {\n            elmsToUpdate.forEach((elms) => elms.forEach(forceUpdate));\n            cleanupElements(elmsToUpdate);\n        },\n    };\n};\n\nconst unwrap = (val) => (typeof val === 'function' ? val() : val);\nconst createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {\n    const unwrappedState = unwrap(defaultState);\n    let states = new Map(Object.entries(unwrappedState ?? {}));\n    const handlers = {\n        dispose: [],\n        get: [],\n        set: [],\n        reset: [],\n    };\n    const reset = () => {\n        // When resetting the state, the default state may be a function - unwrap it to invoke it.\n        // otherwise, the state won't be properly reset\n        states = new Map(Object.entries(unwrap(defaultState) ?? {}));\n        handlers.reset.forEach((cb) => cb());\n    };\n    const dispose = () => {\n        // Call first dispose as resetting the state would\n        // cause less updates ;)\n        handlers.dispose.forEach((cb) => cb());\n        reset();\n    };\n    const get = (propName) => {\n        handlers.get.forEach((cb) => cb(propName));\n        return states.get(propName);\n    };\n    const set = (propName, value) => {\n        const oldValue = states.get(propName);\n        if (shouldUpdate(value, oldValue, propName)) {\n            states.set(propName, value);\n            handlers.set.forEach((cb) => cb(propName, value, oldValue));\n        }\n    };\n    const state = (typeof Proxy === 'undefined'\n        ? {}\n        : new Proxy(unwrappedState, {\n            get(_, propName) {\n                return get(propName);\n            },\n            ownKeys(_) {\n                return Array.from(states.keys());\n            },\n            getOwnPropertyDescriptor() {\n                return {\n                    enumerable: true,\n                    configurable: true,\n                };\n            },\n            has(_, propName) {\n                return states.has(propName);\n            },\n            set(_, propName, value) {\n                set(propName, value);\n                return true;\n            },\n        }));\n    const on = (eventName, callback) => {\n        handlers[eventName].push(callback);\n        return () => {\n            removeFromArray(handlers[eventName], callback);\n        };\n    };\n    const onChange = (propName, cb) => {\n        const unSet = on('set', (key, newValue) => {\n            if (key === propName) {\n                cb(newValue);\n            }\n        });\n        // We need to unwrap the defaultState because it might be a function.\n        // Otherwise we might not be sending the right reset value.\n        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));\n        return () => {\n            unSet();\n            unReset();\n        };\n    };\n    const use = (...subscriptions) => {\n        const unsubs = subscriptions.reduce((unsubs, subscription) => {\n            if (subscription.set) {\n                unsubs.push(on('set', subscription.set));\n            }\n            if (subscription.get) {\n                unsubs.push(on('get', subscription.get));\n            }\n            if (subscription.reset) {\n                unsubs.push(on('reset', subscription.reset));\n            }\n            if (subscription.dispose) {\n                unsubs.push(on('dispose', subscription.dispose));\n            }\n            return unsubs;\n        }, []);\n        return () => unsubs.forEach((unsub) => unsub());\n    };\n    const forceUpdate = (key) => {\n        const oldValue = states.get(key);\n        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));\n    };\n    return {\n        state,\n        get,\n        set,\n        on,\n        onChange,\n        use,\n        dispose,\n        reset,\n        forceUpdate,\n    };\n};\nconst removeFromArray = (array, item) => {\n    const index = array.indexOf(item);\n    if (index >= 0) {\n        array[index] = array[array.length - 1];\n        array.length--;\n    }\n};\n\nconst createStore = (defaultState, shouldUpdate) => {\n    const map = createObservableMap(defaultState, shouldUpdate);\n    map.use(stencilSubscription());\n    return map;\n};\n\nexport { createObservableMap, createStore };\n"],"names":[],"mappings":";;;;;;;;;;YAEA,MAAM,WAAW,GAAG,CAAC,GAAG,EAAE,QAAQ,EAAE,KAAK,KAAK;YAC9C,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC;YACnC,IAAI,IAAI,CAAC,KAAK,EAAE;YAChB,QAAQ,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC;YAClC;YACA,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YACrC,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;YACzB;YACA,CAAC;YACD,MAAM,QAAQ,GAAG,CAAC,EAAE,EAAE,EAAE,KAAK;YAC7B,IAAI,IAAI,SAAS;YACjB,IAAI,OAAO,CAAC,GAAG,IAAI,KAAK;YACxB,QAAQ,IAAI,SAAS,EAAE;YACvB,YAAY,YAAY,CAAC,SAAS,CAAC;YACnC;YACA,QAAQ,SAAS,GAAG,UAAU,CAAC,MAAM;YACrC,YAAY,SAAS,GAAG,CAAC;YACzB,YAAY,EAAE,CAAC,GAAG,IAAI,CAAC;YACvB,SAAS,EAAE,EAAE,CAAC;YACd,KAAK;YACL,CAAC;;YAED;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA,MAAM,WAAW,GAAG,CAAC,YAAY,KAAK,EAAE,aAAa,IAAI,YAAY,CAAC,IAAI,YAAY,CAAC,WAAW;YAClG,MAAM,eAAe,GAAG,QAAQ,CAAC,CAAC,GAAG,KAAK;YAC1C,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,EAAE;YAChC,QAAQ,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YACtD;YACA,CAAC,EAAE,KAAK,CAAC;YACT,MAAM,mBAAmB,GAAG,MAAM;YAClC,IAAI,IAAI,OAAO,eAAe,KAAK,UAAU,EAAE;YAC/C;YACA;YACA,QAAQ,OAAO,EAAE;YACjB;YACA,IAAI,MAAM,YAAY,GAAG,IAAI,GAAG,EAAE;YAClC,IAAI,OAAO;YACX,QAAQ,OAAO,EAAE,MAAM,YAAY,CAAC,KAAK,EAAE;YAC3C,QAAQ,GAAG,EAAE,CAAC,QAAQ,KAAK;YAC3B,YAAY,MAAM,GAAG,GAAG,eAAe,EAAE;YACzC,YAAY,IAAI,GAAG,EAAE;YACrB,gBAAgB,WAAW,CAAC,YAAY,EAAE,QAAQ,EAAE,GAAG,CAAC;YACxD;YACA,SAAS;YACT,QAAQ,GAAG,EAAE,CAAC,QAAQ,KAAK;YAC3B,YAAY,MAAM,QAAQ,GAAG,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC;YACvD,YAAY,IAAI,QAAQ,EAAE;YAC1B,gBAAgB,YAAY,CAAC,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YACxE;YACA,YAAY,eAAe,CAAC,YAAY,CAAC;YACzC,SAAS;YACT,QAAQ,KAAK,EAAE,MAAM;YACrB,YAAY,YAAY,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YACrE,YAAY,eAAe,CAAC,YAAY,CAAC;YACzC,SAAS;YACT,KAAK;YACL,CAAC;;YAED,MAAM,MAAM,GAAG,CAAC,GAAG,MAAM,OAAO,GAAG,KAAK,UAAU,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;YACjE,MAAM,mBAAmB,GAAG,CAAC,YAAY,EAAE,YAAY,GAAG,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK;YAChF,IAAI,MAAM,cAAc,GAAG,MAAM,CAAC,YAAY,CAAC;YAC/C,IAAI,IAAI,MAAM,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC;YAC9D,IAAI,MAAM,QAAQ,GAAG;YACrB,QAAQ,OAAO,EAAE,EAAE;YACnB,QAAQ,GAAG,EAAE,EAAE;YACf,QAAQ,GAAG,EAAE,EAAE;YACf,QAAQ,KAAK,EAAE,EAAE;YACjB,KAAK;YACL,IAAI,MAAM,KAAK,GAAG,MAAM;YACxB;YACA;YACA,QAAQ,MAAM,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC;YACpE,QAAQ,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;YAC5C,KAAK;YACL,IAAI,MAAM,OAAO,GAAG,MAAM;YAC1B;YACA;YACA,QAAQ,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;YAC9C,QAAQ,KAAK,EAAE;YACf,KAAK;YACL,IAAI,MAAM,GAAG,GAAG,CAAC,QAAQ,KAAK;YAC9B,QAAQ,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,CAAC;YAClD,QAAQ,OAAO,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC;YACnC,KAAK;YACL,IAAI,MAAM,GAAG,GAAG,CAAC,QAAQ,EAAE,KAAK,KAAK;YACrC,QAAQ,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC;YAC7C,QAAQ,IAAI,YAAY,CAAC,KAAK,EAAE,QAAQ,EAAE,QAAQ,CAAC,EAAE;YACrD,YAAY,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC;YACvC,YAAY,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;YACvE;YACA,KAAK;YACL,IAAI,MAAM,KAAK,IAAI,OAAO,KAAK,KAAK;YACpC,UAAU;YACV,UAAU,IAAI,KAAK,CAAC,cAAc,EAAE;YACpC,YAAY,GAAG,CAAC,CAAC,EAAE,QAAQ,EAAE;YAC7B,gBAAgB,OAAO,GAAG,CAAC,QAAQ,CAAC;YACpC,aAAa;YACb,YAAY,OAAO,CAAC,CAAC,EAAE;YACvB,gBAAgB,OAAO,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YAChD,aAAa;YACb,YAAY,wBAAwB,GAAG;YACvC,gBAAgB,OAAO;YACvB,oBAAoB,UAAU,EAAE,IAAI;YACpC,oBAAoB,YAAY,EAAE,IAAI;YACtC,iBAAiB;YACjB,aAAa;YACb,YAAY,GAAG,CAAC,CAAC,EAAE,QAAQ,EAAE;YAC7B,gBAAgB,OAAO,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC;YAC3C,aAAa;YACb,YAAY,GAAG,CAAC,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE;YACpC,gBAAgB,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC;YACpC,gBAAgB,OAAO,IAAI;YAC3B,aAAa;YACb,SAAS,CAAC,CAAC;YACX,IAAI,MAAM,EAAE,GAAG,CAAC,SAAS,EAAE,QAAQ,KAAK;YACxC,QAAQ,QAAQ,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC1C,QAAQ,OAAO,MAAM;YACrB,YAAY,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,CAAC;YAC1D,SAAS;YACT,KAAK;YACL,IAAI,MAAM,QAAQ,GAAG,CAAC,QAAQ,EAAE,EAAE,KAAK;YACvC,QAAQ,MAAM,KAAK,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC,GAAG,EAAE,QAAQ,KAAK;YACnD,YAAY,IAAI,GAAG,KAAK,QAAQ,EAAE;YAClC,gBAAgB,EAAE,CAAC,QAAQ,CAAC;YAC5B;YACA,SAAS,CAAC;YACV;YACA;YACA,QAAQ,MAAM,OAAO,GAAG,EAAE,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7E,QAAQ,OAAO,MAAM;YACrB,YAAY,KAAK,EAAE;YACnB,YAAY,OAAO,EAAE;YACrB,SAAS;YACT,KAAK;YACL,IAAI,MAAM,GAAG,GAAG,CAAC,GAAG,aAAa,KAAK;YACtC,QAAQ,MAAM,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,YAAY,KAAK;YACtE,YAAY,IAAI,YAAY,CAAC,GAAG,EAAE;YAClC,gBAAgB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC;YACxD;YACA,YAAY,IAAI,YAAY,CAAC,GAAG,EAAE;YAClC,gBAAgB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC;YACxD;YACA,YAAY,IAAI,YAAY,CAAC,KAAK,EAAE;YACpC,gBAAgB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY,CAAC,KAAK,CAAC,CAAC;YAC5D;YACA,YAAY,IAAI,YAAY,CAAC,OAAO,EAAE;YACtC,gBAAgB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,YAAY,CAAC,OAAO,CAAC,CAAC;YAChE;YACA,YAAY,OAAO,MAAM;YACzB,SAAS,EAAE,EAAE,CAAC;YACd,QAAQ,OAAO,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK,KAAK,EAAE,CAAC;YACvD,KAAK;YACL,IAAI,MAAM,WAAW,GAAG,CAAC,GAAG,KAAK;YACjC,QAAQ,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC;YACxC,QAAQ,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;YACjE,KAAK;YACL,IAAI,OAAO;YACX,QAAQ,KAAK;YACb,QAAQ,GAAG;YACX,QAAQ,GAAG;YACX,QAAQ,EAAE;YACV,QAAQ,QAAQ;YAChB,QAAQ,GAAG;YACX,QAAQ,OAAO;YACf,QAAQ,KAAK;YACb,QAAQ,WAAW;YACnB,KAAK;YACL,CAAC;YACD,MAAM,eAAe,GAAG,CAAC,KAAK,EAAE,IAAI,KAAK;YACzC,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC;YACrC,IAAI,IAAI,KAAK,IAAI,CAAC,EAAE;YACpB,QAAQ,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;YAC9C,QAAQ,KAAK,CAAC,MAAM,EAAE;YACtB;YACA,CAAC;;AAEI,kBAAC,WAAW,gBAAG,CAAC,YAAY,EAAE,YAAY,KAAK;YACpD,IAAI,MAAM,GAAG,GAAG,mBAAmB,CAAC,YAAY,EAAE,YAAY,CAAC;YAC/D,IAAI,GAAG,CAAC,GAAG,CAAC,mBAAmB,EAAE,CAAC;YAClC,IAAI,OAAO,GAAG;YACd;;;;;;;;","x_google_ignoreList":[0]}