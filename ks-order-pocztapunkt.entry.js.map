{"version":3,"names":["OrderPocztapunkt","constructor","hostRef","this","search","api","button","description","address","code","valid","componentDidLoad","root","style","display","Show","event","preventDefault","PPWidgetApp","toggleMap","callback","c","Callback","payOnPickup","value","punktodbioru","replace","formData","FormData","append","headers","Headers","fetch","method","body","credentials","Validate","IsValid","render","h","key","innerHTML","class","animation","onClick","e","type","name"],"sources":["src/components/order/confirmation/OrderPocztaPunkt.tsx"],"sourcesContent":["import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\ndeclare var PPWidgetApp: any;\n\n@Component({\n  tag: 'ks-order-pocztapunkt',\n})\nexport class OrderPocztapunkt {\n\n    @Prop({mutable: true}) search: string = \"WrocÅ‚aw, Polska\";\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n\n    @Element() root: HTMLElement;\n\n    componentDidLoad() {\n        this.root.style.display = \"block\";\n    }\n\n    @State() description: string = \"\";\n    @State() address: string = \"\";\n    @State() code: string = \"\";\n\n    async Show(event: Event) {\n        event.preventDefault();\n\n        PPWidgetApp.toggleMap({\n            callback: (c)=>this.Callback(c),\n            payOnPickup: false,\n            address: this.search\n        });\n    }\n\n\n    Callback(callback: any) {\n        var value = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        var punktodbioru = callback['pni'];\n\n        this.address = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        this.search = callback['city'];\n        this.code = callback['pni'];\n\n        this.description = callback['description'];\n        this.description = this.description.replace(/#/gi,'<br />');\n\n        let formData = new FormData();\n            formData.append(\"value\", value);\n            formData.append(\"punktodbioru\", punktodbioru);\n\n        var headers = new Headers();\n            headers.append('pragma', 'no-cache');\n            headers.append('cache-control', 'no-cache');\n\n        fetch(this.api, {\n            method: 'POST',\n            headers: headers,\n            body: formData,\n            credentials: \"same-origin\"\n        });\n\n        this.Validate();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.address != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    render() {\n        return[\n            <style innerHTML=\"\n                #overlay {\n                    position: fixed !important;\n                    display: flex !important;\n                    width: 100%;\n                    height: 100vh;\n                    justify-content: center;\n                    align-items: center;\n\n                    top: 0 !important;\n                }\n\n                @keyframes ks-fade {\n                    from {opacity: 1.0;}\n                    to {opacity: 0.4;}\n                }\n            \"></style>,\n\n            <p innerHTML={this.address}></p>,\n\n            <button class={\"uk-button uk-width-1-1 uk-margin-top \" + (this.valid ? \"uk-button-secondary\" : \"uk-button-danger\")}\n                    style={{animation: this.valid ? \"\" : \"ks-fade 0.5s cubic-bezier(.86,.01,.67,1) infinite alternate\"}}\n                    onClick={(e)=>this.Show(e)}>{this.button}</button>,\n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.address}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n            <input type=\"hidden\" name=\"OpisPunktuOdbioru\" value={this.description}/>\n        ]\n    }\n}"],"mappings":"4DAOaA,EAAgB,MAH7B,WAAAC,CAAAC,G,UAK2BC,KAAMC,OAAW,kBAChCD,KAAGE,IAAW,GACdF,KAAMG,OAAW,GAQhBH,KAAWI,YAAW,GACtBJ,KAAOK,QAAW,GAClBL,KAAIM,KAAW,GA0CfN,KAAKO,MAAY,IA0C7B,CA1FG,gBAAAC,GACIR,KAAKS,KAAKC,MAAMC,QAAU,O,CAO9B,UAAMC,CAAKC,GACPA,EAAMC,iBAENC,YAAYC,UAAU,CAClBC,SAAWC,GAAIlB,KAAKmB,SAASD,GAC7BE,YAAa,MACbf,QAASL,KAAKC,Q,CAKtB,QAAAkB,CAASF,GACL,IAAII,EAAQJ,EAAS,QAAU,MAAQA,EAAS,QAAU,MAAQA,EAAS,UAC3E,IAAIK,EAAeL,EAAS,OAE5BjB,KAAKK,QAAUY,EAAS,QAAU,MAAQA,EAAS,QAAU,MAAQA,EAAS,UAC9EjB,KAAKC,OAASgB,EAAS,QACvBjB,KAAKM,KAAOW,EAAS,OAErBjB,KAAKI,YAAca,EAAS,eAC5BjB,KAAKI,YAAcJ,KAAKI,YAAYmB,QAAQ,MAAM,UAElD,IAAIC,EAAW,IAAIC,SACfD,EAASE,OAAO,QAASL,GACzBG,EAASE,OAAO,eAAgBJ,GAEpC,IAAIK,EAAU,IAAIC,QACdD,EAAQD,OAAO,SAAU,YACzBC,EAAQD,OAAO,gBAAiB,YAEpCG,MAAM7B,KAAKE,IAAK,CACZ4B,OAAQ,OACRH,QAASA,EACTI,KAAMP,EACNQ,YAAa,gBAGjBhC,KAAKiC,U,CAMT,cAAMA,GACFjC,KAAKO,MAAQP,KAAKK,SAAW,E,CAIjC,aAAM6B,GACF,OAAOlC,KAAKO,K,CAGhB,MAAA4B,GACI,MAAM,CACFC,EAAO,SAAAC,IAAA,2CAAAC,UAAU,ufAkBjBF,EAAA,KAAAC,IAAA,2CAAGC,UAAWtC,KAAKK,UAEnB+B,EAAQ,UAAAC,IAAA,2CAAAE,MAAO,yCAA2CvC,KAAKO,MAAQ,sBAAwB,oBACvFG,MAAO,CAAC8B,UAAWxC,KAAKO,MAAQ,GAAK,+DACrCkC,QAAUC,GAAI1C,KAAKY,KAAK8B,IAAK1C,KAAKG,QAC1CiC,EAAA,SAAAC,IAAA,2CAAOM,KAAK,SAASC,KAAK,kBAAkBvB,MAAOrB,KAAKK,UACxD+B,EAAA,SAAAC,IAAA,2CAAOM,KAAK,SAASC,KAAK,0BAA0BvB,MAAOrB,KAAKM,OAChE8B,EAAA,SAAAC,IAAA,2CAAOM,KAAK,SAASC,KAAK,oBAAoBvB,MAAOrB,KAAKI,c","ignoreList":[]}