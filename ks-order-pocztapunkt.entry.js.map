{"version":3,"names":["OrderPocztapunkt","componentDidLoad","this","root","style","display","async","event","preventDefault","PPWidgetApp","toggleMap","callback","c","Callback","payOnPickup","address","search","value","punktodbioru","code","description","replace","formData","FormData","append","headers","Headers","fetch","api","method","body","credentials","Validate","valid","render","h","innerHTML","class","animation","onClick","e","Show","button","type","name"],"sources":["src/components/order/confirmation/OrderPocztaPunkt.tsx"],"sourcesContent":["import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\ndeclare var PPWidgetApp: any;\n\n@Component({\n  tag: 'ks-order-pocztapunkt',\n})\nexport class OrderPocztapunkt {\n\n    @Prop({mutable: true}) search: string = \"WrocÅ‚aw, Polska\";\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n\n    @Element() root: HTMLElement;\n\n    componentDidLoad() {\n        this.root.style.display = \"block\";\n    }\n\n    @State() description: string = \"\";\n    @State() address: string = \"\";\n    @State() code: string = \"\";\n\n    async Show(event: Event) {\n        event.preventDefault();\n\n        PPWidgetApp.toggleMap({\n            callback: (c)=>this.Callback(c),\n            payOnPickup: false,\n            address: this.search\n        });\n    }\n\n\n    Callback(callback: any) {\n        var value = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        var punktodbioru = callback['pni'];\n\n        this.address = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        this.search = callback['city'];\n        this.code = callback['pni'];\n\n        this.description = callback['description'];\n        this.description = this.description.replace(/#/gi,'<br />');\n\n        let formData = new FormData();\n            formData.append(\"value\", value);\n            formData.append(\"punktodbioru\", punktodbioru);\n\n        var headers = new Headers();\n            headers.append('pragma', 'no-cache');\n            headers.append('cache-control', 'no-cache');\n\n        fetch(this.api, {\n            method: 'POST',\n            headers: headers,\n            body: formData,\n            credentials: \"same-origin\"\n        });\n\n        this.Validate();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.address != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    render() {\n        return[\n            <style innerHTML=\"\n                #overlay {\n                    position: fixed !important;\n                    display: flex !important;\n                    width: 100%;\n                    height: 100vh;\n                    justify-content: center;\n                    align-items: center;\n\n                    top: 0 !important;\n                }\n\n                @keyframes ks-fade {\n                    from {opacity: 1.0;}\n                    to {opacity: 0.4;}\n                }\n            \"></style>,\n\n            <p innerHTML={this.address}></p>,\n\n            <button class={\"uk-button uk-width-1-1 uk-margin-top \" + (this.valid ? \"uk-button-secondary\" : \"uk-button-danger\")}\n                    style={{animation: this.valid ? \"\" : \"ks-fade 0.5s cubic-bezier(.86,.01,.67,1) infinite alternate\"}}\n                    onClick={(e)=>this.Show(e)}>{this.button}</button>,\n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.address}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n            <input type=\"hidden\" name=\"OpisPunktuOdbioru\" value={this.description}/>\n        ]\n    }\n}"],"mappings":"4DAOaA,EAAgB,M,qCAEe,kB,SAClB,G,YACG,G,iBAQM,G,aACJ,G,UACH,G,WA0CE,I,CAhD1BC,mBACIC,KAAKC,KAAKC,MAAMC,QAAU,O,CAO9BC,WAAWC,GACPA,EAAMC,iBAENC,YAAYC,UAAU,CAClBC,SAAWC,GAAIV,KAAKW,SAASD,GAC7BE,YAAa,MACbC,QAASb,KAAKc,Q,CAKtBH,SAASF,GACL,IAAIM,EAAQN,EAAS,QAAU,MAAQA,EAAS,QAAU,MAAQA,EAAS,UAC3E,IAAIO,EAAeP,EAAS,OAE5BT,KAAKa,QAAUJ,EAAS,QAAU,MAAQA,EAAS,QAAU,MAAQA,EAAS,UAC9ET,KAAKc,OAASL,EAAS,QACvBT,KAAKiB,KAAOR,EAAS,OAErBT,KAAKkB,YAAcT,EAAS,eAC5BT,KAAKkB,YAAclB,KAAKkB,YAAYC,QAAQ,MAAM,UAElD,IAAIC,EAAW,IAAIC,SACfD,EAASE,OAAO,QAASP,GACzBK,EAASE,OAAO,eAAgBN,GAEpC,IAAIO,EAAU,IAAIC,QACdD,EAAQD,OAAO,SAAU,YACzBC,EAAQD,OAAO,gBAAiB,YAEpCG,MAAMzB,KAAK0B,IAAK,CACZC,OAAQ,OACRJ,QAASA,EACTK,KAAMR,EACNS,YAAa,gBAGjB7B,KAAK8B,U,CAMT1B,iBACIJ,KAAK+B,MAAQ/B,KAAKa,SAAW,E,CAIjCT,gBACI,OAAOJ,KAAK+B,K,CAGhBC,SACI,MAAM,CACFC,EAAA,SAAOC,UAAU,ufAkBjBD,EAAA,KAAGC,UAAWlC,KAAKa,UAEnBoB,EAAA,UAAQE,MAAO,yCAA2CnC,KAAK+B,MAAQ,sBAAwB,oBACvF7B,MAAO,CAACkC,UAAWpC,KAAK+B,MAAQ,GAAK,+DACrCM,QAAUC,GAAItC,KAAKuC,KAAKD,IAAKtC,KAAKwC,QAC1CP,EAAA,SAAOQ,KAAK,SAASC,KAAK,kBAAkB3B,MAAOf,KAAKa,UACxDoB,EAAA,SAAOQ,KAAK,SAASC,KAAK,0BAA0B3B,MAAOf,KAAKiB,OAChEgB,EAAA,SAAOQ,KAAK,SAASC,KAAK,oBAAoB3B,MAAOf,KAAKkB,c"}