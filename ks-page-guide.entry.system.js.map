{"version":3,"file":"ks-page-guide.entry.system.js","sources":["src/global/data/guide.ts","src/components/pages/guide/guide.css?tag=ks-page-guide","src/components/pages/guide/guide.tsx"],"sourcesContent":["import { createStore } from \"@stencil/store\";\nimport { ProductCardData } from \"./listing\";\n\nexport const guide = createStore({} as GuideData);\n\nexport interface GuideData {\n    dialog?: DialogData[];\n    api: string;\n    products?: GuideProductData[];\n    heading: string;\n    description: string;\n    bottom_description: string;\n}\n\nexport interface DialogData {\n    id: string;\n    name: string;\n    heading: string;\n    choices: DialogChoiceData[];\n    multiple: boolean;\n    nopreference: boolean;\n}\n\nexport interface DialogChoiceData {\n    id: string;\n    name: string;\n    description: string;\n    image: string;\n}\n\nexport interface GuideProductData extends ProductCardData {\n    conditions: GuideProductCategory[];\n}\n\nexport interface GuideProductCategory {\n    category: string;\n    items: string[];\n}\n\n","ks-page-guide { \n    display: block;\n    background-color: #f2f2f2;\n}\n\nks-page-guide .text { \n    max-width: 1000px;\n    padding: 20px;\n    margin: auto;\n}\n\nks-page-guide .dialog { \n    max-width: 1000px;\n    width: 100%;\n    padding: 20px;\n    margin: auto;\n    box-sizing: border-box;\n\n    background-color: #ffffff;\n    border: 1px solid #e9e9e9;\n    border-radius: 10px;\n\n    overflow: hidden;\n}\n\nks-page-guide .dialog .buttons {\n    display: flex;\n    justify-content: flex-end;\n    gap: 10px;\n    margin-top: 10px;\n}\n\nks-page-guide .dialog .choices {\n    display: flex;\n    gap: 10px;\n    flex-wrap: wrap;\n}\n\nks-page-guide .dialog .choice {\n    width: 100%;\n    max-width: 215px;\n    background-color: #f2f2f2;\n    border-radius: 10px;\n    overflow: hidden;\n    position: relative;\n    padding: 8px;\n    cursor: pointer;\n}\n\nks-page-guide .dialog .choice ks-img3 {\n    height: 140px;\n    border-radius: 10px;\n    overflow: hidden;\n}\n\nks-page-guide .dialog .choice .description {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n\nks-page-guide .dialog .choice h3 {\n    font-size: 17px;\n    padding: 10px 10px 6px 10px;\n    margin: 0;\n}\n\nks-page-guide .dialog .choice p {\n    padding: 0px 10px 10px 10px;\n    margin: 0;\n    font-size: 14px;\n}\n\nks-page-guide .dialog .choice .select {\n    position: absolute;\n    top: 4px;\n    right: 4px;\n    width: 35px;\n    height: 35px;\n    background-color: #f2f2f2;\n    border-radius: 35px 0 35px 35px;\n}\n\nks-page-guide .dialog .choice .select::before {\n    content: \"\";\n    display: block;\n    width: 25px;\n    height: 25px;\n\n    position: absolute;\n    right: 5px;\n    top: 5px;\n\n    border-radius: 25px;\n    border: 1px solid #818181;\n    box-sizing: border-box;\n}\n\nks-page-guide .dialog .choice.active .select::after {\n    content: \"\";\n    display: block;\n    width: 17px;\n    height: 17px;\n    position: absolute;\n    \n    right: 9px;\n    top: 9px;\n    border-radius: 17px;\n    background-color: #212121;\n}\n\nks-page-guide .dialog .choices.multiple .choice .select {\n    border-radius: 0 0 0 8px;\n    top: 8px;\n    right: 8px;\n    width: 30px;\n    height: 30px;\n}\n\nks-page-guide .dialog .choices.multiple .choice .select::before {\n    right: 0px;\n    top: 0px;\n    border-radius: 5px;\n}\n\nks-page-guide .dialog .choices.multiple .select::after {\n    right: 4px;\n    top: 4px;\n    border-radius: 3px;\n}\n\nks-page-guide .dialog .navigation {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n}\n\nks-page-guide .dialog .navigation .breadcrumbs {\n    display: flex;\n    gap: 5px;\n}\n\nks-page-guide .dialog .navigation .breadcrumbs > * {\n    background-color: #dddddd;\n    padding: 5px 10px;\n    border-radius: 7px;\n    cursor: pointer;\n}\n\nks-page-guide .dialog .navigation .back {\n    background-color: #dddddd;\n    padding: 5px 10px;\n    border-radius: 7px;\n    cursor: pointer;\n}\n\nks-page-guide .products {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    gap: 10px;\n    \n    width: 100%;\n    margin: 20px auto 0 auto;\n    padding: 0 10px;\n    box-sizing: border-box;\n}\n\nks-page-guide .products .product {\n    position: relative;\n    max-width: 300px;\n    flex: 1 1 260px;\n}\n\nks-page-guide .products .product ks-product-card {\n    width: 100%;\n    margin-bottom: 10px;\n}\n\nks-page-guide .products .product .condition {\n    padding: 5px 0;\n    font-size: 14px;\n}\n\nks-page-guide .products .product .condition ks-icon {\n    margin-right: 5px;\n}\n\nks-page-guide .products .product .best {\n    position: absolute;\n    z-index: 1;\n    top: 10px;\n    left: -5px;\n    background-color: #151515;\n    color: #ffffff;\n    padding: 5px 15px;\n    border-radius: 5px;\n}\n\nks-page-guide .summary > div {\n    margin: 0 0 10px 0;\n}\n\nks-page-guide .summary > div > div {\n    display: inline-block;\n    background-color: #dddddd;\n    padding: 3px 7px;\n    border-radius: 5px;\n    margin: 2px;\n}\n\nks-page-guide .summary ks-button {\n    margin: 20px -20px -20px -20px;\n}\n\n\nks-page-guide .dialog .choice,\nks-page-guide .dialog .navigation .breadcrumbs > * {\n    transition: opacity 0.3s ease;\n    opacity: 1;\n}\n\nks-page-guide .dialog .navigation .breadcrumbs > *:hover {\n    opacity: 0.8;\n}\n\nks-page-guide .dialog .choice:hover {\n    opacity: 0.95;\n}\n\nks-page-guide .dialog .choice:hover,\nks-page-guide .dialog .navigation .breadcrumbs > *:active {\n    opacity: 0.7;\n}\n\nks-page-guide[loading] .dialog .choices,\nks-page-guide[loading] .products {\n    opacity: 0;\n    transition: none;\n}\n\nks-page-guide .dialog .choices,\nks-page-guide .products {\n    transition: opacity 0.3s ease;\n}\n\nks-page-guide .dialog .navigation .back {\n    display: none;\n}\n\n@media screen and (max-width: 1010px) {\n    ks-page-guide .dialog .navigation .breadcrumbs {\n        display: none;\n    }\n\n    ks-page-guide .dialog .navigation .back {\n        display: block;\n    }\n\n    ks-page-guide .dialog .choices .choice {\n        display: flex;\n        align-items: center;\n        width: 100%;\n        max-width: 100%;\n    }\n\n    ks-page-guide .dialog .choice ks-img3 {\n        height: 50px;\n        width: 80px;\n    }\n\n    ks-page-guide .dialog .choice ks-img3.large {\n        height: 80px;\n        width: 80px;\n    }\n\n    ks-page-guide .dialog .choices .choice .select {\n        position: relative;\n        top: 0;\n        right: 0;\n    }\n    \n    ks-page-guide .dialog .choices.multiple .choice .select {\n        position: relative;\n        top: 2.5px;\n    }\n    \n    ks-page-guide .product .condition {\n        padding: 2px 0;\n    }\n\n    ks-page-guide .product .condition ks-icon {\n        transform: scale(0.9);\n        margin: 0;\n    }\n}\n\n@media screen and (min-width: 701px) {\n    ks-page-guide > ks-page-base > .content { \n        padding: 0 40px;\n    }\n}","import { Component, h, Prop, State, Element } from '@stencil/core';\nimport { DialogChoiceData, DialogData, guide, GuideData } from \"../../../global/data/guide\";\nimport { jsonfetch } from '../../../global/functions/fetch';\nimport { marked } from 'marked';\n\ndeclare global { interface Window { dataLayer: any[] }}\n@Component({\n    tag: 'ks-page-guide',\n    styleUrl: 'guide.css'\n})\nexport class PageGuide {\n    @Element() root: HTMLElement;\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() guideData: string;\n    @Prop({mutable: true, reflect: true}) loading: boolean = false;\n\n    @State() active: string = null;\n    @State() summary: boolean = false;\n    @State() choices: {category: string, choices: string[]}[] = [];\n\n    componentWillLoad() {\n        const guideDataElement = document.getElementById(this.guideData);\n\t\tconst guideData = JSON.parse(guideDataElement.innerHTML) as GuideData;\n\n        Object.keys(guideData).map(key => {\n\t\t\tguide.set(key as keyof GuideData, guideData[key]);\n\t\t});\n\n        this.resetActive();\n    }\n\n    initialCategory() {\n        return guide.get(\"dialog\")?.[0]?.id;\n    }\n\n    resetActive() {\n        this.active = this.initialCategory();\n    }\n\n    nextCategory() {\n        this.selectCategoryRelative(1);\n    }\n    \n    previousCategory() {\n        this.selectCategoryRelative(-1);\n    }\n\n    selectCategoryRelative(distance: number) {\n        const category = guide.get(\"dialog\")?.[this.activeIndex() + distance];\n        this.selectCategory(category?.id);\n    }\n\n    activeIndex() {\n        return this.index(this.active);\n    }\n\n    index(category: string) {\n        return guide.get(\"dialog\")?.findIndex(item => item.id == category);\n    }\n\n    activeCategory() {\n        return this.category(this.active);\n    }\n\n    category(category: string) {\n        return guide.get(\"dialog\")?.find(item => item.id == category);\n    }\n\n    activeCategoryChoices() {\n        return this.categoryChoices(this.active);\n    }\n\n    categoryChoices(category: string) {\n        return this.choices.find(item => item.category == category)?.choices;\n    }\n\n    selectChoice(category: string, choice: DialogChoiceData) {\n        let choices = this.choices;\n        const id = choice?.id ?? null;\n        const multiple = this.category(category)?.multiple;\n\n        const current = this.choices.find(item => item.category == category);\n\n        if(current) {\n            if(multiple) {\n                const pos = current.choices.indexOf(id);\n                if(pos != -1) current.choices.splice(pos, 1);\n                else current.choices.push(id);\n            }\n            else current.choices = [id];\n        }\n        \n        else {\n            this.choices.push({\n                category: category,\n                choices: [id]\n            });\n        }\n\n        this.choices = [...choices];\n        if(choice == null) this.nextCategory();\n    }\n\n    selectCategory(category: string) {\n        const previousIndex = this.activeIndex();\n        const index = this.index(category);\n\n        if(index == -1)\n            this.summary = true;\n\n        else {\n            if(this.choices.length > index)\n                this.choices = [...this.choices.slice(0, index)];\n\n            this.active = category;\n            this.summary = false;\n        }\n\n        if(this.active == this.initialCategory())\n            this.componentWillLoad();\n\n        else this.dynamicResults(previousIndex);\n\n        this.scroll();\n    }\n\n    scroll() {\n        const dialog = this.root.querySelector(\".dialog\");\n        const nav_rect = dialog.querySelector(\".navigation\")?.getBoundingClientRect();\n\n        const in_view = nav_rect.top >= 0 &&\n            nav_rect.left >= 0 &&\n            nav_rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n            nav_rect.right <= (window.innerWidth || document.documentElement.clientWidth);\n\n        if(!in_view) setTimeout(() => {\n            const y = dialog?.getBoundingClientRect()?.top + window.scrollY;\n            window.scroll({top: y, behavior: 'smooth'});\n        }, 300);\n    }\n\n    reset() {\n        this.summary = false;\n        this.resetActive();\n        this.choices = [];\n        this.componentWillLoad();\n    }\n\n    async dynamicResults(previousIndex) {\n        this.loading = true;\n\n        const data = await jsonfetch(guide.get(\"api\"), {\n            \"choices\": this.choices\n        });\n        const guideData = await data?.json();\n\n        if(guideData) {\n            guide.set(\"dialog\", guideData?.dialog);\n            guide.set(\"products\", guideData?.products);\n        }\n\n        this.loading = false;\n\n        if(!this.activeCategory()) {\n            const category = guide.get(\"dialog\")?.[previousIndex+1];\n\n            if(category) this.active = category.id;\n            else this.summary = true;\n        }\n    }\n\n\trender() {\n        const dialog = guide.get(\"dialog\");\n        const products = guide.get(\"products\");\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n            <div class=\"content\">\n                <div class=\"text\">\n                    <h1>{guide.get(\"heading\")}</h1>\n                    <p>{guide.get(\"description\")}</p>\n                </div>\n\n                <div class=\"dialog\">\n                    <div class=\"navigation\">\n                        <div class=\"breadcrumbs\">\n                            {dialog.slice(0, Math.max(this.choices.length, this.activeIndex())).map(category =>\n                                <div onClick={()=>this.selectCategory(category.id)}>{category?.name}</div>\n                            )}\n                        </div>\n                        <div class=\"back\" onClick={()=>this.previousCategory()}>\n                            <ks-icon name=\"chevron-left\" />\n                        </div>\n                        <div>{this.summary ? dialog.length : this.activeIndex()+1} z {dialog.length}</div>\n                    </div>\n                    \n                    {this.summary ? this.summary_stage(dialog) : this.choices_stage()}\n                </div>\n\n                {products && products?.length > 0 && (this.activeIndex() > 0 || this.summary) ?\n                    <div class=\"products\">\n                        {products?.map((product, index) => \n                            <div class=\"product\" key={product.id}>\n                                {index == 0 ? <div class=\"best\">Najlepszy wybór</div> : null}\n                                <ks-product-card constheight flat linkOnly product={product} />\n                                {product?.conditions?.map(category =>\n                                    <div class=\"condition\"> \n                                        <ks-icon name=\"check-circle\" />\n                                        {category.category}: {category.items.join(\", \")}\n                                    </div>\n                                )}\n                            </div>\n                        )}\n                    </div>\n                : null}\n                \n                <div class=\"text\" innerHTML={marked.parse(guide.get(\"bottom_description\"))} />\n            </div>\n        </ks-page-base>;\n\t}\n\n    choices_stage = () => [\n        <h2>{this.activeCategory()?.heading}</h2>,\n        <div class={[\"choices\", this.activeCategory()?.multiple ? \"multiple\" : null].join(\" \")}>\n\n            {this.activeCategory()?.choices.map(choice => \n                <div class={[\"choice\", this.activeCategoryChoices()?.includes(choice.id) ? \"active\" : null].join(\" \")}\n                    onClick={()=>this.selectChoice(this.active, choice)}\n                >\n                    <ks-img3 fit='cover' image={choice.image} class={choice.description ? \"large\" : null}/>\n                    <div class=\"description\">\n                        <h3>{choice.name}</h3>\n                        {choice.description ? <p>{choice.description}</p> : null}\n                    </div>\n                    <div class=\"select\" />\n                </div>\n            )}\n\n            {this.loading}\n\n        </div>,\n        <div class=\"buttons\">\n            {this.activeCategory()?.nopreference ? \n                <ks-button round border name=\"Nie mam preferencji\" onClick={()=>this.selectChoice(this.active, null)} />\n            : null}\n\n            {this.activeCategoryChoices()?.length > 0 ? \n                <ks-button round name=\"Kontynuuj\" onClick={()=>this.nextCategory()} />\n            : null}\n        </div>\n    ];\n\n    summary_stage = (dialog: DialogData[]) => [\n        <h2>Dziękujemy za Twoją opinię!</h2>,\n        <p>Na podstawie Twoich odpowiedzi możemy polecić Ci kilka świetnych rozwiązań. Sprawdź je poniżej.</p>,\n        <div class=\"summary\">\n            {dialog?.map((category) => this.categoryChoices(category.id)?.includes(null) ? null :\n                <div>{category.name}: {\n                    this.categoryChoices(category.id)?.map(id =>\n                        category.choices?.find(choice => choice.id == id)?.name\n                    )?.map(name => <div>{name}</div>)\n                }</div> \n            )}\n            <ks-button name=\"Rozpocznij ponownie\" icon=\"edit-3\" onClick={()=>this.reset()}/>\n        </div>\n    ];\n}\n\n\n\n\n"],"names":[],"mappings":"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"}