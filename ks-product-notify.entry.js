import{r as e,h as t,a}from"./index-0TTgkKkd.js";import{p as o}from"./product-qCLVrWhE.js";import{c}from"./common-JZ1KLzZ7.js";import{c as s}from"./commonDynamic-uutiB2IM.js";import{V as i}from"./validate-D9-0FS3L.js";import"./index-CZU_OQRD.js";const n="ks-product-notify{display:block}ks-product-notify fieldset{border:none;margin:0;padding:0}ks-product-notify .info{text-align:center;margin-bottom:40px}ks-product-notify .info a{text-decoration:none;color:black;margin:0 5px}ks-product-notify h3{font-family:var(--font-emphasis);font-size:20px;font-weight:700}ks-product-notify ks-input-check{margin-bottom:5px}ks-product-notify ks-button{margin-top:20px}";const r=class{constructor(t){e(this,t)}async requestHandler(e){const t=o.get("strings");const a=o.get("id");const c=s.get("api").notifyAvailability;e.preventDefault();if(!await i(this.root.querySelector("form")))return;this.dialog.showLoading();const n=e.target;const r=new FormData(n);r.append("product",a);await fetch(c,{body:r,method:"post"}).then((async e=>e.json())).then((async e=>{const a="status"in e&&"heading"in e&&"paragraph"in e;if(!a)throw new Error(t.notifyErrorParagraph);if(e.status=="success")this.dialog.showSuccess(e.heading,e.paragraph);else this.dialog.showFailure(e.heading,e.paragraph)})).catch((async e=>{let a="";if(!window.navigator.onLine)a=t.noInternet;else if(e.message!="")a=e.message;console.log(e.message);this.dialog.showFailure(t.notifyErrorHeading,a)}))}async show(){this.dialog.show()}componentDidLoad(){this.dialog=this.root.querySelector("ks-dialog")}render(){const e=o.get("strings");return t("ks-dialog",{key:"bfe460616c49283325d9000475451f45730f9d4f",dark:true},t("form",{key:"c14d17b652e2ec761eec0468d9ecc9a46d84c175",onSubmit:e=>this.requestHandler(e)},t("fieldset",{key:"10c4f2a01f7d9daeaf90368f650dba2ee587babf"},t("div",{key:"c50eb75df7f1942a99b1748cc509057a7827e6cb",class:"info"},t("h3",{key:"742d12899ea1b746a3e071e748412ab4f61134a7"},e.notifyHeading),t("p",{key:"51620c0514a5f88e3539c6d7e90225513ecf9d93"},e.notifyParagraph),t("a",{key:"03b2a141a0d530afc04b52429b8647a1225c3e48",href:"mailto:"+c.get("email")},c.get("email"))," â€¢",t("a",{key:"7d026c9a6ce3c7667cbb966766ade9ce01e62116",href:"tel:"+c.get("phone")},c.get("phone"))),t("ks-input-text",{key:"3bb5de6b7f0eef0d65c29867791f48d60c056bb7",email:true,name:"email",required:true,nomessage:true,placeholder:"E-mail",icon:"mail"}),t("ks-input-check",{key:"95f9e4256636020e22716fffed64217c27727f93",checked:true,name:"backorders",nomessage:true,label:e.notifyBackorders}),t("ks-input-check",{key:"97f697e1990d6ab77f1a2a92a71c25c44a8a20b5",name:"zgoda",required:true,nomessage:true,label:e.notifyAgreement}),t("ks-button",{key:"3e474c1c2b00accaf4caf560edbac717d6c8e8d5",submit:true,name:e.notifyMe}))))}get root(){return a(this)}};r.style=n;export{r as ks_product_notify};
//# sourceMappingURL=ks-product-notify.entry.js.map