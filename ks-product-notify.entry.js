import{r as t,h as o,g as n}from"./index-b2de1977.js";import{p as i}from"./product-3b8233ee.js";import{c as e}from"./common-950aeaa1.js";import{c as s}from"./commonDynamic-e598d690.js";import{V as a}from"./validate-cd7ce36d.js";import"./index-bca22170.js";const r=class{constructor(o){t(this,o)}async requestHandler(t){const o=i.get("notifyStrings"),n=i.get("id"),e=s.get("api").notifyAvailability;if(t.preventDefault(),!(await a(this.root.querySelector("form"))))return;this.dialog.showLoading();const r=new FormData(t.target);r.append("product",n),await fetch(e,{body:r,method:"post"}).then((async t=>t.json())).then((async t=>{if(!("status"in t&&"heading"in t&&"paragraph"in t))throw new Error(o.errorParagraph);"success"==t.status?this.dialog.showSuccess(t.heading,t.paragraph):this.dialog.showFailure(t.heading,t.paragraph)})).catch((async t=>{let n="";window.navigator.onLine?""!=t.message&&(n=t.message):n="Brak internetu.",console.log(t.message),this.dialog.showFailure(o.errorHeading,n)}))}async show(){this.dialog.show()}componentDidLoad(){this.dialog=this.root.querySelector("ks-dialog")}render(){const t=i.get("notifyStrings");return o("ks-dialog",null,o("form",{onSubmit:t=>this.requestHandler(t)},o("fieldset",null,o("div",{class:"info"},o("h3",null,t.heading),o("p",null,t.paragraph),o("a",{href:"mailto:"+e.get("email")},e.get("email"))," â€¢",o("a",{href:"tel:"+e.get("phone")},e.get("phone"))),o("ks-input-text",{email:!0,name:"email",required:!0,nomessage:!0,placeholder:"E-mail",icon:"mail"}),o("ks-input-check",{checked:!0,name:"backorders",nomessage:!0,label:t.backorders}),o("ks-input-check",{name:"zgoda",required:!0,nomessage:!0,label:t.agreement}),o("ks-button",{submit:!0,name:"POWIADOM MNIE"}))))}get root(){return n(this)}};r.style="ks-product-notify{display:block}ks-product-notify fieldset{border:none;margin:0;padding:0}ks-product-notify .info{text-align:center;margin-bottom:40px}ks-product-notify .info a{text-decoration:none;color:black;margin:0 5px}ks-product-notify h3{font-family:var(--font-emphasis);font-size:20px;font-weight:700}ks-product-notify ks-input-check{margin-bottom:5px}ks-product-notify ks-button{margin-top:20px}";export{r as ks_product_notify}