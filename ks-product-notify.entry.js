import{r as e,h as t,a as o}from"./index-0TTgkKkd.js";import{p as a}from"./product-qCLVrWhE.js";import{c as s}from"./common-JZ1KLzZ7.js";import{c as i}from"./commonDynamic-uutiB2IM.js";import{V as n}from"./validate-D9-0FS3L.js";import"./index-CZU_OQRD.js";const r="ks-product-notify{display:block}ks-product-notify fieldset{border:none;margin:0;padding:0}ks-product-notify .info{text-align:center;margin-bottom:40px}ks-product-notify .info a{text-decoration:none;color:black;margin:0 5px}ks-product-notify h3{font-family:var(--font-emphasis);font-size:20px;font-weight:700}ks-product-notify ks-input-check{margin-bottom:5px}ks-product-notify ks-button{margin-top:20px}";const c=class{constructor(t){e(this,t)}async requestHandler(e){const t=a.get("strings");const o=a.get("id");const s=i.get("api").notifyAvailability;e.preventDefault();if(!await n(this.root.querySelector("form")))return;this.dialog.showLoading();const r=e.target;const c=new FormData(r);c.append("product",o);await fetch(s,{body:c,method:"post"}).then((async e=>e.json())).then((async e=>{const o="status"in e&&"heading"in e&&"paragraph"in e;if(!o)throw new Error(t.notifyErrorParagraph);if(e.status=="success")this.dialog.showSuccess(e.heading,e.paragraph);else this.dialog.showFailure(e.heading,e.paragraph)})).catch((async e=>{let o="";if(!window.navigator.onLine)o=t.noInternet;else if(e.message!="")o=e.message;console.log(e.message);this.dialog.showFailure(t.notifyErrorHeading,o)}))}async show(){this.dialog.show()}componentDidLoad(){this.dialog=this.root.querySelector("ks-dialog")}render(){const e=a.get("strings");return t("ks-dialog",{key:"867747cd12b46e33a6d0fe73417ed4ccebe6d8c8",dark:true},t("form",{key:"801f65b7074ab88e071e8b27b5ca91e911805892",onSubmit:e=>this.requestHandler(e)},t("fieldset",{key:"58ee5d2e75684d4d1b53e42769845cc8fe10ab91"},t("div",{key:"e8d6f5f4e3d258dd5db703c1c86b12638f11ad4e",class:"info"},t("h3",{key:"3fa2551400efd97243e4136f5f53f2ea538899f7"},e.notifyHeading),t("p",{key:"0fe833b399b981c046dc6063e627b95c3b9f98a8"},e.notifyParagraph),t("a",{key:"5f4bd9cb2b4842af02b09918d172d9df5aab0b77",href:"mailto:"+s.get("email")},s.get("email"))," â€¢",t("a",{key:"e1f822b8edb680bef68e731a0e93acb306597a8d",href:"tel:"+s.get("phone")},s.get("phone"))),t("ks-input-text",{key:"784c4a518306e1fb39e91b962e20c7f6f8e98666",email:true,name:"email",required:true,nomessage:true,placeholder:"E-mail",icon:"mail"}),t("ks-input-check",{key:"0d76399e4e9c051c5b24995f9feb6f06c0216560",checked:true,name:"backorders",nomessage:true,label:e.notifyBackorders}),t("ks-input-check",{key:"e80aea8a952ef3239c8ecbb38235b492361c23b9",name:"zgoda",required:true,nomessage:true,label:e.notifyAgreement}),t("ks-button",{key:"a23b959442ba30f89e0390733ad22a1b437ff3f3",submit:true,name:e.notifyMe}))))}get root(){return o(this)}};c.style=r;export{c as ks_product_notify};
//# sourceMappingURL=ks-product-notify.entry.js.map