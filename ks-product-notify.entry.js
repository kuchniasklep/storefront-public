import{r as t,h as o,g as i}from"./index-e3198654.js";import{p as n}from"./product-b6117ebf.js";import{c as s}from"./common-e4bd89b8.js";import{c as e}from"./commonDynamic-1f04aed5.js";import{V as a}from"./validate-cd7ce36d.js";import"./index-5a4e318f.js";const r=class{constructor(o){t(this,o),this.resultHeading=void 0,this.resultParagraph=void 0}async requestHandler(t){const o=n.get("notifyStrings"),i=n.get("id"),s=e.get("api").notifyAvailability;if(t.preventDefault(),!(await a(this.root.querySelector("form"))))return;this.dialog.showLoading();const r=new FormData(t.target);r.append("product",i),await fetch(s,{body:r,method:"post"}).then((async t=>t.json())).then((async t=>{if(!("status"in t&&"heading"in t&&"paragraph"in t))throw new Error(o.errorParagraph);"success"==t.status?this.dialog.showSuccess(t.heading,t.paragraph):this.dialog.showFailure(t.heading,t.paragraph)})).catch((async t=>{let i="";window.navigator.onLine?""!=t.message&&(i=t.message):i="Brak internetu.",console.log(t.message),this.dialog.showFailure(o.errorHeading,i)}))}async show(){this.dialog.show()}componentDidLoad(){this.dialog=this.root.querySelector("ks-dialog")}render(){const t=n.get("notifyStrings");return o("ks-dialog",null,o("form",{onSubmit:t=>this.requestHandler(t)},o("fieldset",null,o("div",{class:"info"},o("h3",null,t.heading),o("p",null,t.paragraph),o("a",{href:"mailto:"+s.get("email")},s.get("email"))," â€¢",o("a",{href:"tel:"+s.get("phone")},s.get("phone"))),o("ks-input-text",{email:!0,name:"email",required:!0,nomessage:!0,placeholder:"E-mail",icon:"mail"}),o("ks-input-check",{checked:!0,name:"backorders",nomessage:!0,label:t.backorders}),o("ks-input-check",{name:"zgoda",required:!0,nomessage:!0,label:t.agreement}),o("ks-button",{submit:!0,name:"POWIADOM MNIE"}))))}get root(){return i(this)}};r.style="ks-product-notify{display:block}ks-product-notify fieldset{border:none;margin:0;padding:0}ks-product-notify .info{text-align:center;margin-bottom:40px}ks-product-notify .info a{text-decoration:none;color:black;margin:0 5px}ks-product-notify h3{font-family:var(--font-emphasis);font-size:20px;font-weight:700}ks-product-notify ks-input-check{margin-bottom:5px}ks-product-notify ks-button{margin-top:20px}";export{r as ks_product_notify}