import{r as t,h as o,g as e}from"./index-1b90b4d2.js";import{p as n}from"./product-591e31af.js";import{c as s}from"./common-46fdf31d.js";import{c as i}from"./commonDynamic-3e6c308f.js";import{V as r}from"./validate-fd0da345.js";import"./index-33fbe4a7.js";const a="ks-product-notify{display:block}ks-product-notify fieldset{border:none;margin:0;padding:0}ks-product-notify .info{text-align:center;margin-bottom:40px}ks-product-notify .info a{text-decoration:none;color:black;margin:0 5px}ks-product-notify h3{font-family:var(--font-emphasis);font-size:20px;font-weight:700}ks-product-notify ks-input-check{margin-bottom:5px}ks-product-notify ks-button{margin-top:20px}";const c=class{constructor(o){t(this,o);this.resultHeading=undefined;this.resultParagraph=undefined}async requestHandler(t){const o=n.get("strings");const e=n.get("id");const s=i.get("api").notifyAvailability;t.preventDefault();if(!await r(this.root.querySelector("form")))return;this.dialog.showLoading();const a=t.target;const c=new FormData(a);c.append("product",e);await fetch(s,{body:c,method:"post"}).then((async t=>t.json())).then((async t=>{const e="status"in t&&"heading"in t&&"paragraph"in t;if(!e)throw new Error(o.notifyErrorParagraph);if(t.status=="success")this.dialog.showSuccess(t.heading,t.paragraph);else this.dialog.showFailure(t.heading,t.paragraph)})).catch((async t=>{let e="";if(!window.navigator.onLine)e=o.noInternet;else if(t.message!="")e=t.message;console.log(t.message);this.dialog.showFailure(o.notifyErrorHeading,e)}))}async show(){this.dialog.show()}componentDidLoad(){this.dialog=this.root.querySelector("ks-dialog")}render(){const t=n.get("strings");return o("ks-dialog",null,o("form",{onSubmit:t=>this.requestHandler(t)},o("fieldset",null,o("div",{class:"info"},o("h3",null,t.notifyHeading),o("p",null,t.notifyParagraph),o("a",{href:"mailto:"+s.get("email")},s.get("email"))," â€¢",o("a",{href:"tel:"+s.get("phone")},s.get("phone"))),o("ks-input-text",{email:true,name:"email",required:true,nomessage:true,placeholder:"E-mail",icon:"mail"}),o("ks-input-check",{checked:true,name:"backorders",nomessage:true,label:t.notifyBackorders}),o("ks-input-check",{name:"zgoda",required:true,nomessage:true,label:t.notifyAgreement}),o("ks-button",{submit:true,name:t.notifyMe}))))}get root(){return e(this)}};c.style=a;export{c as ks_product_notify};
//# sourceMappingURL=ks-product-notify.entry.js.map