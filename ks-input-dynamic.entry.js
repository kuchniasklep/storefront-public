import{r as t,h as s,a}from"./index-0TTgkKkd.js";import{c as i}from"./common-JZ1KLzZ7.js";import"./index-CZU_OQRD.js";const e=class{constructor(s){t(this,s);this.api="";this.message="";this.loading=false}componentDidLoad(){const t=this.root.querySelector("input");const s=this.root.querySelector("ks-input-text");s.setAttribute("novalidate","novalidate");t.onchange=()=>this.Validate()}async Validate(){const t=i.get("translations");const s=this.root.querySelector("input");const a=this.root.querySelector("ks-input-text");var e=new Headers;e.append("pragma","no-cache");e.append("cache-control","no-cache");this.ready=new Promise((async i=>{await a.Validate();if(await a.IsValid()){this.loading=true;await fetch(this.api+s.value,{method:"GET",headers:e,credentials:"same-origin"}).then((t=>{if(!t.ok)throw t.status;return t.text()})).then((t=>{if(t=="false")throw this.message;else if(t!="true")throw t;else i(true)})).catch((s=>{let e=s;if(Number.isInteger(s))e=t.inputConnectionError+s;else if(!navigator.onLine)e=t.inputInternetConnectionError;a.setAttribute("message",e);i(false)}))}else i(false);this.loading=false}))}async IsValid(){return await this.ready}render(){return s("div",{key:"da9308540206692be309ec07cdbdb10f54f2316c",class:"uk-position-relative"},s("slot",{key:"75fac495617671d0aceacea5d5a882ef62b4a4a6"}),this.loading?s("div",{class:"uk-position-absolute uk-animation-fade",style:{top:"7px",right:"7px",animationDuration:"0.3s",animationDelay:"0.5s"},"uk-spinner":"ratio: 0.9"}):null)}get root(){return a(this)}};export{e as ks_input_dynamic};
//# sourceMappingURL=ks-input-dynamic.entry.js.map