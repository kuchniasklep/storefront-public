import{r as t,h as e,H as a,a as s}from"./index-0TTgkKkd.js";import{c as i}from"./common-JZ1KLzZ7.js";import"./index-CZU_OQRD.js";const n="ks-input-dynamic{display:block;position:relative}ks-input-dynamic .wrapper{-webkit-transition:0.3s ease opacity;transition:0.3s ease opacity}ks-input-dynamic[loading] .wrapper{opacity:0.3;pointer-events:none}";const r=class{constructor(e){t(this,e);this.api="";this.message="";this.loading=false}componentDidLoad(){const t=this.root.querySelector("input");const e=this.root.querySelector("ks-input-text");e.setAttribute("novalidate","novalidate");t.onchange=()=>this.Validate()}async Validate(){const t=i.get("translations");const e=this.root.querySelector("input");const a=this.root.querySelector("ks-input-text");var s=new Headers;s.append("pragma","no-cache");s.append("cache-control","no-cache");this.ready=new Promise((async i=>{await a.Validate();if(await a.IsValid()){this.loading=true;await fetch(this.api+e.value,{method:"GET",headers:s,credentials:"same-origin"}).then((t=>{if(!t.ok)throw t.status;return t.text()})).then((t=>{if(t=="false")throw this.message;else if(t!="true")throw t;else i(true)})).catch((e=>{let s=e;if(Number.isInteger(e))s=t.inputConnectionError+e;else if(!navigator.onLine)s=t.inputInternetConnectionError;a.setAttribute("message",s);i(false)}))}else i(false);this.loading=false}))}async IsValid(){return await this.ready}render(){return e(a,{key:"b58dfad461d9bf894f73e03582c7c5f6564b04c7"},e("div",{key:"8ba97d83cc16658e3dec7222095bec86a7573196",class:"wrapper"},e("slot",{key:"3d15c1efb17521993e3a7bbaf33cf727aaa102bb"})),this.loading&&e("ks-loader",{key:"fb6b059d4d0288c6cf4bd3a0bb33c74c92ad0c04",dark:true}))}get root(){return s(this)}};r.style=n;export{r as ks_input_dynamic};
//# sourceMappingURL=ks-input-dynamic.entry.js.map