import{r as t,h as s,g as i}from"./index-1b90b4d2.js";import{c as a}from"./common-46fdf31d.js";import"./index-33fbe4a7.js";const e=class{constructor(s){t(this,s);this.api="";this.message="";this.loading=false}componentDidLoad(){const t=this.root.querySelector("input");const s=this.root.querySelector("ks-input-text");s.setAttribute("novalidate","novalidate");t.onchange=()=>this.Validate()}async Validate(){const t=a.get("translations");const s=this.root.querySelector("input");const i=this.root.querySelector("ks-input-text");var e=new Headers;e.append("pragma","no-cache");e.append("cache-control","no-cache");this.ready=new Promise((async a=>{await i.Validate();if(await i.IsValid()){this.loading=true;await fetch(this.api+s.value,{method:"GET",headers:e,credentials:"same-origin"}).then((t=>{if(!t.ok)throw t.status;return t.text()})).then((t=>{if(t=="false")throw this.message;else if(t!="true")throw t;else a(true)})).catch((s=>{let e=s;if(Number.isInteger(s))e=t.inputConnectionError+s;else if(!navigator.onLine)e=t.inputInternetConnectionError;i.setAttribute("message",e);a(false)}))}else a(false);this.loading=false}))}async IsValid(){return await this.ready}render(){return s("div",{class:"uk-position-relative"},s("slot",null),this.loading?s("div",{class:"uk-position-absolute uk-animation-fade",style:{top:"7px",right:"7px",animationDuration:"0.3s",animationDelay:"0.5s"},"uk-spinner":"ratio: 0.9"}):null)}get root(){return i(this)}};export{e as ks_input_dynamic};
//# sourceMappingURL=ks-input-dynamic.entry.js.map