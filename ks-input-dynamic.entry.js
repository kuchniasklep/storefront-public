import{r as e,h as t,H as a,a as s}from"./index-0TTgkKkd.js";import{c as i}from"./common-JZ1KLzZ7.js";import"./index-CZU_OQRD.js";const n="ks-input-dynamic{display:block;position:relative}ks-input-dynamic .wrapper{-webkit-transition:0.3s ease opacity;transition:0.3s ease opacity}ks-input-dynamic[loading] .wrapper{opacity:0.3;pointer-events:none}";const o=class{constructor(t){e(this,t);this.api="";this.message="";this.loading=false}componentDidLoad(){const e=this.root.querySelector("input");const t=this.root.querySelector("ks-input-text");t.setAttribute("novalidate","novalidate");e.onchange=()=>this.Validate()}async Validate(){const e=i.get("translations");const t=this.root.querySelector("input");const a=this.root.querySelector("ks-input-text");var s=new Headers;s.append("pragma","no-cache");s.append("cache-control","no-cache");this.ready=new Promise((async i=>{await a.Validate();if(await a.IsValid()){this.loading=true;await fetch(this.api+encodeURIComponent(t.value),{method:"GET",headers:s,credentials:"same-origin"}).then((e=>{if(!e.ok)throw e.status;return e.text()})).then((e=>{if(e=="false")throw this.message;else if(e!="true")throw e;else i(true)})).catch((t=>{let s=t;if(Number.isInteger(t))s=e.inputConnectionError+t;else if(!navigator.onLine)s=e.inputInternetConnectionError;a.setAttribute("message",s);i(false)}))}else i(false);this.loading=false}))}async IsValid(){return await this.ready}render(){return t(a,{key:"02eb224586cd1a9e2fbeaea1c372b4b8137acd6c"},t("div",{key:"3b8e1d1cee381ba959582b043bb0246c2cf34ab0",class:"wrapper"},t("slot",{key:"4cd606b4eab08f0ec0976fd2b11df6338ba1aaac"})),this.loading&&t("ks-loader",{key:"b9910aef585d99fe485d335d22431aac9ecdf6d4",dark:true}))}get root(){return s(this)}};o.style=n;export{o as ks_input_dynamic};
//# sourceMappingURL=ks-input-dynamic.entry.js.map