{"version":3,"file":"ks-product-fav-card.entry.system.js","sources":["src/components/listing/product-fav-card.css?tag=ks-product-fav-card","src/components/listing/product-fav-card.tsx"],"sourcesContent":["\nks-product-fav-card {\n    display: flex;\n    align-items: stretch;\n    flex-wrap: nowrap;\n}\n\nks-product-fav-card > a {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n\n    text-decoration: none !important;\n    color: #000 !important;\n}\n\nks-product-fav-card .image {\n    height: 100%;\n    width: 100%;\n    max-height: 180px;\n    max-width: 180px;\n\n    margin-right: 10px;\n    padding: 10px;\n    box-sizing: border-box;\n}\n\nks-product-fav-card h3 {\n    font-family: var(--font-emphasis);\n    margin-bottom: 5px;\n    font-size: 20px;\n}\n\nks-product-fav-card p {\n    font-size: 15px;\n}\n\nks-product-fav-card .price {\n    font-size: 18px;\n    font-family: var(--font-emphasis);\n}\n\nks-product-fav-card .price .current {\n    font-weight: 700;\n    color: var(--color-secondary);\n}\n\nks-product-fav-card .price .previous {\n    margin: 0px 10px;\n    color: #909090\n}\n\nks-product-fav-card .buttons {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    margin-left: 10px;\n}\n\nks-product-fav-card .buttons button {\n    background-color: var(--color-secondary);\n    color: white;\n    border-style: none;\n    width: 50px;\n    height: 100%;\n    position: relative;\n\n    transition: background-color 0.3s ease;\n}\n\nks-product-fav-card .buttons button:hover {\n    background-color: var(--color-secondary-hover);\n}\n\nks-product-fav-card .buttons button:active {\n    background-color: var(--color-secondary-active);\n}\n\nks-product-fav-card .buttons .fav {\n    border-radius: 10px 10px 0 0 ;\n}\n\nks-product-fav-card .buttons .cart {\n    border-top: solid 1px var(--color-secondary-darker);\n    border-radius: 0 0 10px 10px;\n}\n\nks-product-fav-card .buttons .cart span {\n    display: none;\n}\n\nks-product-fav-card[unavailable] .buttons .cart {\n    border-top: none;\n    background-color: var(--color-faded);\n    color: var(--color-faded-text);\n}\n\n\n@media screen and (max-width: 750px) {\n    ks-product-fav-card p {\n        display: none;\n    }\n}\n\n@media screen and (max-width: 550px) {\n    ks-product-fav-card {\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n    }\n\n    ks-product-fav-card > a {\n        flex-direction: column;\n        align-items: center;\n    }\n\n    ks-product-fav-card .image {\n        margin: 0;\n    }\n\n    ks-product-fav-card .buttons {\n        flex-direction: row;\n        margin: 0;\n        width: 100%;\n        max-width: 240px;\n        margin-top: 10px;\n    }\n\n    ks-product-fav-card .buttons button {\n        height: 40px;\n    }\n\n    ks-product-fav-card .buttons .fav {\n        flex: 1 0 40px;\n        width: 40px;\n        border-radius: 100px;\n        margin-right: 5px;\n    }\n\n    ks-product-fav-card .buttons .cart {\n        width: 100%;\n        border-radius: 10px;\n    }\n\n    ks-product-fav-card .buttons .cart ks-icon {\n        display: none;\n    }\n\n    ks-product-fav-card .buttons .cart span {\n        display: inline;\n    }\n}","import { Component, h, Prop, State } from '@stencil/core';\nimport { addToCart } from '../../global/functions/addToCart';\nimport { removeFromFavourites } from '../../global/functions/favourites';\nimport { ProductShortData } from '../../global/data/product';\nimport { ProductCardData } from '../../global/data/listing';\nimport { common } from '../../global/data/common';\nimport priceFormat from '../../global/functions/price';\n\n@Component({\n  tag: 'ks-product-fav-card',\n  styleUrl: 'product-fav-card.css'\n})\nexport class ProductCard {\n  @Prop({reflect: true}) unavailable: boolean = false;\n  @Prop() linkOnly: boolean = false;\n  @Prop() summary: string;\n  \n  @Prop() product: ProductCardData;\n\n  @State() cartLoading: boolean = false;\n  @State() favLoading: boolean = false;\n  @State() favSuccess: boolean = false;\n\n  cart() {\n    this.cartLoading = true;\n    \n    const product: ProductShortData = {\n      id: this.product.id,\n      traitIDs: \"\",\n      sku: this.product.sku,\n      brandName: this.product.brandName,\n      name: this.product.name,\n      link: this.product.link,\n      image: this.product.image,\n      imageFull: this.product.imageFull,\n      currentPrice: this.product.currentPrice,\n      quantity: 1,\n      currency: this.product.currency,\n      categories: this.product.categories,\n      breadcrumbs: this.product.breadcrumbs\n    };\n\n    addToCart(product, 1)\n      .then(() => this.cartLoading = false);\n  }\n\n  favourites() {\n    if(this.favLoading) return;\n    this.favLoading = true;\n\n    removeFromFavourites(this.product.id).then(() => {\n        location.reload()\n    });\n  }\n\n  render() {\n    const translations = common.get('translations');\n    const currentPrice = priceFormat(this.product.currentPrice);\n\n    const button = this.unavailable ? translations.unavailable : translations.addToCart;\n\n    return[\n        <a href={this.product.link} aria-label={this.product.name}>\n            <div class=\"image\">\n              <ks-img3 fit=\"contain\" image={this.product.image} webp={this.product.webp} width={280} height={280} alt=\"zdjęcie produktu\" aria-hidden />\n            </div>\n            <div class=\"info\">\n                <h3>{this.product.name}</h3>\n                <div class=\"price\">\n                    <span class=\"current\">{currentPrice}</span>\n                </div>\n                {this.summary ? <p>{this.summary}</p> : null}\n            </div>\n        </a>,\n\n        <div class=\"buttons\">\n            <button aria-label=\"Usuń ze schowka\" class=\"fav\" onClick={()=>this.favourites()}>\n                { this.favLoading ? <ks-loader /> : <ks-icon name=\"x\" aria-hidden /> }\n            </button>\n\n            <button disabled={this.unavailable} class=\"cart\" onClick={()=>this.cart()} aria-label={button}>\n                { this.cartLoading ? <ks-loader /> : [\n                  <ks-icon name=\"shopping-bag\" aria-hidden />,\n                  <span>{button}</span>\n                ]}\n            </button>\n        </div>\n    ];\n  }\n}\n"],"names":[],"mappings":"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"}