{"version":3,"names":["listing","createStore","listingCss","PageListing","exports","class_1","prototype","componentWillLoad","listingDataElement","document","getElementById","this","listingData","JSON","parse","innerHTML","Object","keys","map","key","set","track","get","DataLayer","state","render","bottomDescription","infoBanner","tags","navigation","filters","products","query","review","infocards","info","strings","common","h","skipbase","commonData","commonDynamicData","content","heading","breadcrumbs","description","categories","autocorrect","theme","data","length","base","post","paginationBase","current","count","pattern","card","product","flat","compare","noContentHome","noContentBack","slot","crumb","href","link","name","grey"],"sources":["src/global/data/listing.ts","src/components/pages/listing/listing.css?tag=ks-page-listing","src/components/pages/listing/listing.tsx"],"sourcesContent":["import { createStore } from \"@stencil/store\";\nimport { InfoBannerData, ReviewAverage } from \"./common\";\nimport { CategoryNameData } from \"./product\";\n\nexport const listing = createStore({} as ListingData);\n\nexport interface ListingData {\n    type: string;\n    compare: boolean;\n\n    title: string;\n    sorting: number;\n    autocorrect: string;\n    query: string;\n    description: string;\n    bottomDescription: string;\n\n    theme: string;\n    info: ListingInfoData;\n\n    infoBanner: InfoBannerData;\n    breadcrumbs: NameLinkData[];\n    categories: NameLinkData[];\n    tags: NameLinkData[];\n    products: ProductCardData[];\n    infocards: InfoCardData[];\n\n    navigation: ListingNavigationData;\n    filters: ListingFilterData[];\n\n    noContentHeading: string;\n    noContentMessage: string;\n    reviewAverage: ReviewAverage;\n}\n\nexport interface ListingInfoData {\n    image: string;\n    webp: string;\n    width: number;\n    height: number;\n    \n    heading: string;\n    paragraph: string;\n    button: string;\n    link: string;\n}\n\nexport interface InfoCardData {\n    image: string;\n    webp: string;\n    text: string;\n}\n\nexport interface NameLinkData {\n    id: string;\n    name: string;\n    link: string;\n}\n\nexport interface ListingNavigationData {\n    count: number;\n    current: number;\n    products: number;\n    base: string;\n    paginationBase: string;\n    pattern: string;\n}\n\nexport interface ListingFilterData {\n    name: string;\n    category: string;\n    type: string;\n    active: boolean;\n    items: (ListingFilterCheckboxData|ListingFilterSliderData)[];\n}\n\nexport interface ListingFilterCheckboxData {\n    name: string;\n    value: string;\n    content: string;\n    active: boolean;\n}\n\nexport interface ListingFilterSliderData {\n    name: string;\n    values: string;\n    snap: boolean;\n    steps?: string;\n    from?: number;\n    to?: number;\n}\n\nexport interface ProductCardData {\n    id: string;\n    sku: string;\n    name: string;\n    link: string;\n    image: string;\n    imageFull: string;\n    webp: string;\n    unavailable?: boolean;\n    currentPrice: number;\n    previousPrice?: number;\n    lastPrice?: number;\n    shippingMessage?: string;\n    currency: string;\n    categories: CategoryNameData[];\n    breadcrumbs: CategoryNameData[];\n    brandName: string;\n}","ks-page-listing {\n    flex: 1 1 0;\n}\n\nks-page-listing .noresults {\n    width: auto;\n    max-height: 300px\n}","import { Component, h, Prop } from '@stencil/core';\nimport { common } from '../../../global/data/common';\nimport { listing, ListingData } from \"../../../global/data/listing\";\nimport { DataLayer } from '../../../global/dataLayer';\n\n@Component({\n    tag: 'ks-page-listing',\n    styleUrl: 'listing.css'\n})\nexport class PageListing {\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() listingData: string;\n\n    componentWillLoad() {\n        const listingDataElement = document.getElementById(this.listingData);\n\t\tconst listingData = JSON.parse(listingDataElement.innerHTML) as ListingData;\n\n        Object.keys(listingData).map(key => {\n\t\t\tlisting.set(key as keyof ListingData, listingData[key]);\n\t\t});\n\n        this.track();\n    }\n\n    track() {\n        if(!listing.get('query')) {\n            DataLayer.listing(listing.state);\n        }\n    }\n\n\trender() {\n        if(!listing?.get('title')) return false;\n\n        const bottomDescription = listing.get('bottomDescription');\n        const infoBanner = listing.get(\"infoBanner\");\n        const tags = listing.get('tags');\n        const navigation = listing.get('navigation');\n        const filters = listing.get('filters');\n        const products = listing.get('products');\n        const query = listing.get('query');\n        const review = listing.get('reviewAverage');\n        const infocards = listing.get('infocards');\n        const info = listing.get('info');\n\n        const strings = common.get('translations');\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n\n            {infoBanner ? \n                <ks-content-info-banner content={infoBanner} />\n            : null}\n\n            <ks-listing-header\n                heading={listing.get('title')}\n                breadcrumbs={listing.get('breadcrumbs')}\n                description={listing.get('description')}\n                categories={listing.get('categories')}\n                query={query}\n                autocorrect={listing.get('autocorrect')}\n                theme={listing.get('theme')}\n            />\n\n            {info ? <ks-listing-info data={info} /> : null}\n\n            {navigation && products?.length > 0 ?\n                <ks-listing-navigation products={navigation.products}>\n                    \n                    {filters?.length > 0 ?\n                        <ks-filtering base-url={navigation.base} query={query} filters={filters} />\n                    : null}\n\n                    <ks-sorting post={navigation.paginationBase} current={listing.get('sorting')}></ks-sorting>\n                    <ks-pagination count={navigation.count} current={navigation.current} base={navigation.paginationBase} pattern={navigation.pattern} />\n                </ks-listing-navigation>\n            : null}\n\n            {products?.length > 0 ?\n                <ks-product-container>\n                    {products.map(card => \n                        <ks-product-card product={card} flat compare={listing.get(\"compare\")}/>\n                    )}\n                </ks-product-container>\n            : \n                <ks-nocontent\n                    link-name={strings.noContentHome}\n                    back-name={strings.noContentBack}\n                >\n                    <h1>{listing.get('noContentHeading')}</h1>\n                    <p>{listing.get('noContentMessage')}</p>\n                </ks-nocontent>\n            }\n\n            {navigation && products?.length > 0 ?\n                <ks-listing-navigation products={navigation.products}>\n                    <ks-pagination count={navigation.count} current={navigation.current} base={navigation.paginationBase} pattern={navigation.pattern} />\n                </ks-listing-navigation>\n            : null}\n\n            {infocards?.length > 0 ?\n                <ks-info-cards data={infocards} />\n            : null}\n\n            { bottomDescription || tags?.length > 0 ?\n                <ks-listing-footer description={bottomDescription}>\n                    {tags?.length > 0 ?\n                        <div slot=\"tags\">\n                            {tags.map(crumb =>\n                                <a href={crumb.link}>{crumb.name}</a>\n                            )}\n                        </div>\n                    : null}\n\n                    {!query && navigation && products?.length > 0 && review ?\n                        <ks-content-reviews content={review} slot=\"comments\" grey />\n                    : null}\n                </ks-listing-footer>\n\n            : !query && navigation && products?.length > 0 && review ?\n                <ks-content-reviews content={review} />\n            : null }\n\n            {listing.get(\"compare\") ? <ks-compare-popup /> : null}\n        </ks-page-base>;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}