{"version":3,"file":"ks-order-confirmation-form.entry.esm.js","sources":["src/components/order/confirmation/orderConfirmationForm.tsx"],"sourcesContent":["import { Component, h, Prop, State, Element } from '@stencil/core';\n\n@Component({\n      tag: 'ks-order-confirmation-form'\n})\nexport class OrderForm {\n\n    @Prop() action: string;\n    @Prop() method: string;\n    @Prop() submitString: string;\n\n    @Element() root: HTMLElement;\n\n    @State() loading: boolean = false;\n\n\trender() {\n\n\t\treturn(\n            <form action={this.action} method={this.method} onSubmit={(event)=>this.Submit(event)}>\n                <slot/>\n\n                <div class=\"uk-position-relative\">\n                    <button type=\"submit\" formnovalidate\n                        class=\"uk-button uk-button-danger uk-width-1-1 uk-width-expand@m ks-text-decorated\"\n                        style={{fontSize: \"28px\", fontWeight: \"700\", padding: \"20px\"}}>\n                        \n                        {this.submitString}\n                    </button>\n\n                    {this.loading ?\n                        <div class=\"uk-overlay uk-light uk-padding-remove uk-position-cover uk-animation-fade\"\n                            style={{animationDuration: \"0.3s\", backgroundColor: \"#e21334\"}}>\n                            <div uk-spinner=\"ratio: 1.5\" class=\"uk-position-center\"></div>\n                        </div>\n                    : null}\n                </div>\n\n                <ks-order-form-modal></ks-order-form-modal>\n            </form>\n\t\t);\n    }\n\n    async Submit(event: Event) {\n        event.preventDefault();\n\n        const form = this.root.querySelector(\"form\");\n        const inputs = form.querySelectorAll(\"ks-input-dynamic, ks-order-document-select, ks-input-text, ks-input-textarea, ks-input-check, ks-order-inpost, ks-order-pocztapunkt, ks-order-dpd\");\n\n        let highestPosition = Number.MAX_VALUE;\n\n        let valid = true;\n        for (let i = 0; i < inputs.length; i++) {\n            const input = inputs[i] as any;\n            \n            if(input.closest(\"ks-input-dynamic *\") != null) continue;\n\n            await input.Validate();\n            if(!await input.IsValid()) {\n                const inputTop = (input as HTMLElement).getBoundingClientRect().top\n                    - document.body.getBoundingClientRect().top;\n\n                if(inputTop < highestPosition)\n                    highestPosition = inputTop;\n\n                valid = false;\n            }\n        }\n\n        if(valid) {\n            this.loading = true;\n            form.submit();\n        }\n\n        else {\n            try {\n                window.scroll({top: highestPosition -100, behavior: \"smooth\"});\n            }\n            catch(error) {\n                window.scroll(0, highestPosition -100);\n            }\n        }\n    }\n\n    ShowPrompt(message: string) {\n        const prompt = this.root.querySelector(\"ks-order-form-modal\") as any;\n        prompt.setAttribute(\"message\", message);\n        prompt.Show();\n    }\n}\n"],"names":[],"mappings":"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"}