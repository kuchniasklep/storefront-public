import{j as n}from"./fetch-7fa5b910.js";import{c as o}from"./commonDynamic-5e51121d.js";var t=new AbortController;function i(){const t=o.get("api").inpostFrontend;return n(`${t}/getbinding`,{}).then((n=>n.json()))}function r(n){window.iziCanBeBound(n).then((o=>o?window.iziAddToCart(n):null))}window.iziGetPayData=(i,r,e)=>{const c=o.get("api").inpostFrontend,a=window.iziGetBrowserData();return n(`${c}/getpaydata`,{browser:a,phonePrefix:i,phoneNumber:r,bindingPlace:e}).then((n=>n.json())).then((()=>t.abort()))},window.iziGetIsBound=()=>{const i=o.get("api").inpostFrontend;return t.abort(),t=new AbortController,async function(n,o=0,t=200){const i=async(r,e,c)=>{if(o>0&&c>=o)return void e();const a=await n();a&&0!==Object.keys(a).length?r(a):setTimeout((()=>i(r,e,c+1)),t)};return new Promise(((n,o)=>i(n,o,0)))}((()=>n(`${i}/isbound`,{},t.signal).then((n=>n.json())).catch((()=>null))),30)},window.iziGetOrderComplete=()=>Promise.resolve({action:"string",redirect:"string"}),window.iziBindingDelete=()=>{const i=o.get("api").inpostFrontend;return n(`${i}/bindingdelete`,{}).then((n=>n.json())).then((()=>t.abort()))},window.iziCanBeBound=t=>{const i=o.get("api").inpostFrontend;return n(`${i}/canbebound`,{product_id:t}).then((n=>n.json()))},window.iziAddToCart=t=>{const i=o.get("api").inpostFrontend;return n(`${i}/addtocart`,{product_id:t}).then((n=>n.json())).then((n=>function(n){console.log("InpostUpdateCount");const o=new CustomEvent("inpost-update-count",{detail:n});Array.from(document.getElementsByTagName("inpost-izi-button")).forEach((n=>n.dispatchEvent(o)))}(n.product_count)))},window.iziMobileLink=()=>{const t=o.get("api").inpostFrontend;return n(`${t}/mobilelink`,{}).then((n=>n.json()))};export{r as C,i}