{"version":3,"file":"ks-page-favourites.entry.esm.js","sources":["src/global/data/favourites.ts","src/components/pages/favourites/favourites.css?tag=ks-page-favourites","src/components/pages/favourites/favourites.tsx"],"sourcesContent":["import { createStore } from \"@stencil/store\";\nimport { ProductCardData } from \"./listing\";\n\nexport const favourites = createStore({} as FavouritesData);\n\nexport interface FavouritesData {\n    value: number;\n    valueString: string;\n    removeAllString: string;\n\n    emptyHeading: string;\n    emptyButton: string;\n\n    descriptions: {[index: string]: string};\n    products: ProductCardData[];\n}","ks-page-favourites .container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex: 1 1 auto;\n}\n\nks-page-favourites .favourites-container {\n    max-width: 100%;\n    width: 1000px;\n    box-sizing: border-box;\n    padding: 30px;\n    margin: 30px 0px;\n    background-color: #fff;\n    border-radius: 10px;\n}\n\nks-page-favourites .favourites-header {\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n}\n\nks-page-favourites .favourites-header .removeAll {\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n}\n\nks-page-favourites .favourites-header > span {\n    font-size: 26px;\n    line-height: 26px;\n    font-weight: 700;\n    font-family: var(--font-emphasis);\n    white-space: nowrap;\n}\n\nks-page-favourites .favourites-header h1 {\n    width: 100%;\n    margin: 0px;\n    font-size: 24px;\n}\n\nks-page-favourites .favourites-header .value {\n    color: var(--color-secondary);\n}\n\nks-page-favourites .product-container {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    margin-top: 20px;\n}\n\nks-page-favourites .empty {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    flex: 1 0 auto;\n    min-height: 320px;\n    padding: 40px 40px;\n}\n\nks-page-favourites .empty h1 {\n    font-size: 20px;\n    font-weight: 700;\n    margin-bottom: 30px;\n}\n\nks-page-favourites .empty ks-button {\n    max-width: 300px;\n    width: 100%;\n}\n\n\n@media (max-width: 1060px) {\n    ks-page-favourites {\n        background-color: #fff;\n    }\n}\n\n@media screen and (max-width: 550px) {\n    ks-page-favourites .favourites-header h1 {\n        text-align: center;\n    }\n\n    ks-page-favourites .favourites-header {\n        flex-wrap: wrap;\n        justify-content: center;\n    }\n\n    ks-page-favourites .favourites-header > span {\n        font-size: 20px;\n        line-height: 20px;\n    }\n\n    ks-page-favourites .favourites-header .removeAll {\n        justify-content: center;\n        width: 100%;\n        margin-top: 10px;\n    }\n    \n}","import { Component, h, Prop, State } from '@stencil/core';\nimport { favourites, FavouritesData } from \"../../../global/data/favourites\";\nimport { removeAllFavourites } from \"../../../global/functions/favourites\";\nimport priceFormat from '../../../global/functions/price';\n\ndeclare global { interface Window { dataLayer: any[] }}\n\n@Component({\n    tag: 'ks-page-favourites',\n    styleUrl: 'favourites.css'\n})\nexport class PageRecipe{\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() favouritesData: string;\n    @State() removeAllLoading: boolean = false;\n\n    componentWillLoad() {\n        const favouritesDataElement = document.getElementById(this.favouritesData);\n\t\tconst favouritesData = JSON.parse(favouritesDataElement.innerHTML) as FavouritesData;\n\n        Object.keys(favouritesData).map(key => {\n\t\t\tfavourites.set(key as keyof FavouritesData, favouritesData[key]);\n\t\t});\n    }\n\n    removeAll() {\n        if(this.removeAllLoading) return;\n        this.removeAllLoading = true;\n    \n        removeAllFavourites().then(() => {\n            location.reload();\n        });\n    }\n\n\trender() {\n        const products = favourites.get('products');\n        const descriptions = favourites.get('descriptions');\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n            <div class=\"container\">\n                {products?.length > 0 ?\n                    <div class=\"favourites-container\">\n                        <div class=\"favourites-header\">\n                            <h1>{favourites.get('valueString')} {priceFormat(favourites.get('value'))}</h1>\n                            <div class=\"removeAll\">\n                                <ks-button rounded\n                                    name={favourites.get('removeAllString')}\n                                    loading={this.removeAllLoading}\n                                    onClick={()=>this.removeAll()}\n                                />\n                            </div>\n                        </div>\n\n                        <div class=\"product-container\">\n                            {products?.map(card =>\n                                <ks-product-fav-card summary={descriptions[card.id]} product={card} />\n                            )}\n                        </div>\n                    </div>\n                :\n                    <div class=\"empty\">\n                        <h1>{favourites.get('emptyHeading')}</h1>\n                        <ks-button round border name={favourites.get('emptyButton')} link=\"/\" />\n                    </div>\n                }\n            </div>\n        </ks-page-base>;\n\t}\n}\n"],"names":[],"mappings":";;;;;;;;;AAGO,MAAM,UAAU,GAAG,WAAW,CAAC,EAAoB,CAAC;;ACH3D,MAAM,aAAa,GAAG,w7DAAw7D;;MCWj8D,UAAU,GAAA,MAAA;AAJvB,IAAA,WAAA,CAAA,OAAA,EAAA;;AAUa,QAAA,IAAgB,CAAA,gBAAA,GAAY,KAAK;AAsD7C;IApDG,iBAAiB,GAAA;QACb,MAAM,qBAAqB,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC;QAChF,MAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,SAAS,CAAmB;QAE9E,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,GAAG,IAAG;YAC3C,UAAU,CAAC,GAAG,CAAC,GAA2B,EAAE,cAAc,CAAC,GAAG,CAAC,CAAC;AACjE,SAAC,CAAC;;IAGA,SAAS,GAAA;QACL,IAAG,IAAI,CAAC,gBAAgB;YAAE;AAC1B,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI;AAE5B,QAAA,mBAAmB,EAAE,CAAC,IAAI,CAAC,MAAK;YAC5B,QAAQ,CAAC,MAAM,EAAE;AACrB,SAAC,CAAC;;IAGT,MAAM,GAAA;QACC,MAAM,QAAQ,GAAG,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC;QAC3C,MAAM,YAAY,GAAG,UAAU,CAAC,GAAG,CAAC,cAAc,CAAC;QAEzD,OAAO,qEAAc,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,EAAA,EAC1G,CAAK,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,WAAW,EACjB,EAAA,QAAQ,EAAE,MAAM,GAAG,CAAC;AACjB,YAAA,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,sBAAsB,EAAA,EAC7B,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,mBAAmB,EAAA,EAC1B,CAAA,CAAA,IAAA,EAAA,IAAA,EAAK,UAAU,CAAC,GAAG,CAAC,aAAa,CAAC,OAAG,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAM,EAC/E,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,WAAW,EAAA,EAClB,CAAA,CAAA,WAAA,EAAA,EAAW,OAAO,EAAA,IAAA,EACd,IAAI,EAAE,UAAU,CAAC,GAAG,CAAC,iBAAiB,CAAC,EACvC,OAAO,EAAE,IAAI,CAAC,gBAAgB,EAC9B,OAAO,EAAE,MAAI,IAAI,CAAC,SAAS,EAAE,EAC/B,CAAA,CACA,CACJ,EAEN,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,mBAAmB,EAAA,EACzB,QAAQ,EAAE,GAAG,CAAC,IAAI,IACf,CAAqB,CAAA,qBAAA,EAAA,EAAA,OAAO,EAAE,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,EAAA,CAAI,CACzE,CACC;;gBAGV,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,OAAO,EAAA,EACd,CAAA,CAAA,IAAA,EAAA,IAAA,EAAK,UAAU,CAAC,GAAG,CAAC,cAAc,CAAC,CAAM,EACzC,CAAW,CAAA,WAAA,EAAA,EAAA,KAAK,QAAC,MAAM,EAAA,IAAA,EAAC,IAAI,EAAE,UAAU,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,IAAI,EAAC,GAAG,GAAG,CACtE,CAER,CACK;;;;;;;"}