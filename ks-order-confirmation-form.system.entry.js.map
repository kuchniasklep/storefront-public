{"version":3,"names":["OrderForm","exports","class_1","hostRef","this","loading","prototype","render","_this","h","key","action","method","onSubmit","event","Submit","class","type","formnovalidate","style","fontSize","fontWeight","padding","submitString","animationDuration","backgroundColor","preventDefault","form","root","querySelector","inputs","querySelectorAll","highestPosition","Number","MAX_VALUE","valid","i","length","input","closest","Validate","_a","sent","IsValid","inputTop","getBoundingClientRect","top","document","body","submit","window","scroll","behavior","error","ShowPrompt","message","prompt","setAttribute","Show"],"sources":["src/components/order/confirmation/orderConfirmationForm.tsx"],"sourcesContent":["import { Component, h, Prop, State, Element } from '@stencil/core';\n\n@Component({\n      tag: 'ks-order-confirmation-form'\n})\nexport class OrderForm {\n    @Prop() action: string;\n    @Prop() method: string;\n    @Prop() submitString: string;\n\n    @Element() root: HTMLElement;\n\n    @State() loading: boolean = false;\n\n\trender() {\n\n\t\treturn(\n            <form action={this.action} method={this.method} onSubmit={(event)=>this.Submit(event)}>\n                <slot/>\n\n                <div class=\"uk-position-relative\">\n                    <button type=\"submit\" formnovalidate\n                        class=\"uk-button uk-button-danger uk-width-1-1 uk-width-expand@m ks-text-decorated\"\n                        style={{fontSize: \"28px\", fontWeight: \"700\", padding: \"20px\"}}>\n                        \n                        {this.submitString}\n                    </button>\n\n                    {this.loading ?\n                        <div class=\"uk-overlay uk-light uk-padding-remove uk-position-cover uk-animation-fade\"\n                            style={{animationDuration: \"0.3s\", backgroundColor: \"#e21334\"}}>\n                            <div uk-spinner=\"ratio: 1.5\" class=\"uk-position-center\"></div>\n                        </div>\n                    : null}\n                </div>\n\n                <ks-order-form-modal></ks-order-form-modal>\n            </form>\n\t\t);\n    }\n\n    async Submit(event: Event) {\n        event.preventDefault();\n\n        const form = this.root.querySelector(\"form\");\n        const inputs = form.querySelectorAll(\"ks-input-dynamic, ks-order-document-select, ks-input-text, ks-input-textarea, ks-input-check, ks-order-inpost, ks-order-pocztapunkt, ks-order-dpd\");\n\n        let highestPosition = Number.MAX_VALUE;\n\n        let valid = true;\n        for (let i = 0; i < inputs.length; i++) {\n            const input = inputs[i] as any;\n            \n            if(input.closest(\"ks-input-dynamic *\") != null) continue;\n\n            await input.Validate();\n            if(!await input.IsValid()) {\n                const inputTop = (input as HTMLElement).getBoundingClientRect().top\n                    - document.body.getBoundingClientRect().top;\n\n                if(inputTop < highestPosition)\n                    highestPosition = inputTop;\n\n                valid = false;\n            }\n        }\n\n        if(valid) {\n            this.loading = true;\n            form.submit();\n        }\n\n        else {\n            try {\n                window.scroll({top: highestPosition -100, behavior: \"smooth\"});\n            }\n            catch(error) {\n                window.scroll(0, highestPosition -100);\n            }\n        }\n    }\n\n    ShowPrompt(message: string) {\n        const prompt = this.root.querySelector(\"ks-order-form-modal\") as any;\n        prompt.setAttribute(\"message\", message);\n        prompt.Show();\n    }\n}\n"],"mappings":"wmDAKaA,EAASC,EAAA,wCAHtB,SAAAC,EAAAC,G,UAUaC,KAAOC,QAAY,KA2E/B,CAzEAH,EAAAI,UAAAC,OAAA,eAAAC,EAAAJ,KAEC,OACUK,EAAM,QAAAC,IAAA,2CAAAC,OAAQP,KAAKO,OAAQC,OAAQR,KAAKQ,OAAQC,SAAU,SAACC,GAAQ,OAAAN,EAAKO,OAAOD,EAAZ,GAC/DL,EAAO,QAAAC,IAAA,6CAEPD,EAAK,OAAAC,IAAA,2CAAAM,MAAM,wBACPP,EAAA,UAAAC,IAAA,2CAAQO,KAAK,SAASC,eAAc,KAChCF,MAAM,8EACNG,MAAO,CAACC,SAAU,OAAQC,WAAY,MAAOC,QAAS,SAErDlB,KAAKmB,cAGTnB,KAAKC,QACFI,EAAA,OAAKO,MAAM,4EACPG,MAAO,CAACK,kBAAmB,OAAQC,gBAAiB,YACpDhB,EAAA,oBAAgB,aAAaO,MAAM,wBAEzC,MAGNP,EAA2C,uBAAAC,IAAA,6C,EAKjDR,EAAAI,UAAAS,OAAN,SAAaD,G,8HACTA,EAAMY,iBAEAC,EAAOvB,KAAKwB,KAAKC,cAAc,QAC/BC,EAASH,EAAKI,iBAAiB,qJAEjCC,EAAkBC,OAAOC,UAEzBC,EAAQ,KACHC,EAAI,E,sBAAGA,EAAIN,EAAOO,QAAM,YACvBC,EAAQR,EAAOM,GAErB,GAAGE,EAAMC,QAAQ,uBAAyB,KAAM,YAEhD,SAAMD,EAAME,Y,OAAZC,EAAAC,OACI,SAAMJ,EAAMK,W,OAAhB,IAAIF,EAAAC,OAAuB,CACjBE,EAAYN,EAAsBO,wBAAwBC,IAC1DC,SAASC,KAAKH,wBAAwBC,IAE5C,GAAGF,EAAWZ,EACVA,EAAkBY,EAEtBT,EAAQ,K,kBAbmBC,I,mBAiBnC,GAAGD,EAAO,CACN/B,KAAKC,QAAU,KACfsB,EAAKsB,Q,KAGJ,CACD,IACIC,OAAOC,OAAO,CAACL,IAAKd,EAAiB,IAAKoB,SAAU,U,CAExD,MAAMC,GACFH,OAAOC,OAAO,EAAGnB,EAAiB,I,oBAK9C9B,EAAAI,UAAAgD,WAAA,SAAWC,GACP,IAAMC,EAASpD,KAAKwB,KAAKC,cAAc,uBACvC2B,EAAOC,aAAa,UAAWF,GAC/BC,EAAOE,M,yHAhFO,G","ignoreList":[]}