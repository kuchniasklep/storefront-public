{"version":3,"names":["productFavCardCss","ProductCard","exports","class_1","hostRef","this","unavailable","linkOnly","cartLoading","favLoading","favSuccess","prototype","cart","_this","product","id","traitIDs","sku","brandName","name","link","image","imageFull","currentPrice","quantity","currency","categories","breadcrumbs","addToCart","then","favourites","removeFromFavourites","location","reload","render","translations","common","get","priceFormat","previousPrice","h","key","href","class","fill","limit","center","src","webp","width","height","alt","summary","onClick","disabled"],"sources":["src/components/listing/product-fav-card.css?tag=ks-product-fav-card","src/components/listing/product-fav-card.tsx"],"sourcesContent":["\nks-product-fav-card {\n    display: flex;\n    align-items: stretch;\n    flex-wrap: nowrap;\n}\n\nks-product-fav-card > a {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n\n    text-decoration: none !important;\n    color: #000 !important;\n}\n\nks-product-fav-card .image {\n    max-height: 180px;\n    max-width: 180px;\n    margin-right: 20px;\n}\n\nks-product-fav-card h3 {\n    font-family: var(--font-emphasis);\n    margin-bottom: 5px;\n    font-size: 20px;\n}\n\nks-product-fav-card p {\n    font-size: 15px;\n}\n\nks-product-fav-card .price {\n    font-size: 18px;\n    font-family: var(--font-emphasis);\n}\n\nks-product-fav-card .price .current {\n    font-weight: 700;\n    color: var(--color-secondary);\n}\n\nks-product-fav-card .price .previous {\n    margin: 0px 10px;\n    color: #909090\n}\n\nks-product-fav-card .buttons {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    padding: 10px 0px;\n    margin-left: 10px;\n}\n\nks-product-fav-card .buttons button {\n    background-color: var(--color-secondary);\n    color: white;\n    border-style: none;\n    width: 50px;\n    height: 100%;\n    position: relative;\n\n    transition: background-color 0.3s ease;\n}\n\nks-product-fav-card .buttons button:hover {\n    background-color: var(--color-secondary-hover);\n}\n\nks-product-fav-card .buttons button:active {\n    background-color: var(--color-secondary-active);\n}\n\nks-product-fav-card .buttons .cart {\n    border-top: solid 1px var(--color-secondary-darker);\n}\n\nks-product-fav-card .buttons .cart span {\n    display: none;\n}\n\nks-product-fav-card[unavailable] .buttons .cart {\n    border-top: none;\n    background-color: var(--color-faded);\n    color: var(--color-faded-text);\n}\n\n\n@media screen and (max-width: 750px) {\n    ks-product-fav-card p {\n        display: none;\n    }\n}\n\n@media screen and (max-width: 550px) {\n    ks-product-fav-card {\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n    }\n\n    ks-product-fav-card > a {\n        flex-direction: column;\n        align-items: center;\n    }\n\n    ks-product-fav-card .image {\n        margin: 0;\n    }\n\n    ks-product-fav-card .buttons {\n        flex-direction: row;\n        margin: 0;\n        width: 100%;\n    }\n\n    ks-product-fav-card .buttons button {\n        height: 40px;\n    }\n\n    ks-product-fav-card .buttons .fav {\n        flex: 1 0 40px;\n        width: 40px;\n        border-radius: 100px;\n        margin-right: 5px;\n    }\n\n    ks-product-fav-card .buttons .cart {\n        width: 100%;\n        border-radius: 10px;\n    }\n\n    ks-product-fav-card .buttons .cart ks-icon {\n        display: none;\n    }\n\n    ks-product-fav-card .buttons .cart span {\n        display: inline;\n    }\n}","import { Component, h, Prop, State } from '@stencil/core';\nimport { addToCart } from '../../global/functions/addToCart';\nimport { removeFromFavourites } from '../../global/functions/favourites';\nimport { ProductShortData } from '../../global/data/product';\nimport { ProductCardData } from '../../global/data/listing';\nimport { common } from '../../global/data/common';\nimport priceFormat from '../../global/functions/price';\n\n@Component({\n  tag: 'ks-product-fav-card',\n  styleUrl: 'product-fav-card.css'\n})\nexport class ProductCard {\n  @Prop({reflect: true}) unavailable: boolean = false;\n  @Prop() linkOnly: boolean = false;\n  @Prop() summary: string;\n  \n  @Prop() product: ProductCardData;\n\n  @State() cartLoading: boolean = false;\n  @State() favLoading: boolean = false;\n  @State() favSuccess: boolean = false;\n\n  cart() {\n    this.cartLoading = true;\n    \n    const product: ProductShortData = {\n      id: this.product.id,\n      traitIDs: \"\",\n      sku: this.product.sku,\n      brandName: this.product.brandName,\n      name: this.product.name,\n      link: this.product.link,\n      image: this.product.image,\n      imageFull: this.product.imageFull,\n      currentPrice: this.product.currentPrice,\n      quantity: 1,\n      currency: this.product.currency,\n      categories: this.product.categories,\n      breadcrumbs: this.product.breadcrumbs\n    };\n\n    addToCart(product, 1)\n      .then(() => this.cartLoading = false);\n  }\n\n  favourites() {\n    if(this.favLoading) return;\n    this.favLoading = true;\n\n    removeFromFavourites(this.product.id).then(() => {\n        location.reload()\n    });\n  }\n\n  render() {\n    const translations = common.get('translations');\n    const currentPrice = priceFormat(this.product.currentPrice);\n    const previousPrice = priceFormat(this.product.previousPrice);\n\n    return[\n        <a href={this.product.link} aria-label={this.product.name}>\n            <div class=\"image\">\n              <ks-img2 fill limit center src={this.product.image} webp={this.product.webp} width={280} height={280} alt={this.product.name} />\n            </div>\n            <div class=\"info\">\n                <h3>{this.product.name}</h3>\n                <div class=\"price\">\n                    <span class=\"current\">{currentPrice}</span>\n                    {this.product.previousPrice ? <s class=\"previous\">{previousPrice}</s> : null}\n                </div>\n                {this.summary ? <p>{this.summary}</p> : null}\n            </div>\n        </a>,\n\n        <div class=\"buttons\">\n            <button class=\"fav\" onClick={()=>this.favourites()}>\n                { this.favLoading ? <ks-loader /> : <ks-icon name=\"x\" /> }\n            </button>\n\n            <button disabled={this.unavailable} class=\"cart\" onClick={()=>this.cart()}>\n                { this.cartLoading ? <ks-loader /> : [\n                  <ks-icon name=\"shopping-bag\" />,\n                  <span>{this.unavailable ? translations.unavailable : translations.addToCart}</span>\n                ]}\n            </button>\n        </div>\n    ];\n  }\n}\n"],"mappings":"ofAAA,IAAMA,EAAoB,q4E,ICYbC,EAAWC,EAAA,iCAJxB,SAAAC,EAAAC,G,UAKyBC,KAAWC,YAAY,MACtCD,KAAQE,SAAY,MAKnBF,KAAWG,YAAY,MACvBH,KAAUI,WAAY,MACtBJ,KAAUK,WAAY,KAoEhC,CAlECP,EAAAQ,UAAAC,KAAA,eAAAC,EAAAR,KACEA,KAAKG,YAAc,KAEnB,IAAMM,EAA4B,CAChCC,GAAIV,KAAKS,QAAQC,GACjBC,SAAU,GACVC,IAAKZ,KAAKS,QAAQG,IAClBC,UAAWb,KAAKS,QAAQI,UACxBC,KAAMd,KAAKS,QAAQK,KACnBC,KAAMf,KAAKS,QAAQM,KACnBC,MAAOhB,KAAKS,QAAQO,MACpBC,UAAWjB,KAAKS,QAAQQ,UACxBC,aAAclB,KAAKS,QAAQS,aAC3BC,SAAU,EACVC,SAAUpB,KAAKS,QAAQW,SACvBC,WAAYrB,KAAKS,QAAQY,WACzBC,YAAatB,KAAKS,QAAQa,aAG5BC,EAAUd,EAAS,GAChBe,MAAK,WAAM,OAAAhB,EAAKL,YAAc,KAAnB,G,EAGhBL,EAAAQ,UAAAmB,WAAA,WACE,GAAGzB,KAAKI,WAAY,OACpBJ,KAAKI,WAAa,KAElBsB,EAAqB1B,KAAKS,QAAQC,IAAIc,MAAK,WACvCG,SAASC,QACb,G,EAGF9B,EAAAQ,UAAAuB,OAAA,eAAArB,EAAAR,KACE,IAAM8B,EAAeC,EAAOC,IAAI,gBAChC,IAAMd,EAAee,EAAYjC,KAAKS,QAAQS,cAC9C,IAAMgB,EAAgBD,EAAYjC,KAAKS,QAAQyB,eAE/C,MAAM,CACFC,EAAA,KAAAC,IAAA,2CAAGC,KAAMrC,KAAKS,QAAQM,KAAI,aAAcf,KAAKS,QAAQK,MACjDqB,EAAK,OAAAC,IAAA,2CAAAE,MAAM,SACTH,EAAA,WAAAC,IAAA,2CAASG,KAAK,KAAAC,MAAM,KAAAC,OAAM,KAACC,IAAK1C,KAAKS,QAAQO,MAAO2B,KAAM3C,KAAKS,QAAQkC,KAAMC,MAAO,IAAKC,OAAQ,IAAKC,IAAK9C,KAAKS,QAAQK,QAE1HqB,EAAK,OAAAC,IAAA,2CAAAE,MAAM,QACPH,EAAA,MAAAC,IAAA,4CAAKpC,KAAKS,QAAQK,MAClBqB,EAAK,OAAAC,IAAA,2CAAAE,MAAM,SACPH,EAAA,QAAAC,IAAA,2CAAME,MAAM,WAAWpB,GACtBlB,KAAKS,QAAQyB,cAAgBC,EAAG,KAAAG,MAAM,YAAYJ,GAAqB,MAE3ElC,KAAK+C,QAAUZ,EAAI,SAAAnC,KAAK+C,SAAe,OAIhDZ,EAAK,OAAAC,IAAA,2CAAAE,MAAM,WACPH,EAAA,UAAAC,IAAA,2CAAQE,MAAM,MAAMU,QAAS,WAAI,OAAAxC,EAAKiB,YAAL,GAC3BzB,KAAKI,WAAa+B,EAAa,kBAAGA,EAAS,WAAArB,KAAK,OAGtDqB,EAAA,UAAAC,IAAA,2CAAQa,SAAUjD,KAAKC,YAAaqC,MAAM,OAAOU,QAAS,WAAI,OAAAxC,EAAKD,MAAL,GACxDP,KAAKG,YAAcgC,EAAa,kBAAG,CACnCA,EAAS,WAAArB,KAAK,iBACdqB,EAAA,YAAOnC,KAAKC,YAAc6B,EAAa7B,YAAc6B,EAAaP,c,WAvE5D,I","ignoreList":[]}