var o;!function(o){function e(o){return o.includes("http")?o:document.baseURI+o}function r(...o){o.map(((o,e)=>({item_id:o.id,item_name:o.name,currency:o.currency,index:e,price:o.currentPrice})))}o.pageview=async function(o,e){var r;const t=o.customer,c=o.loggedIn&&t;null===(r=window.dataLayer)||void 0===r||r.push({event:"ks.pageview",facebookEventId:e,customerDataAvailable:c,customerEmail:c?t.email:void 0,customerFirstName:c?t.firstName:void 0,customerLastName:c?t.lastName:void 0,customerSubscriberStatus:c?t.subscriber?1:0:void 0,customerCountryISO2:c?t.countryISO2:void 0,customerCity:c?t.city:void 0,customerPhone:c?t.phone:void 0,customerCurrency:c?t.currency:void 0})},o.product=async function(o,t=""){var c,n;const u=o.breadcrumbs;null===(c=window.dataLayer)||void 0===c||c.push({event:"ks.product",facebookEventId:t,productId:o.id,productName:o.name,productPrice:o.currentPrice,productCurrency:o.currency,productImage:(null==o?void 0:o.images.length)>0?e(o.images[0].full.url):void 0,productURL:e(document.location.href),productSKU:o.model,productBrand:o.brand.name,productCategory:u[u.length-1].name,productAvailability:o.shippingTime,productQuantity:o.availability,productCategories:o.categories,ecommerce:{items:r(o)}}),null===(n=window.dataLayer)||void 0===n||n.push({ecomm_prodid:o.id,ecomm_pagetype:"product",ecomm_totalvalue:o.currentPrice})},o.listing=async function(o){var e;null===(e=window.dataLayer)||void 0===e||e.push({event:"ks.listing",categories:o.breadcrumbs.filter((o=>"0"!=o.id)),ecommerce:{items:r(...o.products)}})},o.addToCart=async function(o,t){var c;null===(c=window.dataLayer)||void 0===c||c.push({event:"ks.addToCart",facebookEventId:t,productId:o.id,productName:o.name,productPrice:o.currentPrice,productCurrency:o.currency,productQuantity:o.quantity,productImage:e(o.imageFull),productURL:e(o.link),productSKU:o.sku,productCategories:o.categories,ecommerce:{items:r(o)}})},o.removeFromCart=async function(o){var t;null===(t=window.dataLayer)||void 0===t||t.push({event:"ks.removeFromCart",productId:o.id,productName:o.name,productPrice:o.currentPrice,productCurrency:o.currency,productQuantity:o.quantity,productImage:e(o.imageFull),productURL:e(o.link),productSKU:o.sku,productCategories:o.categories,ecommerce:{items:r(o)}})},o.order_checkout=async function(o,e){var t;null===(t=window.dataLayer)||void 0===t||t.push({event:"ks.checkout",facebookEventId:e,orderProducts:o.products,orderProductValue:o.productValue,orderCurrency:o.currency,ecommerce:{items:r(...o.products)}})},o.order_form=async function(o,e){var t;null===(t=window.dataLayer)||void 0===t||t.push({event:"ks.orderForm",facebookEventId:e,orderProducts:o.products,orderProductValue:o.productValue,orderCurrency:o.currency,ecommerce:{items:r(...o.products)}})},o.order_placed=async function(o,e){var r;null===(r=window.dataLayer)||void 0===r||r.push({event:"ks.order",facebookEventId:e,orderProducts:o.products,orderId:o.id,orderCurrency:o.currency,orderProductValue:o.productValue,ecommerce:{transaction_id:o.id,value:o.productValue,currency:o.currency,items:this.enchancedEcommerceItems(...o.products)}})},o.search=async function(o){var e;null===(e=window.dataLayer)||void 0===e||e.push({event:"ks.search",searchQuery:o})},o.subscribe=async function(o){var e;null===(e=window.dataLayer)||void 0===e||e.push({event:"ks.subscribe",subscriptionPlace:o.place,subscriptionEmail:o.email,subscriptionName:null==o?void 0:o.name,subscriptionStatus:o.subscriber?1:0})},o.recipe=async function(o){var e;null===(e=window.dataLayer)||void 0===e||e.push({event:"ks.recipe",name:o.title,category:o.category,cuisine:o.cuisine})}}(o||(o={}));export{o as D}