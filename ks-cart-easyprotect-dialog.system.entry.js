var __awaiter=this&&this.__awaiter||function(t,e,o,a){function r(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,n){function i(t){try{s(a.next(t))}catch(e){n(e)}}function c(t){try{s(a["throw"](t))}catch(e){n(e)}}function s(t){t.done?o(t.value):r(t.value).then(i,c)}s((a=a.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var o={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,r,n,i;return i={next:c(0),throw:c(1),return:c(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(a)throw new TypeError("Generator is already executing.");while(o)try{if(a=1,r&&(n=i[0]&2?r["return"]:i[0]?r["throw"]||((n=r["return"])&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;if(r=0,n)i=[i[0]&2,n.value];switch(i[0]){case 0:case 1:n=i;break;case 4:o.label++;return{value:i[1],done:false};case 5:o.label++;r=i[1];i=[0];continue;case 7:i=o.ops.pop();o.trys.pop();continue;default:if(!(n=o.trys,n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(i[0]===6&&o.label<n[1]){o.label=n[1];n=i;break}if(n&&o.label<n[2]){o.label=n[2];o.ops.push(i);break}if(n[2])o.ops.pop();o.trys.pop();continue}i=e.call(t,o)}catch(c){i=[6,c];r=0}finally{a=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,e,o){if(o||arguments.length===2)for(var a=0,r=e.length,n;a<r;a++){if(n||!(a in e)){if(!n)n=Array.prototype.slice.call(e,0,a);n[a]=e[a]}}return t.concat(n||Array.prototype.slice.call(e))};System.register(["./index-9d88b83b.system.js","./cart-a16a0840.system.js","./cart-2e799f89.system.js","./index-901f8c50.system.js","./fetch-eeb3cd98.system.js"],(function(t){"use strict";var e,o,a,r,n;return{setters:[function(t){e=t.r;o=t.h;a=t.g},function(t){r=t.c},function(t){n=t.g},function(){},function(){}],execute:function(){var i="ks-cart-easyprotect-dialog{display:block}ks-cart-easyprotect-dialog .hidden{display:none}ks-cart-easyprotect-dialog .content{background-color:var(--card-background);-webkit-box-shadow:var(--big-shadow);box-shadow:var(--big-shadow);color:var(--card-text-color);position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;max-width:720px;width:100%}ks-cart-easyprotect-dialog .content h2{font-size:24px;font-weight:700;text-align:center;margin-top:30px}ks-cart-easyprotect-dialog .content p{text-align:center;margin:10px 10px 20px 10px}ks-cart-easyprotect-dialog .content>.products .items{padding:10px 20px;max-height:320px;overflow-y:auto}ks-cart-easyprotect-dialog .content>.warranty .items{padding:0 20px 0 20px;max-height:270px;overflow-y:auto}ks-cart-easyprotect-dialog .content.hidden{display:none}ks-cart-easyprotect-dialog .content.hide{opacity:0;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease}ks-cart-easyprotect-dialog ks-button{z-index:20;position:relative;margin-top:20px;-webkit-box-shadow:0 2px 20px rgba(255, 255, 255, 0.3);box-shadow:0 2px 20px rgba(255, 255, 255, 0.3);border-top:#8057c1 1px solid}ks-cart-easyprotect-dialog ks-button[disabled]{border-top:#bebebe 1px solid}ks-cart-easyprotect-dialog ks-button button{background-color:var(--easyprotect-color);border-color:var(--easyprotect-color)}ks-cart-easyprotect-dialog ks-button button:hover{background-color:var(--easyprotect-color-hover) !important;border-color:var(--easyprotect-color-hover) !important}ks-cart-easyprotect-dialog ks-button button:active{background-color:var(--easyprotect-color-active) !important;border-color:var(--easyprotect-color-active) !important}ks-cart-easyprotect-dialog ks-button[disabled] button{background-color:#e2e2e2 !important;border-color:#e2e2e2 !important;color:#3d3d3d !important;cursor:auto}ks-cart-easyprotect-dialog ks-overlay .content{-webkit-animation:0.4s vertical-swipe-out 1;animation:0.4s vertical-swipe-out 1}ks-cart-easyprotect-dialog ks-overlay.active .content{-webkit-animation:0.4s vertical-swipe-in 1;animation:0.4s vertical-swipe-in 1}@media (max-width: 720px){ks-cart-easyprotect-dialog .content{height:100%}ks-cart-easyprotect-dialog .content>.products,ks-cart-easyprotect-dialog .content>.warranty{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;max-height:100%;padding:0}ks-cart-easyprotect-dialog .content>.products>.items,ks-cart-easyprotect-dialog .content>.warranty>.items{padding:0 10px 0 10px;max-height:none}ks-cart-easyprotect-dialog ks-button{margin-top:auto}ks-cart-easyprotect-dialog .content p{margin:5px 10px 15px 10px}}@media (max-width: 420px){ks-cart-easyprotect-dialog .content h2{font-size:20px;margin:20px 10px 10px 10px}ks-cart-easyprotect-dialog .content p{font-size:15px}}ks-cart-easyprotect-dialog .content .close,ks-cart-easyprotect-dialog .content .back{position:absolute;top:20px;z-index:20;border-radius:50px;padding:10px;-webkit-transition:var(--transition-background-color);transition:var(--transition-background-color)}ks-cart-easyprotect-dialog .content .close:hover,ks-cart-easyprotect-dialog .content .back:hover{background-color:#f2f2f2}ks-cart-easyprotect-dialog .content .close:active,ks-cart-easyprotect-dialog .content .back:active{background-color:#dbdbdb}ks-cart-easyprotect-dialog .content .close{right:20px}ks-cart-easyprotect-dialog .content .back{left:20px}@media (max-width: 420px){ks-cart-easyprotect-dialog .content .close,ks-cart-easyprotect-dialog .content .back{padding:3px;top:17px}ks-cart-easyprotect-dialog .content .close{right:8px}ks-cart-easyprotect-dialog .content .back{left:8px}}ks-cart-easyprotect-dialog .content .loading{position:absolute;top:0;bottom:0;left:0;right:0;z-index:100;background-color:white;-webkit-animation:fade-in 0.3s ease;animation:fade-in 0.3s ease}";var c=t("ks_cart_easyprotect_dialog",function(){function t(t){e(this,t);this.active=[];this.step=0}t.prototype.componentWillLoad=function(){var t=this;var e=function(){t.updateEligible()};e();r.onChange("easyprotect",e);r.onChange("insured",e)};t.prototype.componentDidLoad=function(){this.overlay=this.root.querySelector("ks-overlay")};t.prototype.updateEligible=function(){var t=Object.keys(r.get("insured"));var e=Object.keys(r.get("easyprotect"));this.eligible=e.filter((function(e){return!t.includes(e)&&r.get("products")[e]!==undefined})).map((function(t){return r.get("products")[t]}))};t.prototype.updateStep=function(){if(this.eligible.length==1){this.active=[this.eligible[0].id];this.step=2}};t.prototype.render=function(){var t=this;var e=this.eligible.length>0;var a=this.eligible.length>1&&this.step<1?"":"hidden";var r=this.step==1?"hide":"";var n=this.eligible.length==1||this.step>=2?"":"hidden";var i=this.step==1?"hide":"";return[o("ks-button",{tall:true,name:"Dodaj gwarancję",onClick:function(){return t.show()},class:e?null:"hidden"}),o("ks-overlay",null,o("div",{class:"content ".concat(a," ").concat(r)},this.products()),o("div",{class:"content ".concat(n," ").concat(i)},this.warranty()))]};t.prototype.products=function(){var t=this;return o("div",{class:"products"},o("slot",{name:"products"}),o("div",{class:"items"},this.eligible.map((function(e){return o("ks-cart-easyprotect-product",{image:e.img,name:e.name,warranty:e.warranty,onClick:function(){return t.toggle(e.id)},active:t.active.includes(e.id)})}))),o("ks-button",{tall:true,name:"Przejdź dalej",onClick:function(){return t.addProducts()},disabled:this.active.length<=0}),o("div",{class:"close",onClick:function(){return t.hide()}},o("ks-icon",{name:"x",size:1.2})))};t.prototype.warranty=function(){var t=this;var e=Object.keys(r.get("easyprotect")).filter((function(e){return t.active.includes(e)}));return[o("div",{class:"warranty"},o("slot",{name:"warranty"}),o("div",{class:"items"},e.map((function(t){return o("ks-cart-easyprotect-warranty",{"product-id":t})}))),o("ks-button",{tall:true,name:"Dodaj gwarancję",onClick:function(){return t.addWarranty()},disabled:this.active.length<=0}),o("div",{class:"close",onClick:function(){return t.hide()}},o("ks-icon",{name:"x",size:1.2})),this.eligible.length>1?o("div",{class:"back",onClick:function(){return t.back()}},o("ks-icon",{name:"chevron-left",size:1.2})):null),this.step==3?o("div",{class:"loading"},o("ks-loader",{large:true,dark:true})):null]};t.prototype.toggle=function(t){var e=this.active.findIndex((function(e){return e==t}));if(e!==-1)this.active.splice(e,1);else this.active.push(t);this.active=__spreadArray([],this.active,true)};t.prototype.show=function(){this.updateEligible();this.updateStep();this.overlay.show()};t.prototype.hide=function(){var t=this;this.overlay.hide();setTimeout((function(){t.step=0}),300)};t.prototype.addProducts=function(){var t=this;this.step=1;setTimeout((function(){t.step=2}),200)};t.prototype.back=function(){var t=this;this.step=1;setTimeout((function(){t.step=0}),200)};t.prototype.addWarranty=function(){return __awaiter(this,void 0,void 0,(function(){var t,e,o,a;var r=this;return __generator(this,(function(i){this.step=3;this.overlay.close=false;t={};e=this.root.querySelectorAll(".warranty .items ks-cart-easyprotect-warranty");e.forEach((function(e){t[e.getAttribute("product-id")]=e.getAttribute("active")}));o=false;a=false;setTimeout((function(){a=true;if(o)r.end()}),500);n(t).then((function(){o=true;if(a)r.end()}));return[2]}))}))};t.prototype.end=function(){var t=this;this.overlay.hide();setTimeout((function(){t.overlay.close=true;t.step=0;t.active=[]}),300)};Object.defineProperty(t.prototype,"root",{get:function(){return a(this)},enumerable:false,configurable:true});return t}());c.style=i}}}));