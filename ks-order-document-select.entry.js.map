{"version":3,"names":["OrderDocumentSelect","componentDidLoad","this","root","style","display","radios","querySelectorAll","name","forEach","radio","addEventListener","e","target","form","FormData","append","value","headers","Headers","loading","fetch","api","method","body","credentials","then","async","render","h","chooseSaleDocument","class","active","text","receipt","invoice","animationDuration","animationDelay"],"sources":["src/components/order/confirmation/orderDocumentSelect.tsx"],"sourcesContent":["import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\n@Component({\n  tag: 'ks-order-document-select',\n})\nexport class OrderDocumentSelect {\n\n    @Element() root: HTMLElement;\n    @Prop() name: string;\n    @Prop() api: string;\n\n    @Prop() chooseSaleDocument: string;\n    @Prop() receipt: string;\n    @Prop() invoice: string;\n\n    @State() loading: boolean;\n\n    componentDidLoad(){\n        this.root.style.display = \"block\"\n\n        const radios = this.root.querySelectorAll(`input[name=${this.name}]`);\n        radios.forEach((radio)=>{\n            radio.addEventListener(\"change\", (e)=>{\n                const target = e.target as HTMLInputElement;\n\n                const form = new FormData();\n                form.append(\"value\", target.value);\n\n                var headers = new Headers();\n                headers.append('pragma', 'no-cache');\n                headers.append('cache-control', 'no-cache');\n\n                this.loading = true;\n\n                fetch(this.api, {\n                    method: 'POST',\n                    headers: headers,\n                    body: form,\n                    credentials: \"same-origin\"\n                })\n                    .then(()=>this.loading=false);\n            })\n        })\n    }\n\n    @Method()\n    async Validate() {}\n\n    @Method()\n    async IsValid() {\n        return !this.loading;\n    }\n\n    render() {\n        return[\n            <span>{this.chooseSaleDocument}</span>,\n            <div class=\"uk-position-relative uk-margin-small-top\">\n                <div class=\"uk-child-width-1-2 uk-flex\">\n                    <ks-order-toggle active text={this.receipt} name={this.name} value=\"0\"></ks-order-toggle>\n                    <ks-order-toggle text={this.invoice} name={this.name} value=\"1\"></ks-order-toggle>\n                </div>\n                {this.loading ?\n                    <div class=\"uk-overlay uk-overlay-default uk-padding-remove uk-position-cover uk-animation-fade\"\n                         style={{animationDuration: \"0.3s\", animationDelay: \"0.5s\"}}>\n                        <div uk-spinner class=\"uk-position-center\"></div>\n                    </div>\n                : null}\n            </div>\n            \n        ];\n    }\n}"],"mappings":"4DAKaA,EAAmB,M,uKAY5BC,mBACIC,KAAKC,KAAKC,MAAMC,QAAU,QAE1B,MAAMC,EAASJ,KAAKC,KAAKI,iBAAiB,cAAcL,KAAKM,SAC7DF,EAAOG,SAASC,IACZA,EAAMC,iBAAiB,UAAWC,IAC9B,MAAMC,EAASD,EAAEC,OAEjB,MAAMC,EAAO,IAAIC,SACjBD,EAAKE,OAAO,QAASH,EAAOI,OAE5B,IAAIC,EAAU,IAAIC,QAClBD,EAAQF,OAAO,SAAU,YACzBE,EAAQF,OAAO,gBAAiB,YAEhCd,KAAKkB,QAAU,KAEfC,MAAMnB,KAAKoB,IAAK,CACZC,OAAQ,OACRL,QAASA,EACTM,KAAMV,EACNW,YAAa,gBAEZC,MAAK,IAAIxB,KAAKkB,QAAQ,OAAM,GACnC,G,CAKVO,iBAAc,CAGdA,gBACI,OAAQzB,KAAKkB,O,CAGjBQ,SACI,MAAM,CACFC,EAAA,YAAO3B,KAAK4B,oBACZD,EAAA,OAAKE,MAAM,4CACPF,EAAA,OAAKE,MAAM,8BACPF,EAAA,mBAAiBG,OAAM,KAACC,KAAM/B,KAAKgC,QAAS1B,KAAMN,KAAKM,KAAMS,MAAM,MACnEY,EAAA,mBAAiBI,KAAM/B,KAAKiC,QAAS3B,KAAMN,KAAKM,KAAMS,MAAM,OAE/Df,KAAKkB,QACFS,EAAA,OAAKE,MAAM,sFACN3B,MAAO,CAACgC,kBAAmB,OAAQC,eAAgB,SACpDR,EAAA,yBAAgBE,MAAM,wBAE5B,M"}