var __awaiter=this&&this.__awaiter||function(i,e,o,t){function n(i){return i instanceof o?i:new o((function(e){e(i)}))}return new(o||(o=Promise))((function(o,a){function d(i){try{s(t.next(i))}catch(i){a(i)}}function r(i){try{s(t["throw"](i))}catch(i){a(i)}}function s(i){i.done?o(i.value):n(i.value).then(d,r)}s((t=t.apply(i,e||[])).next())}))};var __generator=this&&this.__generator||function(i,e){var o={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},t,n,a,d;return d={next:r(0),throw:r(1),return:r(2)},typeof Symbol==="function"&&(d[Symbol.iterator]=function(){return this}),d;function r(i){return function(e){return s([i,e])}}function s(r){if(t)throw new TypeError("Generator is already executing.");while(d&&(d=0,r[0]&&(o=0)),o)try{if(t=1,n&&(a=r[0]&2?n["return"]:r[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;if(n=0,a)r=[r[0]&2,a.value];switch(r[0]){case 0:case 1:a=r;break;case 4:o.label++;return{value:r[1],done:false};case 5:o.label++;n=r[1];r=[0];continue;case 7:r=o.ops.pop();o.trys.pop();continue;default:if(!(a=o.trys,a=a.length>0&&a[a.length-1])&&(r[0]===6||r[0]===2)){o=0;continue}if(r[0]===3&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(r[0]===6&&o.label<a[1]){o.label=a[1];a=r;break}if(a&&o.label<a[2]){o.label=a[2];o.ops.push(r);break}if(a[2])o.ops.pop();o.trys.pop();continue}r=e.call(i,o)}catch(i){r=[6,i];n=0}finally{t=a=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(i,e,o){if(o||arguments.length===2)for(var t=0,n=e.length,a;t<n;t++){if(a||!(t in e)){if(!a)a=Array.prototype.slice.call(e,0,t);a[t]=e[t]}}return i.concat(a||Array.prototype.slice.call(e))};System.register(["./index-c1zuSwDW.system.js","./index-BljFg8DE.system.js","./fetch-H5Atuhfj.system.js","./marked.esm-DTtDNLxi.system.js"],(function(i){"use strict";var e,o,t,n,a,d;return{setters:[function(i){e=i.r;o=i.h;t=i.a},function(i){n=i.c},function(i){a=i.j},function(i){d=i.m}],execute:function(){var r=n({});var s='ks-page-guide{display:block;background-color:#f2f2f2}ks-page-guide .text{max-width:1000px;padding:20px;margin:auto}ks-page-guide .dialog{max-width:1000px;width:100%;padding:20px;margin:auto;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#ffffff;border:1px solid #e9e9e9;border-radius:10px;overflow:hidden}ks-page-guide .dialog .buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:10px;margin-top:10px}ks-page-guide .dialog .choices{display:-ms-flexbox;display:flex;gap:10px;-ms-flex-wrap:wrap;flex-wrap:wrap}ks-page-guide .dialog .choice{width:100%;max-width:215px;background-color:#f2f2f2;border-radius:10px;overflow:hidden;position:relative;padding:8px;cursor:pointer}ks-page-guide .dialog .choice ks-img3{height:140px;border-radius:10px;overflow:hidden}ks-page-guide .dialog .choice .description{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}ks-page-guide .dialog .choice h3{font-size:17px;padding:10px 10px 6px 10px;margin:0}ks-page-guide .dialog .choice p{padding:0px 10px 10px 10px;margin:0;font-size:14px}ks-page-guide .dialog .choice .select{position:absolute;top:4px;right:4px;width:35px;height:35px;background-color:#f2f2f2;border-radius:35px 0 35px 35px}ks-page-guide .dialog .choice .select::before{content:"";display:block;width:25px;height:25px;position:absolute;right:5px;top:5px;border-radius:25px;border:1px solid #818181;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .dialog .choice.active .select::after{content:"";display:block;width:17px;height:17px;position:absolute;right:9px;top:9px;border-radius:17px;background-color:#212121}ks-page-guide .dialog .choices.multiple .choice .select{border-radius:0 0 0 8px;top:8px;right:8px;width:30px;height:30px}ks-page-guide .dialog .choices.multiple .choice .select::before{right:0px;top:0px;border-radius:5px}ks-page-guide .dialog .choices.multiple .select::after{right:4px;top:4px;border-radius:3px}ks-page-guide .dialog .navigation{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:10px}ks-page-guide .dialog .navigation .breadcrumbs{display:-ms-flexbox;display:flex;gap:5px}ks-page-guide .dialog .navigation .breadcrumbs>*{background-color:#dddddd;padding:5px 10px;border-radius:7px;cursor:pointer}ks-page-guide .dialog .navigation .back{background-color:#dddddd;padding:5px 10px;border-radius:7px;cursor:pointer}ks-page-guide .products{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;gap:10px;width:100%;margin:20px auto 0 auto;padding:0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .products .product{position:relative;max-width:300px;-ms-flex:1 1 260px;flex:1 1 260px}ks-page-guide .products .product ks-product-card{width:100%;margin-bottom:10px}ks-page-guide .products .product .condition{padding:5px 0;font-size:14px}ks-page-guide .products .product .condition ks-icon{margin-right:5px}ks-page-guide .products .product .best{position:absolute;z-index:1;top:10px;left:-5px;background-color:#151515;color:#ffffff;padding:5px 15px;border-radius:5px}ks-page-guide .summary>div{margin:0 0 10px 0}ks-page-guide .summary>div>div{display:inline-block;background-color:#dddddd;padding:3px 7px;border-radius:5px;margin:2px}ks-page-guide .summary ks-button{margin:20px -20px -20px -20px}ks-page-guide .dialog .choice,ks-page-guide .dialog .navigation .breadcrumbs>*{-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;opacity:1}ks-page-guide .dialog .navigation .breadcrumbs>*:hover{opacity:0.8}ks-page-guide .dialog .choice:hover{opacity:0.95}ks-page-guide .dialog .choice:hover,ks-page-guide .dialog .navigation .breadcrumbs>*:active{opacity:0.7}ks-page-guide[loading] .dialog .choices,ks-page-guide[loading] .products{opacity:0;-webkit-transition:none;transition:none}ks-page-guide .dialog .choices,ks-page-guide .products{-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease}ks-page-guide .dialog .navigation .back{display:none}@media screen and (max-width: 1010px){ks-page-guide .dialog .navigation .breadcrumbs{display:none}ks-page-guide .dialog .navigation .back{display:block}ks-page-guide .dialog .choices .choice{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;max-width:100%}ks-page-guide .dialog .choice ks-img3{height:50px;width:80px}ks-page-guide .dialog .choice ks-img3.large{height:80px;width:80px}ks-page-guide .dialog .choices .choice .select{position:relative;top:0;right:0}ks-page-guide .dialog .choices.multiple .choice .select{position:relative;top:2.5px}ks-page-guide .product .condition{padding:2px 0}ks-page-guide .product .condition ks-icon{-webkit-transform:scale(0.9);transform:scale(0.9);margin:0}}@media screen and (min-width: 701px){ks-page-guide>ks-page-base>.content{padding:0 40px}}';var c=i("ks_page_guide",function(){function i(i){var t=this;e(this,i);this.loading=false;this.active=null;this.summary=false;this.choices=[];this.choices_stage=function(){var i,e,n,a,d;return[o("h2",null,(i=t.activeCategory())===null||i===void 0?void 0:i.heading),o("div",{class:["choices",((e=t.activeCategory())===null||e===void 0?void 0:e.multiple)?"multiple":null].join(" ")},(n=t.activeCategory())===null||n===void 0?void 0:n.choices.map((function(i){var e;return o("div",{class:["choice",((e=t.activeCategoryChoices())===null||e===void 0?void 0:e.includes(i.id))?"active":null].join(" "),onClick:function(){return t.selectChoice(t.active,i)}},o("ks-img3",{fit:"cover",image:i.image,class:i.description?"large":null}),o("div",{class:"description"},o("h3",null,i.name),i.description?o("p",null,i.description):null),o("div",{class:"select"}))})),t.loading),o("div",{class:"buttons"},((a=t.activeCategory())===null||a===void 0?void 0:a.nopreference)?o("ks-button",{round:true,border:true,name:"Nie mam preferencji",onClick:function(){return t.selectChoice(t.active,null)}}):null,((d=t.activeCategoryChoices())===null||d===void 0?void 0:d.length)>0?o("ks-button",{round:true,name:"Kontynuuj",onClick:function(){return t.nextCategory()}}):null)]};this.summary_stage=function(i){return[o("h2",null,"Dziękujemy za Twoją opinię!"),o("p",null,"Na podstawie Twoich odpowiedzi możemy polecić Ci kilka świetnych rozwiązań. Sprawdź je poniżej."),o("div",{class:"summary"},i===null||i===void 0?void 0:i.map((function(i){var e,n,a;return((e=t.categoryChoices(i.id))===null||e===void 0?void 0:e.includes(null))?null:o("div",null,i.name,": ",(a=(n=t.categoryChoices(i.id))===null||n===void 0?void 0:n.map((function(e){var o,t;return(t=(o=i.choices)===null||o===void 0?void 0:o.find((function(i){return i.id==e})))===null||t===void 0?void 0:t.name})))===null||a===void 0?void 0:a.map((function(i){return o("div",null,i)})))})),o("ks-button",{name:"Rozpocznij ponownie",icon:"edit-3",onClick:function(){return t.reset()}}))]}}i.prototype.componentWillLoad=function(){var i=document.getElementById(this.guideData);var e=JSON.parse(i.innerHTML);Object.keys(e).map((function(i){r.set(i,e[i])}));this.resetActive()};i.prototype.initialCategory=function(){var i,e;return(e=(i=r.get("dialog"))===null||i===void 0?void 0:i[0])===null||e===void 0?void 0:e.id};i.prototype.resetActive=function(){this.active=this.initialCategory()};i.prototype.nextCategory=function(){this.selectCategoryRelative(1)};i.prototype.previousCategory=function(){this.selectCategoryRelative(-1)};i.prototype.selectCategoryRelative=function(i){var e;var o=(e=r.get("dialog"))===null||e===void 0?void 0:e[this.activeIndex()+i];this.selectCategory(o===null||o===void 0?void 0:o.id)};i.prototype.activeIndex=function(){return this.index(this.active)};i.prototype.index=function(i){var e;return(e=r.get("dialog"))===null||e===void 0?void 0:e.findIndex((function(e){return e.id==i}))};i.prototype.activeCategory=function(){return this.category(this.active)};i.prototype.category=function(i){var e;return(e=r.get("dialog"))===null||e===void 0?void 0:e.find((function(e){return e.id==i}))};i.prototype.activeCategoryChoices=function(){return this.categoryChoices(this.active)};i.prototype.categoryChoices=function(i){var e;return(e=this.choices.find((function(e){return e.category==i})))===null||e===void 0?void 0:e.choices};i.prototype.selectChoice=function(i,e){var o,t;var n=this.choices;var a=(o=e===null||e===void 0?void 0:e.id)!==null&&o!==void 0?o:null;var d=(t=this.category(i))===null||t===void 0?void 0:t.multiple;var r=this.choices.find((function(e){return e.category==i}));if(r){if(d){var s=r.choices.indexOf(a);if(s!=-1)r.choices.splice(s,1);else r.choices.push(a)}else r.choices=[a]}else{this.choices.push({category:i,choices:[a]})}this.choices=__spreadArray([],n,true);if(e==null)this.nextCategory()};i.prototype.selectCategory=function(i){var e=this.activeIndex();var o=this.index(i);if(o==-1)this.summary=true;else{if(this.choices.length>o)this.choices=__spreadArray([],this.choices.slice(0,o),true);this.active=i;this.summary=false}if(this.active==this.initialCategory())this.componentWillLoad();else this.dynamicResults(e);this.scroll()};i.prototype.scroll=function(){var i;var e=this.root.querySelector(".dialog");var o=(i=e.querySelector(".navigation"))===null||i===void 0?void 0:i.getBoundingClientRect();var t=o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth);if(!t)setTimeout((function(){var i;var o=((i=e===null||e===void 0?void 0:e.getBoundingClientRect())===null||i===void 0?void 0:i.top)+window.scrollY;window.scroll({top:o,behavior:"smooth"})}),300)};i.prototype.reset=function(){this.summary=false;this.resetActive();this.choices=[];this.componentWillLoad()};i.prototype.dynamicResults=function(i){return __awaiter(this,void 0,void 0,(function(){var e,o,t;var n;return __generator(this,(function(d){switch(d.label){case 0:this.loading=true;return[4,a(r.get("api"),{choices:this.choices})];case 1:e=d.sent();return[4,e===null||e===void 0?void 0:e.json()];case 2:o=d.sent();if(o){r.set("dialog",o===null||o===void 0?void 0:o.dialog);r.set("products",o===null||o===void 0?void 0:o.products)}this.loading=false;if(!this.activeCategory()){t=(n=r.get("dialog"))===null||n===void 0?void 0:n[i+1];if(t)this.active=t.id;else this.summary=true}return[2]}}))}))};i.prototype.render=function(){var i=this;var e=r.get("dialog");var t=r.get("products");return o("ks-page-base",{key:"16e312dab8562e3f6a146b12ade90ef7d7224721",skipbase:this.skipbase,commonData:this.commonData,commonDynamicData:this.commonDynamicData},o("div",{key:"2029fed1bec308177b9d5d1307b2d1f4ca260035",class:"content"},o("div",{key:"55d64322b3bcfc0cde02fc905c149ddac5f8d15b",class:"text"},o("h1",{key:"1d34da04920ba66989dc51673dab68aef710d8d0"},r.get("heading")),o("p",{key:"d6e893c9bc5bf4759f4c9c0b03f649bd79e2abc9"},r.get("description"))),o("div",{key:"37c8938138985e727096fbb45d68e2f1dae31f8a",class:"dialog"},o("div",{key:"3a3e00697cca35db61a162d4fc349f526ad9c5b6",class:"navigation"},o("div",{key:"8c921118b07eebb01a699fdf1c0cb86f44b9cb50",class:"breadcrumbs"},e.slice(0,Math.max(this.choices.length,this.activeIndex())).map((function(e){return o("div",{onClick:function(){return i.selectCategory(e.id)}},e===null||e===void 0?void 0:e.name)}))),o("div",{key:"f0c4946ae60b5ebb2fa703183d2145fdbf215a0b",class:"back",onClick:function(){return i.previousCategory()}},o("ks-icon",{key:"236e9d9faed6f666c5c635eafdb8b66d0e598f4d",name:"chevron-left"})),o("div",{key:"a81616952ecabaf58653edee99358defc7129a95"},this.summary?e.length:this.activeIndex()+1," z ",e.length)),this.summary?this.summary_stage(e):this.choices_stage()),t&&(t===null||t===void 0?void 0:t.length)>0&&(this.activeIndex()>0||this.summary)?o("div",{class:"products"},t===null||t===void 0?void 0:t.map((function(i,e){var t;return o("div",{class:"product",key:i.id},e==0?o("div",{class:"best"},"Najlepszy wybór"):null,o("ks-product-card",{constheight:true,flat:true,linkOnly:true,product:i}),(t=i===null||i===void 0?void 0:i.conditions)===null||t===void 0?void 0:t.map((function(i){return o("div",{class:"condition"},o("ks-icon",{name:"check-circle"}),i.category,": ",i.items.join(", "))})))}))):null,o("div",{key:"b806c6d2ddec97e3d266129a44840be766b7cf7f",class:"text",innerHTML:d.parse(r.get("bottom_description"))})))};Object.defineProperty(i.prototype,"root",{get:function(){return t(this)},enumerable:false,configurable:true});return i}());c.style=s}}}));
//# sourceMappingURL=ks-page-guide.system.entry.js.map