var __awaiter=this&&this.__awaiter||function(i,e,t,o){function a(i){return i instanceof t?i:new t((function(e){e(i)}))}return new(t||(t=Promise))((function(t,n){function s(i){try{c(o.next(i))}catch(e){n(e)}}function r(i){try{c(o["throw"](i))}catch(e){n(e)}}function c(i){i.done?t(i.value):a(i.value).then(s,r)}c((o=o.apply(i,e||[])).next())}))};var __generator=this&&this.__generator||function(i,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,a,n,s;return s={next:r(0),throw:r(1),return:r(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function r(i){return function(e){return c([i,e])}}function c(s){if(o)throw new TypeError("Generator is already executing.");while(t)try{if(o=1,a&&(n=s[0]&2?a["return"]:s[0]?a["throw"]||((n=a["return"])&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;if(a=0,n)s=[s[0]&2,n.value];switch(s[0]){case 0:case 1:n=s;break;case 4:t.label++;return{value:s[1],done:false};case 5:t.label++;a=s[1];s=[0];continue;case 7:s=t.ops.pop();t.trys.pop();continue;default:if(!(n=t.trys,n=n.length>0&&n[n.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!n||s[1]>n[0]&&s[1]<n[3])){t.label=s[1];break}if(s[0]===6&&t.label<n[1]){t.label=n[1];n=s;break}if(n&&t.label<n[2]){t.label=n[2];t.ops.push(s);break}if(n[2])t.ops.pop();t.trys.pop();continue}s=e.call(i,t)}catch(r){s=[6,r];a=0}finally{o=n=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var o=0,a=e.length,n;o<a;o++){if(n||!(o in e)){if(!n)n=Array.prototype.slice.call(e,0,o);n[o]=e[o]}}return i.concat(n||Array.prototype.slice.call(e))};System.register(["./index-229c64eb.system.js","./index-0ecc4079.system.js","./fetch-8edb5396.system.js","./marked.umd-556abf5a.system.js","./_commonjsHelpers-8ab2ac47.system.js"],(function(i){"use strict";var e,t,o,a,n;return{setters:[function(i){e=i.r;t=i.h},function(i){o=i.c},function(i){a=i.j},function(i){n=i.m},function(){}],execute:function(){var s=o({});var r='ks-page-guide{display:block;background-color:#f2f2f2}ks-page-guide .text{max-width:1000px;padding:20px;margin:auto}ks-page-guide .dialog{max-width:1000px;width:100%;padding:20px;margin:auto;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#ffffff;border:1px solid #e9e9e9;border-radius:10px;overflow:hidden}ks-page-guide .dialog .buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;gap:10px;margin-top:10px}ks-page-guide .dialog .choices{display:-ms-flexbox;display:flex;gap:10px;-ms-flex-wrap:wrap;flex-wrap:wrap}ks-page-guide .dialog .choice{width:100%;max-width:215px;background-color:#f2f2f2;border-radius:10px;overflow:hidden;position:relative;padding:8px;cursor:pointer}ks-page-guide .dialog .choice ks-img3{height:140px;border-radius:10px;overflow:hidden}ks-page-guide .dialog .choice .description{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}ks-page-guide .dialog .choice h3{font-size:17px}ks-page-guide .dialog .choice h3,ks-page-guide .dialog .choice p{padding:10px;margin:0}ks-page-guide .dialog .choice .select{position:absolute;top:4px;right:4px;width:35px;height:35px;background-color:#f2f2f2;border-radius:35px 0 35px 35px}ks-page-guide .dialog .choice .select::before{content:"";display:block;width:25px;height:25px;position:absolute;right:5px;top:5px;border-radius:25px;border:1px solid #818181;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .dialog .choice.active .select::after{content:"";display:block;width:17px;height:17px;position:absolute;right:9px;top:9px;border-radius:17px;background-color:#212121}ks-page-guide .dialog .choices.multiple .choice .select{border-radius:0 0 0 8px;top:8px;right:8px;width:30px;height:30px}ks-page-guide .dialog .choices.multiple .choice .select::before{right:0px;top:0px;border-radius:5px}ks-page-guide .dialog .choices.multiple .select::after{right:4px;top:4px;border-radius:3px}ks-page-guide .dialog .navigation{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:10px}ks-page-guide .dialog .navigation .breadcrumbs{display:-ms-flexbox;display:flex;gap:5px}ks-page-guide .dialog .navigation .breadcrumbs>*{background-color:#dddddd;padding:5px 10px;border-radius:7px;cursor:pointer}ks-page-guide .products{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;gap:10px;width:100%;margin:20px auto 0 auto;padding:0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}ks-page-guide .products .product{position:relative;max-width:300px;-ms-flex:1 1 260px;flex:1 1 260px}ks-page-guide .products .product ks-product-card{width:100%;margin-bottom:10px}ks-page-guide .products .product .condition{padding:5px 0}ks-page-guide .products .product .condition ks-icon{margin-right:5px}ks-page-guide .products .product .best{position:absolute;z-index:1;top:10px;left:-5px;background-color:#151515;color:#ffffff;padding:5px 15px;border-radius:5px}ks-page-guide .summary>div{margin:0 0 10px 0}ks-page-guide .summary>div>div{display:inline-block;background-color:#dddddd;padding:3px 7px;border-radius:5px;margin:0 3px}ks-page-guide .summary ks-button{margin:20px -20px -20px -20px}ks-page-guide .dialog .choice,ks-page-guide .dialog .navigation .breadcrumbs>*{-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;opacity:1}ks-page-guide .dialog .navigation .breadcrumbs>*:hover{opacity:0.8}ks-page-guide .dialog .choice:hover{opacity:0.95}ks-page-guide .dialog .choice:hover,ks-page-guide .dialog .navigation .breadcrumbs>*:active{opacity:0.7}@media screen and (max-width: 1010px){ks-page-guide .dialog .choices .choice{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;max-width:100%}ks-page-guide .dialog .choice ks-img3{height:50px;width:80px}ks-page-guide .dialog .choice ks-img3.large{height:80px;width:80px}ks-page-guide .dialog .choices .choice .select{position:relative;top:0;right:0}ks-page-guide .dialog .choices.multiple .choice .select{position:relative;top:2.5px}ks-page-guide .product .condition{font-size:14px;padding:2px 0}ks-page-guide .product .condition ks-icon{-webkit-transform:scale(0.9);transform:scale(0.9);margin:0}}';var c=i("ks_page_guide",function(){function i(i){var o=this;e(this,i);this.choices_stage=function(i){var e;return[t("h2",null,i[o.active].heading),t("div",{class:["choices",i[o.active].multiple?"multiple":null].join(" ")},i[o.active].choices.map((function(i){var e,a;return t("div",{class:["choice",((a=(e=o.choices)===null||e===void 0?void 0:e[o.active])===null||a===void 0?void 0:a.includes(i.id))?"active":null].join(" "),onClick:function(){return o.selectChoice(o.active,i)}},t("ks-img3",{fit:"cover",image:i.image,class:i.description?"large":null}),t("div",{class:"description"},t("h3",null,i.name),i.description?t("p",null,i.description):null),t("div",{class:"select"}))}))),t("div",{class:"buttons"},t("ks-button",{round:true,border:true,name:"Nie mam preferencji",onClick:function(){return o.selectChoice(o.active,null)}}),((e=o.choices)===null||e===void 0?void 0:e[o.active])!==undefined?t("ks-button",{round:true,name:"Kontynuuj",onClick:function(){return o.nextCategory()}}):null)]};this.summary_stage=function(i){return[t("h2",null,"Dziękujemy za Twoją opinię!"),t("p",null,"Na podstawie Twoich odpowiedzi możemy polecić Ci kilka świetnych rozwiązań. Sprawdź je poniżej."),t("div",{class:"summary"},i===null||i===void 0?void 0:i.map((function(i,e){var a,n;return t("div",null,i.name,": ",(n=(a=o.choices[e])===null||a===void 0?void 0:a.map((function(e){var t,o;return(o=(t=i.choices)===null||t===void 0?void 0:t.find((function(i){return i.id==e})))===null||o===void 0?void 0:o.name})))===null||n===void 0?void 0:n.map((function(i){return t("div",null,i)})))})),t("ks-button",{name:"Rozpocznij ponownie",icon:"edit-3",onClick:function(){return o.reset()}}))]};this.skipbase=undefined;this.commonData=undefined;this.commonDynamicData=undefined;this.guideData=undefined;this.active=0;this.summary=false;this.choices=[]}i.prototype.componentWillLoad=function(){var i=document.getElementById(this.guideData);var e=JSON.parse(i.innerHTML);Object.keys(e).map((function(i){s.set(i,e[i])}))};i.prototype.selectChoice=function(i,e){var t,o,a,n;var r=this.choices;var c=(t=e===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:null;var d=(a=(o=s.get("dialog"))===null||o===void 0?void 0:o[i])===null||a===void 0?void 0:a.multiple;if(((n=this.choices)===null||n===void 0?void 0:n[i])!==undefined&&this.choices.length==i+1){if(d){var l=r[i].indexOf(c);if(l!=-1)r[i].splice(l,1);else r[i].push(c)}else r[i]=[c]}else if(this.choices.length==i)r=__spreadArray(__spreadArray([],r,true),[[c]],false);else if(this.choices.length>i)r=__spreadArray(__spreadArray([],r.slice(0,i),true),[[c]],false);else{r=[];this.active=0}this.choices=__spreadArray([],r,true);if(e==null)this.nextCategory()};i.prototype.selectCategory=function(i){if(this.choices.length>i)this.choices=__spreadArray([],this.choices.slice(0,i),true);if(s.get("dialog").length>i){this.active=i;this.summary=false}else this.summary=true;if(this.active==0)this.componentWillLoad();else this.dynamicResults()};i.prototype.reset=function(){this.summary=false;this.active=0;this.choices=[];this.componentWillLoad()};i.prototype.nextCategory=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){this.selectCategory(this.active+1);return[2]}))}))};i.prototype.dynamicResults=function(){return __awaiter(this,void 0,void 0,(function(){var i,e;return __generator(this,(function(t){switch(t.label){case 0:return[4,a(s.get("api"),{choices:this.choices,categories:s.get("dialog").map((function(i){return i.id}))})];case 1:i=t.sent();return[4,i===null||i===void 0?void 0:i.json()];case 2:e=t.sent();if(e){s.set("dialog",e===null||e===void 0?void 0:e.dialog);s.set("products",e===null||e===void 0?void 0:e.products)}return[2]}}))}))};i.prototype.render=function(){var i=this;var e=s.get("dialog");var o=s.get("products");return t("ks-page-base",{skipbase:this.skipbase,commonData:this.commonData,commonDynamicData:this.commonDynamicData},t("div",{class:"text"},t("h1",null,s.get("heading")),t("p",null,s.get("description"))),t("div",{class:"dialog"},t("div",{class:"navigation"},t("div",{class:"breadcrumbs"},e.slice(0,Math.max(this.choices.length,this.active+1)).map((function(e,o){return t("div",{onClick:function(){return i.selectCategory(o)}},e===null||e===void 0?void 0:e.name)}))),t("div",null,this.active+1," z ",e.length)),this.summary?this.summary_stage(e):this.choices_stage(e)),o&&(o===null||o===void 0?void 0:o.length)>0&&this.active>0?t("div",{class:"products"},o===null||o===void 0?void 0:o.map((function(i,e){var o;return t("div",{class:"product"},e==0?t("div",{class:"best"},"Najlepszy wybór"):null,t("ks-product-card",{flat:true,linkOnly:true,product:i}),(o=i===null||i===void 0?void 0:i.conditions)===null||o===void 0?void 0:o.map((function(i){return t("div",{class:"condition"},t("ks-icon",{name:"check-circle"}),i.category,": ",i.items.join(", "))})))}))):null,t("div",{class:"text",innerHTML:n.marked.parse(s.get("bottom_description"))}))};return i}());c.style=r}}}));