{"version":3,"file":"favourites-CyZnjLXW.js","sources":["src/global/functions/favourites.ts"],"sourcesContent":["import Fetch from \"./fetch\";\nimport { commonDynamic } from \"../data/commonDynamic\";\nimport { ProductShortData } from \"../data/product\";\nimport { DataLayer } from \"../dataLayer\";\n\nexport async function addToFavourites(product: ProductShortData) {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n    const navbar = document.querySelector('ks-navbar') as HTMLKsNavbarElement;\n\n    let cartBody = new FormData();\n        cartBody.append(\"id\", product.id);\n\n    const api = commonDynamic.get('api').addToFavourites;\n\n    return Fetch(api, cartBody)\n        .then(() => {\n            navbar.IncrementHeart();\n            DataLayer.addToFavourites(product);\n        })\n        .catch(error => errorpopup.show(error));\n}\n\nexport async function removeFromFavourites(id: string) {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n    const navbar = document.querySelector('ks-navbar') as HTMLKsNavbarElement;\n\n    let cartBody = new FormData();\n        cartBody.append(\"id\", id);\n        cartBody.append(\"akcja\", \"usun\");\n\n    const api = commonDynamic.get('api').removeFromFavourites;\n\n    return Fetch(api, cartBody)\n        .then(() => navbar.DecrementHeart())\n        .catch(error => errorpopup.show(error));\n}\n\nexport async function removeAllFavourites() {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n\n    const api = commonDynamic.get('api').removeAllFavourites;\n\n    return Fetch(api).catch(error => errorpopup.show(error));\n}"],"names":[],"mappings":";;;;AAKO,eAAe,eAAe,CAAC,OAAyB,EAAA;IAC3D,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAA4B;IACtF,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAwB;AAEzE,IAAA,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE;IACzB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC;IAErC,MAAM,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,eAAe;AAEpD,IAAA,OAAO,KAAK,CAAC,GAAG,EAAE,QAAQ;SACrB,IAAI,CAAC,MAAK;QACP,MAAM,CAAC,cAAc,EAAE;AACvB,QAAA,SAAS,CAAC,eAAe,CAAC,OAAO,CAAC;AACtC,KAAC;AACA,SAAA,KAAK,CAAC,KAAK,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC/C;AAEO,eAAe,oBAAoB,CAAC,EAAU,EAAA;IACjD,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAA4B;IACtF,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAwB;AAEzE,IAAA,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE;AACzB,IAAA,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC;AACzB,IAAA,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC;IAEpC,MAAM,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,oBAAoB;AAEzD,IAAA,OAAO,KAAK,CAAC,GAAG,EAAE,QAAQ;SACrB,IAAI,CAAC,MAAM,MAAM,CAAC,cAAc,EAAE;AAClC,SAAA,KAAK,CAAC,KAAK,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC/C;AAEO,eAAe,mBAAmB,GAAA;IACrC,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAA4B;IAEtF,MAAM,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,mBAAmB;AAExD,IAAA,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,KAAK,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC5D;;;;"}