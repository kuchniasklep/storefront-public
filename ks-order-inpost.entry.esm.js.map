{"version":3,"file":"ks-order-inpost.entry.esm.js","sources":["src/components/order/confirmation/orderInpost.css?tag=ks-order-inpost","src/components/order/confirmation/OrderInpost.tsx"],"sourcesContent":["ks-order-inpost .content {\n    background-color: #e8e8e8;\n\n    position: relative;\n    box-sizing: border-box;\n    margin: 20px;\n    max-width: 1400px;\n    width: 100%;\n    max-height: 100%;\n    overflow-y: auto;\n}\n\n@media screen and (max-width: 640px) {\n    ks-order-inpost .content {\n        margin: 0px;\n    }\n}\n\nks-order-inpost > ks-button {\n    max-width: 300px;\n    height: 46px;\n    margin: 15px auto 0 auto;\n}\n\nks-order-inpost .topBar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    background-color: #ffcd00;\n    height: 46px;\n}\n\nks-order-inpost .missing {\n    color: #dc0032;\n}\n\nks-order-inpost .topBar ks-img2 {\n    height: 40px;\n}\n\nks-order-inpost #easypack-map {\n    height: calc(100dvh - 46px);\n    max-height: 900px;\n    overflow-x: hidden;\n}\n\n@media screen and (max-width: 640px) {\n    ks-order-inpost #easypack-map {\n        max-height: 100%;\n    }\n}\n","import { Component, h, Prop, Element, State, Method } from '@stencil/core';\ndeclare var easyPack: any;\n\n@Component({\n  tag: 'ks-order-inpost',\n  styleUrl: 'orderInpost.css'\n})\nexport class OrderInpost {\n    @Element() root: HTMLElement;\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n    @Prop() search: string = \"WrocÅ‚aw, Polska\";\n    \n    @Prop() pointMessage: string = \"\";\n    @Prop() missingMessage: string = \"\";\n\n    @State() description: string = \"\";\n    @State() address: string = \"\";\n    @State() code: string = \"\";\n\n    @State() initialized = false;\n\n    widget: any;\n    overlay: HTMLKsOverlayElement;\n\n    componentDidLoad() {\n        this.overlay = this.root.querySelector(\"ks-overlay\");\n    }\n\n    show(event: Event) {\n        event.preventDefault();\n        this.overlay.show();\n\n        if(!this.initialized) {\n            (window as any).easyPackAsyncInit = ()=>{\n                easyPack.init({\n                    defaultLocale: 'pl',\n                    mapType: 'osm',\n                    searchType: 'osm',\n                    points: {\n                        types: ['parcel_locker'],\n                        functions: ['parcel_collect']\n                    },\n                    map: {\n                        initialTypes: ['parcel_locker']\n                    }\n                });\n    \n                this.widget = easyPack.mapWidget(\"easypack-map\", (point) => {\n                    this.address = point.name + \", \" + point.address[\"line1\"] + \", \" + point.address[\"line2\"];\n                    this.code = point.name;\n                    this.description = point.address[\"line1\"] + \", \" + point.address[\"line2\"] + \"<br />\" + point.name;\n        \n                    const value = point.address[\"line1\"] + \", \" + point.address[\"line2\"] + \"  (\" + point.name + \")\";\n                    const punktodbioru = point.name;\n        \n                    let formData = new FormData();\n                        formData.append(\"rodzaj\", \"wysylka_inpost\");\n                        formData.append(\"koszyk\", \"0\");\n                        formData.append(\"value\", value);\n                        formData.append(\"punktodbioru\", punktodbioru);\n        \n                    var headers = new Headers();\n                        headers.append('pragma', 'no-cache');\n                        headers.append('cache-control', 'no-cache');\n        \n                    fetch(this.api, {\n                        method: 'POST', \n                        headers: headers, \n                        body: formData,\n                        credentials: \"same-origin\"\n                    });\n        \n                    this.Validate();\n                    this.hide();\n                });\n\n                this.widget.searchPlace(this.search);\n            }\n\n            \n            this.initialized = !this.initialized;\n        }\n    }\n\n    hide(event?: Event) {\n        event?.preventDefault();\n        this.overlay.hide();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.address != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    render() {\n        return [\n            this.address ? <p>{this.address} {this.pointMessage}</p> : null,\n            this.valid === false ? <p class=\"missing\">{this.missingMessage}</p> : null,\n\n            <ks-button round icon=\"map-pin\" onClick={(e)=>this.show(e)} name={this.button}/>,\n                    \n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.address}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n\n            <ks-overlay dark>\n                <div class=\"content\">\n                    <div class=\"topBar\">\n                        <ks-img2 src=\"res/cart/inpost-dark.svg\" vertical height={100} width={300}/>\n                        <ks-button transparent icon=\"x\" onClick={(e)=>this.hide(e)} />\n                    </div>\n                    \n                    {this.initialized ? [\n                        <link rel=\"stylesheet\" href=\"https://geowidget.easypack24.net/css/easypack.css\" />,\n                        <script async src=\"https://geowidget.easypack24.net/js/sdk-for-javascript.js\"></script>,\n                        \n                        <div id=\"easypack-map\"></div>\n                    ] : null}\n                </div>\n            </ks-overlay>\n        ];\n    }\n}"],"names":[],"mappings":"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"}