{"version":3,"file":"ks-order-inpost.entry.esm.js","sources":["src/components/order/confirmation/OrderInpost.tsx"],"sourcesContent":["import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\ndeclare var easyPack: any;\ndeclare const UIkit: any;\n\n@Component({\n  tag: 'ks-order-inpost',\n})\nexport class OrderInpost {\n\n    @Prop() search: string = \"WrocÅ‚aw, Polska\";\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n\n    @Element() root: HTMLElement;\n\n    widget: any;\n\n    componentDidLoad() {\n        this.root.style.display = \"block\";\n    }\n\n    @State() description: string = \"\";\n    @State() address: string = \"\";\n    @State() code: string = \"\";\n\n    initialized = false;\n\n    Show(event: Event) {\n        event.preventDefault();\n        const element = document.querySelector(\"#ks-order-inpost\");\n        UIkit.modal(element).show();\n\n        if(!this.initialized) {\n            (window as any).easyPackAsyncInit = ()=>{\n                easyPack.init({\n                    defaultLocale: 'pl',\n                    mapType: 'osm',\n                    searchType: 'osm',\n                    points: {\n                        types: ['parcel_locker'],\n                        functions: ['parcel_collect']\n                    },\n                    map: {\n                        initialTypes: ['parcel_locker']\n                    }\n                });\n    \n                this.widget = easyPack.mapWidget(\"easypack-map\", (point) => {\n                    this.address = point.name + \", \" + point.address[\"line1\"] + \", \" + point.address[\"line2\"];\n                    this.code = point.name;\n                    this.description = point.address[\"line1\"] + \", \" + point.address[\"line2\"] + \"<br />\" + point.name;\n        \n                    const value = point.address[\"line1\"] + \", \" + point.address[\"line2\"] + \"  (\" + point.name + \")\";\n                    const punktodbioru = point.name;\n        \n                    let formData = new FormData();\n                        formData.append(\"rodzaj\", \"wysylka_inpost\");\n                        formData.append(\"koszyk\", \"0\");\n                        formData.append(\"value\", value);\n                        formData.append(\"punktodbioru\", punktodbioru);\n        \n                    var headers = new Headers();\n                        headers.append('pragma', 'no-cache');\n                        headers.append('cache-control', 'no-cache');\n        \n                    fetch(this.api, {\n                        method: 'POST', \n                        headers: headers, \n                        body: formData,\n                        credentials: \"same-origin\"\n                    });\n        \n                    this.Validate();\n                    this.Hide();\n                });\n\n                this.widget.searchPlace(this.search);\n            }\n\n            \n            this.initialized = !this.initialized;\n        }\n    }\n\n    Hide() {\n        const element = document.querySelector(\"#ks-order-inpost\");\n        UIkit.modal(element).hide();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.address != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    render() {\n        return[\n            <link rel=\"stylesheet\" href=\"https://geowidget.easypack24.net/css/easypack.css\" />,\n            <script async src=\"https://geowidget.easypack24.net/js/sdk-for-javascript.js\"></script>,\n            \n            <style innerHTML=\"\n                @keyframes ks-fade {\n                    from {opacity: 1.0;}\n                    to {opacity: 0.4;}\n                }\n\n                #easypack-map #listvillages {\n                    left: 0 !important;\n                    right: 0 !important;\n                    top: initial !important;\n                }\n\n                #easypack-map .input-group {\n                    padding: 0 !important;\n                    width: calc(100% - 60px) !important;\n                    height: 60px !important;\n                }\n\n                #easypack-map input {\n                    height: 60px;\n                }\n                #easypack-map button {\n                    height: 60px;\n                }\n            \"></style>,\n\n            <p innerHTML={this.description}></p>,\n\n            <button class={\"uk-button uk-width-1-1 uk-margin-top \" + (this.valid ? \"uk-button-secondary\" : \"uk-button-danger\")}\n                    style={{animation: this.valid ? \"\" : \"ks-fade 0.5s cubic-bezier(.86,.01,.67,1) infinite alternate\"}}\n                    onClick={(e)=>this.Show(e)}>{this.button}</button>,\n                    \n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.address}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n\n            <div id=\"ks-order-inpost\" class=\"uk-modal-full\" uk-modal>\n                <div class=\"uk-modal-dialog\">\n                    <div class=\"uk-background-cover uk-flex uk-flex-between uk-flex-column\" uk-height-viewport>\n                        <div id=\"easypack-map\" style={{height: \"100vh\", width: \"100vw\"}}></div>\n\n                        <button class=\"uk-button uk-button-secondary uk-position-top-right\"\n                                style={{width: \"60px\", height: \"60px\"}}\n                                onClick={()=>this.Hide()}>\n                            <span uk-icon=\"close\"></span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        ]\n    }\n}"],"names":[],"mappings":"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"}