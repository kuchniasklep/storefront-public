{"version":3,"names":["dataCss","PageRegister","exports","class_1","hostRef","this","heading","update","removeInfo","updateApi","emailApi","emailError","postcodeError","streetError","phoneError","country","company","email","companyName","companyNip","firstname","lastname","phone","city","street","postcode","loading","prototype","countryWatcher","setTimeout","_this","root","querySelector","Validate","render","postcodeRegex","undefined","h","Host","key","class","id","action","method","enctype","onSubmit","e","submit","api","message","required","name","label","icon","value","radio","checked","onChange","target","regex","regexMessage","type","address_id","customer_id","token","rounded","border","link","accountLink","event","preventDefault","form","ValidateInput","_a","sent"],"sources":["src/components/pages/account/data.css?tag=ks-page-account-data","src/components/pages/account/data.tsx"],"sourcesContent":["ks-page-account-data {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex: 1 1 auto;\n    \n}\n\nks-page-account-data .container {\n    max-width: 100%;\n    width: 1000px;\n    box-sizing: border-box;\n    padding: 30px;\n    margin: 30px 0px;\n    background-color: #fff;\n    border-radius: 10px;\n}\n\nks-page-account-data .buttons {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    margin-top: 30px;\n}\n\nks-page-account-data .container > h1 {\n    text-align: center;\n    margin: 10px 0px 5px 0px;\n}\n\nks-page-account-data form > h2 {\n    margin-top: 30px;\n}\n\nks-page-account-data form > ks-button {\n    margin-top: 40px;\n}\n\n\nks-page-account-data .columns {\n    display: flex;\n    gap: 20px;\n    margin-bottom: 15px;\n}\n\nks-page-account-data .columns > * {\n    width: 100%;\n}\n\nks-page-account-data .radio {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n}\n\nks-page-account-data .success {\n    text-align: center;\n}\n\nks-page-account-data .success .loader {\n    position: relative;\n    width: 100px;\n    height: 100px;\n    margin: auto;\n}\n\nks-page-account-data ks-dialog .content {\n    width: 100%;\n}\n\nks-page-account-data #notification-dialog section ks-button {\n    margin-top: 20px;\n}\n\n@media (max-width: 1060px) {\n    ks-page-account-data {\n        background-color: #fff;\n    }\n\n    ks-page-account-data .container {\n        padding: 20px;\n        margin: 0px;\n    }\n}\n\n@media (max-width: 960px) {\n    ks-page-account-data .columns {\n        flex-direction: column;\n        gap: 20px;\n    }\n}","import { Component, h, Host, Prop, Element, State, Watch } from '@stencil/core';\nimport ValidateInput from '../../input/validate';\n\n@Component({\n    tag: 'ks-page-account-data',\n    styleUrl: 'data.css'\n})\nexport class PageRegister {\n    @Element() root: HTMLElement;\n    \n    @Prop() heading: string = \"Moje dane\";\n    @Prop() update: string = \"Aktualizuj dane\";\n    @Prop() removeInfo: string = \"W celu usunięcia konta skontaktuj się z naszym działem obsługi klienta drogą mailową lub telefoniczną.\";\n\n    @Prop() address_id: string;\n    @Prop() customer_id: string;\n    @Prop() token: string;\n    \n    @Prop() accountLink: string;\n    @Prop() updateApi: string = \"\";\n    @Prop() emailApi: string = \"res/true?email=\";\n    @Prop() emailError: string = \"Podany email został już wykorzystany.\";\n    @Prop() postcodeError: string = \"Wprowadź kod pocztowy w formacie XX-XXX\";\n    @Prop() streetError: string = \"Wprowadź conajmniej nazwę ulicy oraz numer domu\";\n    @Prop() phoneError: string = \"Wprowadź prawidłowy numer telefonu\";\n\n    @Prop({mutable: true}) country: string = \"170\";\n    @Prop({mutable: true}) company: string = \"1\";\n    @Prop() email: string = \"\";\n    @Prop() companyName: string = \"\";\n    @Prop() companyNip: string = \"\";\n    @Prop() firstname: string = \"\";\n    @Prop() lastname: string = \"\";\n    @Prop() phone: string = \"\";\n    @Prop() city: string = \"\";\n    @Prop() street: string = \"\";\n    @Prop() postcode: string = \"\";\n    \n    @State() loading: boolean = false;\n\n    @Watch(\"country\") async countryWatcher() {\n        setTimeout(() => {\n            (this.root.querySelector(\"#postcode_input\") as HTMLKsInputTextElement).Validate();\n        }, 100);\n    }\n\n    render() {\n        const postcodeRegex = this.country == \"170\" ? \"^[0-9]{2}-[0-9]{3}$\" : undefined;\n\n        return <Host>\n            <section class=\"container\">\n                <h1>{this.heading}</h1>\n\n                <form id=\"updatedata\" action={this.updateApi} method=\"post\" enctype=\"application/x-www-form-urlencoded\" onSubmit={(e)=>this.submit(e)}>\n                    <ks-input-dynamic api={this.emailApi} message={this.emailError}>\n                        <ks-input-text email required name='email' label=\"Adres email\" icon=\"mail\" value={this.email} />\n                    </ks-input-dynamic>\n\n                    <div class=\"radio\">\n                        <ks-input-check radio name=\"osobowosc\" value=\"1\" label=\"Osoba fizyczna\" checked={this.company == \"1\"} onChange={() => this.company = \"1\"} />\n                        <ks-input-check radio name=\"osobowosc\" value=\"0\" label=\"Firma\"          checked={this.company == \"0\"} onChange={() => this.company = \"0\"}/>\n                    </div>\n\n                    {this.company == \"0\" && <div class=\"columns\">\n                        <ks-input-text required name='nazwa_firmy' label=\"Nazwa Firmy\" icon=\"briefcase\" value={this.companyName} />\n                        <ks-input-text required name='nip_firmy' label=\"Numer NIP\" icon=\"briefcase\" value={this.companyNip}  />\n                    </div>}\n\n                    <ks-input-select name='panstwo' label=\"Kraj\" onChange={e => this.country = (e.target as HTMLSelectElement).value}>\n                        <slot name=\"country\" />\n                    </ks-input-select>\n\n                    <div class=\"columns\">\n                        <div>\n                            <ks-input-text required name='imie' label=\"Imię\" icon=\"user\" value={this.firstname} />\n                            <ks-input-text required name='nazwisko' label=\"Nazwisko\" icon=\"user\" value={this.lastname} />\n                            <ks-input-text required phone name='telefon' label=\"Numer Telefonu\" icon=\"phone\" value={this.phone} />\n                        </div>\n\n                        <div>\n                            <ks-input-text required name='miasto' label=\"Miasto\" icon=\"map-pin\" value={this.city} />\n                            <ks-input-text required name='ulica' label=\"Ulica i numer domu / lokalu\" icon=\"map-pin\" value={this.street} regex=\"[a-zа-я].*[0-9]|[0-9].*[a-zа-я]\" regexMessage={this.streetError}/>\n                            <ks-input-text required id=\"postcode_input\" name='kod_pocztowy' label=\"Kod Pocztowy\" icon=\"map-pin\" value={this.postcode} regex={postcodeRegex} regexMessage={this.postcodeError} />\n                        </div>\n                    </div>\n\n                    <input type=\"hidden\" value=\"1\" name=\"przetwarzanie\" />\n                    <input type=\"hidden\" value=\"1\" name=\"przetwarzanie_dodatkowe\" />\n                    <input type=\"hidden\" name=\"adres_id\" value={this.address_id} />\n                    <input type=\"hidden\" name=\"id_klienta\" id=\"id_klienta\" value={this.customer_id} />\n                    <input type=\"hidden\" name=\"tok\" value={this.token} />\n                    <input type=\"hidden\" name=\"akcja\" value=\"zapisz\" />\n\n\n                    <p>{this.removeInfo}</p>\n\n                    <div class=\"buttons\">\n                        <ks-button rounded submit name={this.update} loading={this.loading} />\n                        <ks-button rounded border link={this.accountLink} name=\"Wróć do panelu klienta\" loading={this.loading} />\n                    </div>\n                </form>\n            </section>\n        </Host>;\n    }\n\n    async submit(event: Event) {\n        event.preventDefault();\n        this.loading = true;\n        \n        const form = this.root.querySelector(\"#updatedata\") as HTMLFormElement;\n        \n        if(!await ValidateInput(form)) {\n            this.loading = false;\n            return;\n        }\n\n        form.submit();\n    }\n}\n"],"mappings":"iqDAAA,IAAMA,EAAU,q4C,ICOHC,EAAYC,EAAA,kCAJzB,SAAAC,EAAAC,G,UAOYC,KAAOC,QAAW,YAClBD,KAAME,OAAW,kBACjBF,KAAUG,WAAW,yGAOrBH,KAASI,UAAW,GACpBJ,KAAQK,SAAW,kBACnBL,KAAUM,WAAW,wCACrBN,KAAaO,cAAW,0CACxBP,KAAWQ,YAAW,kDACtBR,KAAUS,WAAW,qCAENT,KAAOU,QAAW,MAClBV,KAAOW,QAAW,IACjCX,KAAKY,MAAW,GAChBZ,KAAWa,YAAW,GACtBb,KAAUc,WAAW,GACrBd,KAASe,UAAW,GACpBf,KAAQgB,SAAW,GACnBhB,KAAKiB,MAAW,GAChBjB,KAAIkB,KAAW,GACflB,KAAMmB,OAAW,GACjBnB,KAAQoB,SAAW,GAElBpB,KAAOqB,QAAY,KAgF/B,CA9E2BvB,EAAAwB,UAAAC,eAAN,W,gGACdC,YAAW,WACNC,EAAKC,KAAKC,cAAc,mBAA8CC,U,GACxE,K,iBAGP9B,EAAAwB,UAAAO,OAAA,eAAAJ,EAAAzB,KACI,IAAM8B,EAAgB9B,KAAKU,SAAW,MAAQ,sBAAwBqB,UAEtE,OAAOC,EAACC,EAAI,CAAAC,IAAA,4CACRF,EAAS,WAAAE,IAAA,2CAAAC,MAAM,aACXH,EAAK,MAAAE,IAAA,4CAAAlC,KAAKC,SAEV+B,EAAA,QAAAE,IAAA,2CAAME,GAAG,aAAaC,OAAQrC,KAAKI,UAAWkC,OAAO,OAAOC,QAAQ,oCAAoCC,SAAU,SAACC,GAAI,OAAAhB,EAAKiB,OAAOD,EAAZ,GACnHT,EAAkB,oBAAAE,IAAA,2CAAAS,IAAK3C,KAAKK,SAAUuC,QAAS5C,KAAKM,YAChD0B,EAAe,iBAAAE,IAAA,2CAAAtB,MAAK,KAACiC,SAAQ,KAACC,KAAK,QAAQC,MAAM,cAAcC,KAAK,OAAOC,MAAOjD,KAAKY,SAG3FoB,EAAK,OAAAE,IAAA,2CAAAC,MAAM,SACPH,EAAA,kBAAAE,IAAA,2CAAgBgB,MAAK,KAACJ,KAAK,YAAYG,MAAM,IAAIF,MAAM,iBAAiBI,QAASnD,KAAKW,SAAW,IAAKyC,SAAU,WAAM,OAAA3B,EAAKd,QAAU,GAAf,IACtHqB,EAAA,kBAAAE,IAAA,2CAAgBgB,MAAK,KAACJ,KAAK,YAAYG,MAAM,IAAIF,MAAM,QAAiBI,QAASnD,KAAKW,SAAW,IAAKyC,SAAU,WAAM,OAAA3B,EAAKd,QAAU,GAAf,KAGzHX,KAAKW,SAAW,KAAOqB,EAAK,OAAAE,IAAA,2CAAAC,MAAM,WAC/BH,EAAA,iBAAAE,IAAA,2CAAeW,SAAS,KAAAC,KAAK,cAAcC,MAAM,cAAcC,KAAK,YAAYC,MAAOjD,KAAKa,cAC5FmB,EAAe,iBAAAE,IAAA,2CAAAW,SAAQ,KAACC,KAAK,YAAYC,MAAM,YAAYC,KAAK,YAAYC,MAAOjD,KAAKc,cAG5FkB,EAAiB,mBAAAE,IAAA,2CAAAY,KAAK,UAAUC,MAAM,OAAOK,SAAU,SAAAX,GAAK,OAAAhB,EAAKf,QAAW+B,EAAEY,OAA6BJ,KAA/C,GACxDjB,EAAA,QAAAE,IAAA,2CAAMY,KAAK,aAGfd,EAAK,OAAAE,IAAA,2CAAAC,MAAM,WACPH,EAAA,OAAAE,IAAA,4CACIF,EAAA,iBAAAE,IAAA,2CAAeW,SAAS,KAAAC,KAAK,OAAOC,MAAM,OAAOC,KAAK,OAAOC,MAAOjD,KAAKe,YACzEiB,EAAA,iBAAAE,IAAA,2CAAeW,SAAS,KAAAC,KAAK,WAAWC,MAAM,WAAWC,KAAK,OAAOC,MAAOjD,KAAKgB,WACjFgB,EAAe,iBAAAE,IAAA,2CAAAW,SAAQ,KAAC5B,MAAK,KAAC6B,KAAK,UAAUC,MAAM,iBAAiBC,KAAK,QAAQC,MAAOjD,KAAKiB,SAGjGe,EAAA,OAAAE,IAAA,4CACIF,EAAA,iBAAAE,IAAA,2CAAeW,SAAS,KAAAC,KAAK,SAASC,MAAM,SAASC,KAAK,UAAUC,MAAOjD,KAAKkB,OAChFc,EAAA,iBAAAE,IAAA,2CAAeW,SAAQ,KAACC,KAAK,QAAQC,MAAM,8BAA8BC,KAAK,UAAUC,MAAOjD,KAAKmB,OAAQmC,MAAM,kCAAkCC,aAAcvD,KAAKQ,cACvKwB,EAAA,iBAAAE,IAAA,2CAAeW,SAAQ,KAACT,GAAG,iBAAiBU,KAAK,eAAeC,MAAM,eAAeC,KAAK,UAAUC,MAAOjD,KAAKoB,SAAUkC,MAAOxB,EAAeyB,aAAcvD,KAAKO,kBAI3KyB,EAAO,SAAAE,IAAA,2CAAAsB,KAAK,SAASP,MAAM,IAAIH,KAAK,kBACpCd,EAAO,SAAAE,IAAA,2CAAAsB,KAAK,SAASP,MAAM,IAAIH,KAAK,4BACpCd,EAAA,SAAAE,IAAA,2CAAOsB,KAAK,SAASV,KAAK,WAAWG,MAAOjD,KAAKyD,aACjDzB,EAAA,SAAAE,IAAA,2CAAOsB,KAAK,SAASV,KAAK,aAAaV,GAAG,aAAaa,MAAOjD,KAAK0D,cACnE1B,EAAA,SAAAE,IAAA,2CAAOsB,KAAK,SAASV,KAAK,MAAMG,MAAOjD,KAAK2D,QAC5C3B,EAAO,SAAAE,IAAA,2CAAAsB,KAAK,SAASV,KAAK,QAAQG,MAAM,WAGxCjB,EAAI,KAAAE,IAAA,4CAAAlC,KAAKG,YAET6B,EAAK,OAAAE,IAAA,2CAAAC,MAAM,WACPH,EAAA,aAAAE,IAAA,2CAAW0B,QAAO,KAAClB,OAAM,KAACI,KAAM9C,KAAKE,OAAQmB,QAASrB,KAAKqB,UAC3DW,EAAW,aAAAE,IAAA,2CAAA0B,QAAQ,KAAAC,OAAO,KAAAC,KAAM9D,KAAK+D,YAAajB,KAAK,yBAAyBzB,QAASrB,KAAKqB,a,EAO5GvB,EAAAwB,UAAAoB,OAAN,SAAasB,G,kHACTA,EAAMC,iBACNjE,KAAKqB,QAAU,KAET6C,EAAOlE,KAAK0B,KAAKC,cAAc,eAEjC,SAAMwC,EAAcD,I,OAAxB,IAAIE,EAAAC,OAA2B,CAC3BrE,KAAKqB,QAAU,MACf,S,CAGJ6C,EAAKxB,S,qQA7GY,I","ignoreList":[]}