{"version":3,"names":["productCss","PageProduct","componentWillLoad","productDataElement","document","getElementById","this","productData","JSON","parse","innerHTML","Object","keys","map","key","product","set","setDefaultTrait","productDynamicDataElement","productDynamicData","productDynamic","setTimeout","track","get","traits","reduce","accumulator","trait","id","items","DataLayer","state","componentDidUpdate","window","handleInpostIziButtons","render","infoBanner","productBanner","points","recycle","installments","tags","variants","gspr","tabs","name","info","youtube","similar","accessories","model","ean","review","strings","h","skipbase","commonData","commonDynamicData","content","cartText","common","addToCart","availabilityText","notifyAvailability","style","marginTop","icon","href","message","shortMessage","attributeMessage","image","energyOld","energy","marginRight","class","negotiateHeading","payuId","payuKey","caParameters","button","price","payuIcon","parameters","caIcon","slot","length","padding","names","tab","join","index","open","main","files","center","file","round","newtab","nofollow","link","url","width","maxWidth","similarHeading","card","accessoriesHeading"],"sources":["src/components/pages/product/product.css?tag=ks-page-product","src/components/pages/product/product.tsx"],"sourcesContent":["ks-page-product > ks-page-base > .listing-heading {\n    text-align: center;\n    margin-top: 15px;\n    font-size: large;\n    font-weight: 700;\n    margin-bottom: 15px;\n    font-family: var(--font-emphasis);\n}\n\nks-page-product > ks-page-base > ks-product-container {\n    margin-bottom: 15px;\n}","import { Component, h, Prop, Build } from '@stencil/core';\nimport { product, ProductData } from \"../../../global/data/product\";\nimport { productDynamic, ProductDynamicData } from \"../../../global/data/productDynamic\";\nimport { common } from '../../../global/data/common';\nimport { DataLayer } from '../../../global/dataLayer';\n\ndeclare global { interface Window { dataLayer: any[] }}\n@Component({\n    tag: 'ks-page-product',\n    styleUrl: 'product.css'\n})\nexport class PageProduct {\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() productData: string;\n    @Prop() productDynamicData: string;\n\n    componentWillLoad() {\n        const productDataElement = document.getElementById(this.productData);\n\t\tconst productData = JSON.parse(productDataElement.innerHTML) as ProductData;\n\n        Object.keys(productData).map(key => {\n\t\t\tproduct.set(key as keyof ProductData, productData[key]);\n\t\t});\n\n        this.setDefaultTrait();\n\n        if (Build.isBrowser) {\n            const productDynamicDataElement = document.getElementById(this.productDynamicData);\n            const productDynamicData = JSON.parse(productDynamicDataElement.innerHTML) as ProductDynamicData;\n    \n            Object.keys(productDynamicData).map(key => {\n                productDynamic.set(key as keyof ProductDynamicData, productDynamicData[key]);\n            });\n    \n            setTimeout(() => {\n                productDynamic.set(\"loaded\", true);\n            }, 100);\n\n            this.track();\n        }\n    }\n\n    setDefaultTrait() {\n\t\tif(!product?.get(\"traits\"))\treturn;\n\t\t\n\t\tconst traits = product.get(\"traits\").reduce((accumulator, trait) => {\n\t\t\treturn accumulator + \"x\" + trait.id + \"-\" + trait.items[0].id;\n\t\t}, \"\");\n\n\t\tproduct.set(\"traitIDs\", traits);\n\t}\n\n    track() {\n        DataLayer.product(product.state, productDynamic.get(\"eventId\"));\n    }\n\n    componentDidUpdate() {\n        (window as any).handleInpostIziButtons();\n    }\n\n\trender() {\n        if(!product?.get('name')) return false;\n\n        const infoBanner = product.get(\"infoBanner\");\n        const productBanner = product.get(\"productBanner\");\n\n        const points = product.get(\"points\");\n        const recycle = product.get(\"recycle\");\n        const installments = product.get('installments');\n        const tags = product.get('tags');\n        const variants = product.get('variants');\n\n        const gspr = product.get(\"gspr\");\n        const tabs = [\n            ...product.get('tabs'), \n            ...(gspr?.name || gspr?.info ?\n                [{name: \"Producent\", gspr: gspr}] : []\n            )\n        ]\n\n        const youtube = product.get('youtube');\n\n        const similar = product.get('similar');\n        const accessories = product.get('accessories');\n\n        const model = product.get('model') || product.get('catalog');\n        const ean = product.get('ean');\n\n        const review = product.get('reviewAverage');\n\n        const strings = product.get('strings');\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n\n            {infoBanner ? \n                <ks-content-info-banner content={infoBanner} />\n            : null}\n\n            <ks-container>\n                <ks-product-notify-edrone/>\n                <ks-product-admin/>\n\n                {product.get(\"message\") ?\n                    <ks-product-message/>\n                :null}\n                \n                <ks-product-info>\n                    {product.get('traits') ?\n                        <ks-product-traits></ks-product-traits>\n                    : null}\n                \n                    <ks-product-purchase\n                        cartText={common.get('translations').addToCart}\n                        availabilityText={strings.notifyAvailability}\n                    ></ks-product-purchase>\n\n                    <ks-product-shipping></ks-product-shipping>\n\n                    {product.get('warranty') ? \n                        <ks-product-attribute style={{marginTop: \"15px\"}} icon=\"tool\" href={product.get('warrantyLink')}>\n                            {product.get('warranty')}\n                        </ks-product-attribute>\n                    : null}\n                    \n                    {points ?\n                        <ks-product-tooltip message={points.message}>\n                            <ks-product-attribute icon=\"gift\">{points.shortMessage}</ks-product-attribute>\n                        </ks-product-tooltip>\n                    : null}\n\n                    {recycle ?\n                        <ks-product-tooltip message={recycle.message}>\n                            <ks-product-attribute icon=\"recycle\">{recycle.shortMessage}</ks-product-attribute>\n                        </ks-product-tooltip>\n                    : null}\n\n                    {installments?.attributeMessage ?\n                        <ks-product-attribute icon=\"dollar-sign\">{installments?.attributeMessage}</ks-product-attribute>\n                    : null}\n\n                    {product.get(\"energy\") && product.get(\"energyLabel\") ? \n                        <ks-product-image-popup image={product.get(\"energyLabel\")}>\n                            <ks-product-attribute energyOld={product.get(\"energyOld\")} energy={product.get(\"energy\")}>Klasa energetyczna</ks-product-attribute>\n                        </ks-product-image-popup>\n                    : null}\n\n                    {model || ean ?\n                        <ks-product-attribute style={{marginTop: \"15px\"}} icon=\"file\" >\n                            <span style={{marginRight: \"15px\"}}>\n                                {model ? <span style={{marginRight: \"7px\"}}>{strings.model} {model} </span> : null}\n                                {ean ? <span>{strings.ean} {ean}</span> : null}\n                            </span>\n                        </ks-product-attribute>\n                    : null}\n\n                    <div class=\"buttons\">\n                        {product.get('negotiateEnabled') ?\n                            <ks-product-negotiate>\n                                <ks-product-button>{product.get('strings').negotiateHeading}</ks-product-button>\n                            </ks-product-negotiate>\n                        : null}\n\n                        {(installments.payuId && installments.payuKey) || installments.caParameters ?\n                            <ks-product-installments name={installments.button}>\n                                {installments.payuId && installments.payuKey ?\n                                    <ks-product-calculator-payu\n                                        price={product.get(\"currentPrice\")}\n                                        pos-id={installments.payuId}\n                                        api-key={installments.payuKey}>\n                                        <ks-product-button icon={installments.payuIcon}/>\n                                    </ks-product-calculator-payu>\n                                : null}\n\n                                {installments.caParameters ?\n                                    <ks-product-calculator-ca\n                                        price={product.get(\"currentPrice\")}\n                                        parameters={installments.caParameters}>\n                                        <ks-product-button icon={installments.caIcon}/>\n                                    </ks-product-calculator-ca>\n                                : null}\n                            </ks-product-installments>\n                        : null}\n                    </div>\n\n                    <ks-product-brand slot=\"brand\"/>\n                </ks-product-info>\n            </ks-container>\n\n            {productBanner && productBanner?.image ?\n                <ks-container>\n                    <ks-content-info-banner productBanner={productBanner} />\n                </ks-container>\n            : null}\n\n            {tags?.length > 0 || variants?.length > 0 ?\n                <ks-container padding>\n                    {tags?.length > 0 && !(variants?.length > 0) ?\n                        <ks-product-tags />\n                    : null}\n\n                    {variants?.length > 0 ?\n                        <ks-product-variants />\n                    : null}\n                </ks-container>\n            : null}\n\n            {tabs?.length > 0 ?\n                <ks-container>\n                    <ks-product-tabs names={tabs.map(tab => tab.name).join(\", \")}>\n                        {tabs.map((tab, index) => \n                            <ks-product-tab name={tab.name} open={index==0} main={index==0} content={tab.content} gspr={tab.gspr} />\n                        )}\n                    </ks-product-tabs>\n                </ks-container>\n            : null}\n\n            {gspr.files?.length > 0 ?\n                <ks-container padding center>\n                    {gspr.files.map(file => \n                        <ks-button class=\"file\" round newtab nofollow link={file.url} name={file.name} style={{width: \"100%\", maxWidth: \"300px\"}}/>\n                    )}\n                </ks-container>\n            : null}\n\n            {product.get('reviewProducts')?.length > 0 ?\n                <ks-container>\n                    <ks-review-product />\n                </ks-container>\n            : null}\n\n            {tags?.length > 0 && variants?.length > 0 ?\n                <ks-container padding>\n                    <ks-product-tags/>\n                </ks-container>\n            : null}\n\n            {youtube ?\n                <ks-container>\n                    {youtube.map(id => <ks-product-youtube video-id={id} />)}\n                </ks-container>\n            : null}\n\n            {similar?.length > 0 ? [\n                    <span class=\"listing-heading\">{strings.similarHeading}</span>,\n                    <ks-product-container>\n                        {similar.map(card => \n                            <ks-product-card product={card}/>\n                        )}\n                    </ks-product-container>]\n            : null}\n\n            {accessories?.length > 0 ? [\n                <span class=\"listing-heading\">{strings.accessoriesHeading}</span>,\n                <ks-product-container>\n                    {accessories.map(card => \n                        <ks-product-card product={card}/>\n                    )}\n                </ks-product-container>\n            ] : null}\n\n            {review ?\n                <ks-content-reviews content={review} />\n            : null}\n        </ks-page-base>;\n\t}\n}\n\n\n\n\n"],"mappings":"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","ignoreList":[]}