{"version":3,"names":["productCss","PageProduct","componentWillLoad","productDataElement","document","getElementById","this","productData","JSON","parse","innerHTML","Object","keys","map","key","product","set","setDefaultTrait","Build","isBrowser","productDynamicDataElement","productDynamicData","productDynamic","setTimeout","track","get","traits","reduce","accumulator","trait","id","items","DataLayer","state","render","infoBanner","productBanner","points","recycle","installments","tags","variants","tabs","youtube","similar","accessories","model","ean","review","strings","h","skipbase","commonData","commonDynamicData","content","cartText","common","addToCart","availabilityText","notifyAvailability","style","marginTop","icon","href","message","shortMessage","attributeMessage","faded","marginRight","class","negotiateHeading","payuId","payuKey","caParameters","name","button","price","payuIcon","parameters","caIcon","slot","image","length","padding","names","tab","join","index","open","main","_a","similarHeading","card","accessoriesHeading"],"sources":["src/components/pages/product/product.css?tag=ks-page-product","src/components/pages/product/product.tsx"],"sourcesContent":["ks-page-product > ks-page-base > h3 {\n    text-align: center;\n    margin-top: 15px;\n}\n\nks-page-product > ks-page-base > ks-product-container {\n    margin-bottom: 15px;\n}","import { Component, h, Prop, Build } from '@stencil/core';\nimport { product, ProductData } from \"../../../global/data/product\";\nimport { productDynamic, ProductDynamicData } from \"../../../global/data/productDynamic\";\nimport { common } from '../../../global/data/common';\nimport { DataLayer } from '../../../global/dataLayer';\n\ndeclare global { interface Window { dataLayer: any[] }}\n@Component({\n    tag: 'ks-page-product',\n    styleUrl: 'product.css'\n})\nexport class PageProduct {\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() productData: string;\n    @Prop() productDynamicData: string;\n\n    componentWillLoad() {\n        const productDataElement = document.getElementById(this.productData);\n\t\tconst productData = JSON.parse(productDataElement.innerHTML) as ProductData;\n\n        Object.keys(productData).map(key => {\n\t\t\tproduct.set(key as keyof ProductData, productData[key]);\n\t\t});\n\n        this.setDefaultTrait();\n\n        if (Build.isBrowser) {\n            const productDynamicDataElement = document.getElementById(this.productDynamicData);\n            const productDynamicData = JSON.parse(productDynamicDataElement.innerHTML) as ProductDynamicData;\n    \n            Object.keys(productDynamicData).map(key => {\n                productDynamic.set(key as keyof ProductDynamicData, productDynamicData[key]);\n            });\n    \n            setTimeout(() => {\n                productDynamic.set(\"loaded\", true);\n            }, 100);\n\n            this.track();\n        }\n    }\n\n    setDefaultTrait() {\n\t\tif(!product?.get(\"traits\"))\treturn;\n\t\t\n\t\tconst traits = product.get(\"traits\").reduce((accumulator, trait) => {\n\t\t\treturn accumulator + \"x\" + trait.id + \"-\" + trait.items[0].id;\n\t\t}, \"\");\n\n\t\tproduct.set(\"traitIDs\", traits);\n\t}\n\n    track() {\n        DataLayer.product(product.state, productDynamic.get(\"eventId\"));\n    }\n\n\trender() {\n        if(!product?.get('name')) return false;\n\n        const infoBanner = product.get(\"infoBanner\");\n        const productBanner = product.get(\"productBanner\");\n\n        const points = product.get(\"points\");\n        const recycle = product.get(\"recycle\");\n        const installments = product.get('installments');\n        const tags = product.get('tags');\n        const variants = product.get('variants');\n        const tabs = product.get('tabs');\n        const youtube = product.get('youtube');\n\n        const similar = product.get('similar');\n        const accessories = product.get('accessories');\n\n        const model = product.get('model') || product.get('catalog');\n        const ean = product.get('ean');\n\n        const review = product.get('reviewAverage');\n\n        const strings = product.get('strings');\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n\n            {infoBanner ? \n                <ks-content-info-banner content={infoBanner} />\n            : null}\n\n            <ks-container>\n                <ks-product-notify-edrone/>\n                <ks-product-admin/>\n\n                {product.get(\"message\") ?\n                    <ks-product-message/>\n                :null}\n                \n                <ks-product-info>\n                    {product.get('traits') ?\n                        <ks-product-traits></ks-product-traits>\n                    : null}\n                \n                    <ks-product-purchase\n                        cartText={common.get('translations').addToCart}\n                        availabilityText={strings.notifyAvailability}\n                    ></ks-product-purchase>\n                    <ks-product-shipping></ks-product-shipping>\n\n                    {product.get('warranty') ? \n                        <ks-product-attribute style={{marginTop: \"15px\"}} icon=\"tool\" href={product.get('warrantyLink')}>\n                            {product.get('warranty')}\n                        </ks-product-attribute>\n                    : null}\n                    \n                    {points ?\n                        <ks-product-tooltip message={points.message}>\n                            <ks-product-attribute icon=\"gift\">{points.shortMessage}</ks-product-attribute>\n                        </ks-product-tooltip>\n                    : null}\n\n                    {recycle ?\n                        <ks-product-tooltip message={recycle.message}>\n                            <ks-product-attribute icon=\"recycle\">{recycle.shortMessage}</ks-product-attribute>\n                        </ks-product-tooltip>\n                    : null}\n\n                    {installments?.attributeMessage ?\n                        <ks-product-attribute icon=\"dollar-sign\">{installments?.attributeMessage}</ks-product-attribute>\n                    : null}\n\n                    {model || ean ?\n                        <ks-product-attribute style={{marginTop: \"15px\"}} icon=\"file\" faded>\n                            <span style={{marginRight: \"15px\"}}>\n                                {model ? <span style={{marginRight: \"7px\"}}>{strings.model} {model} </span> : null}\n                                {ean ? <span>{strings.ean} {ean}</span> : null}\n                            </span>\n                        </ks-product-attribute>\n                    : null}\n\n                    <div class=\"buttons\">\n                        {product.get('negotiateEnabled') ?\n                            <ks-product-negotiate>\n                                <ks-product-button>{product.get('strings').negotiateHeading}</ks-product-button>\n                            </ks-product-negotiate>\n                        : null}\n\n                        {(installments.payuId && installments.payuKey) || installments.caParameters ?\n                            <ks-product-installments name={installments.button}>\n                                {installments.payuId && installments.payuKey ?\n                                    <ks-product-calculator-payu\n                                        price={product.get(\"currentPrice\")}\n                                        pos-id={installments.payuId}\n                                        api-key={installments.payuKey}>\n                                        <ks-product-button icon={installments.payuIcon}/>\n                                    </ks-product-calculator-payu>\n                                : null}\n\n                                {installments.caParameters ?\n                                    <ks-product-calculator-ca\n                                        price={product.get(\"currentPrice\")}\n                                        parameters={installments.caParameters}>\n                                        <ks-product-button icon={installments.caIcon}/>\n                                    </ks-product-calculator-ca>\n                                : null}\n                            </ks-product-installments>\n                        : null}\n                    </div>\n\n                    <ks-product-brand slot=\"brand\"/>\n                </ks-product-info>\n            </ks-container>\n\n            {productBanner && productBanner?.image ?\n                <ks-container>\n                    <ks-content-info-banner productBanner={productBanner} />\n                </ks-container>\n            : null}\n\n            {tags?.length > 0 || variants?.length > 0 ?\n                <ks-container padding>\n                    {tags?.length > 0 && !(variants?.length > 0) ?\n                        <ks-product-tags />\n                    : null}\n\n                    {variants?.length > 0 ?\n                        <ks-product-variants />\n                    : null}\n                </ks-container>\n            : null}\n\n            {tabs?.length > 0 ?\n                <ks-container>\n                    <ks-product-tabs names={tabs.map(tab => tab.name).join(\", \")}>\n                        {tabs.map((tab, index) => \n                            <ks-product-tab name={tab.name} open={index==0} main={index==0} content={tab.content} />\n                        )}\n                    </ks-product-tabs>\n                </ks-container>\n            : null}\n\n            {product.get('reviewProducts')?.length > 0 ?\n                <ks-container>\n                    <ks-review-product />\n                </ks-container>\n            : null}\n\n            {tags?.length > 0 && variants?.length > 0 ?\n                <ks-container padding>\n                    <ks-product-tags/>\n                </ks-container>\n            : null}\n\n            {youtube ?\n                <ks-container>\n                    {youtube.map(id => <ks-product-youtube video-id={id} />)}\n                </ks-container>\n            : null}\n\n            {similar?.length > 0 ? [\n                    <h3>{strings.similarHeading}</h3>,\n                    <ks-product-container>\n                        {similar.map(card => \n                            <ks-product-card product={card}/>\n                        )}\n                    </ks-product-container>]\n            : null}\n\n            {accessories?.length > 0 ? [\n                <h3>{strings.accessoriesHeading}</h3>,\n                <ks-product-container>\n                    {accessories.map(card => \n                        <ks-product-card product={card}/>\n                    )}\n                </ks-product-container>\n            ] : null}\n\n            {review ?\n                <ks-content-reviews content={review} />\n            : null}\n        </ks-page-base>;\n\t}\n}\n\n\n\n\n"],"mappings":"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"}