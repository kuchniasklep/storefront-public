{"version":3,"names":["orderDPDCss","OrderDPD","exports","class_1","hostRef","this","api","button","pointMessage","missingMessage","description","code","initialized","valid","prototype","componentDidLoad","overlay","root","querySelector","show","event","preventDefault","hide","Validate","IsValid","select","point","formData","FormData","append","headers","Headers","fetch","method","body","credentials","render","_this","h","class","key","round","icon","onClick","e","name","type","value","dark","src","vertical","height","width","id","innerHTML"],"sources":["src/components/order/confirmation/orderDPD.css?tag=ks-order-dpd","src/components/order/confirmation/orderDPD.tsx"],"sourcesContent":["ks-order-dpd .content {\n    background-color: #e8e8e8;\n\n    position: relative;\n    box-sizing: border-box;\n    margin: 20px;\n    max-width: 1200px;\n    width: 100%;\n    max-height: 100%;\n    overflow-y: auto;\n}\n\n@media screen and (max-width: 640px) {\n    ks-order-dpd .content {\n        margin: 0px;\n    }\n}\n\nks-order-dpd > ks-button {\n    max-width: 300px;\n    margin: 15px auto 0 auto;\n}\n\nks-order-dpd .topBar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    background-color: #dc0032;\n}\n\nks-order-dpd .missing {\n    color: #dc0032;\n}\n\nks-order-dpd .topBar ks-img2 {\n    height: 40px;\n}","import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\n@Component({\n  tag: 'ks-order-dpd',\n  styleUrl: 'orderDPD.css'\n})\nexport class OrderDPD {\n    @Element() root: HTMLElement;\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n    @Prop() pointMessage: string = \"\";\n    @Prop() missingMessage: string = \"\";\n    @Prop() description: string = \"\";\n\n    @State() code: string = \"\";\n    @State() initialized = false;\n\n    overlay: HTMLKsOverlayElement;\n    componentDidLoad() {\n        this.overlay = this.root.querySelector(\"ks-overlay\");\n    }\n\n    show(event: Event) {\n        event.preventDefault();\n        this.overlay.show();\n        this.initialized = true;\n    }\n\n    hide(event: Event) {\n        event?.preventDefault();\n        this.overlay.hide();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.code != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    @Method()\n    async select(point: string) {\n        this.code = point;\n        this.Validate();\n        this.hide(null);\n\n        let formData = new FormData();\n            formData.append(\"rodzaj\", \"wysylka_dpdpickup\");\n            formData.append(\"koszyk\", \"0\");\n            formData.append(\"value\", point);\n            formData.append(\"punktodbioru\", point);\n        \n        var headers = new Headers();\n            headers.append('pragma', 'no-cache');\n            headers.append('cache-control', 'no-cache');\n        \n        fetch(this.api, {\n            method: 'POST', \n            headers: headers, \n            body: formData,\n            credentials: \"same-origin\"\n        });\n    }\n\n    render() {\n        return [\n            this.code ? <p>{this.pointMessage}: {this.code}</p> : null,\n            this.valid === false ? <p class=\"missing\">{this.missingMessage}</p> : null,\n\n            <ks-button round icon=\"map-pin\" onClick={(e)=>this.show(e)} name={this.button}/>,\n                    \n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.code}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n\n            <ks-overlay dark>\n                <div class=\"content\">\n                    <div class=\"topBar\">\n                        <ks-img2 src=\"res/cart/dpd.svg\" vertical height={100} width={300}/>\n                        <ks-button icon=\"x\" onClick={(e)=>this.hide(e)} />\n                    </div>\n                    \n                    {this.initialized ? [\n                        <script id=\"dpd-widget\" type=\"text/javascript\" innerHTML=\"\n                            function pointSelected(pointID){\n                                document.querySelector('ks-order-dpd').select(pointID);\n                            }\n                        \"></script>,\n                        <script type=\"text/javascript\" src=\"//pudofinder.dpd.com.pl/source/dpd_widget.js?key=a9b08eb6c1b218b975529f9cea0e1364\"></script>\n                    ] : null}\n                </div>\n            </ks-overlay>\n        ];\n    }\n}"],"mappings":"omDAAA,IAAMA,EAAc,+jB,ICMPC,EAAQC,EAAA,0BAJrB,SAAAC,EAAAC,G,UAMYC,KAAGC,IAAW,GACdD,KAAME,OAAW,GACjBF,KAAYG,aAAW,GACvBH,KAAcI,eAAW,GACzBJ,KAAWK,YAAW,GAErBL,KAAIM,KAAW,GACfN,KAAWO,YAAG,MAkBdP,KAAKQ,MAAY,IAiE7B,CAhFGV,EAAAW,UAAAC,iBAAA,WACIV,KAAKW,QAAUX,KAAKY,KAAKC,cAAc,a,EAG3Cf,EAAAW,UAAAK,KAAA,SAAKC,GACDA,EAAMC,iBACNhB,KAAKW,QAAQG,OACbd,KAAKO,YAAc,I,EAGvBT,EAAAW,UAAAQ,KAAA,SAAKF,GACDA,IAAK,MAALA,SAAK,SAALA,EAAOC,iBACPhB,KAAKW,QAAQM,M,EAMXnB,EAAAW,UAAAS,SAAN,W,qFACIlB,KAAKQ,MAAQR,KAAKM,MAAQ,G,iBAIxBR,EAAAW,UAAAU,QAAN,W,qFACI,SAAOnB,KAAKQ,M,QAIVV,EAAAW,UAAAW,OAAN,SAAaC,G,6FACTrB,KAAKM,KAAOe,EACZrB,KAAKkB,WACLlB,KAAKiB,KAAK,MAENK,EAAW,IAAIC,SACfD,EAASE,OAAO,SAAU,qBAC1BF,EAASE,OAAO,SAAU,KAC1BF,EAASE,OAAO,QAASH,GACzBC,EAASE,OAAO,eAAgBH,GAEhCI,EAAU,IAAIC,QACdD,EAAQD,OAAO,SAAU,YACzBC,EAAQD,OAAO,gBAAiB,YAEpCG,MAAM3B,KAAKC,IAAK,CACZ2B,OAAQ,OACRH,QAASA,EACTI,KAAMP,EACNQ,YAAa,gB,iBAIrBhC,EAAAW,UAAAsB,OAAA,eAAAC,EAAAhC,KACI,MAAO,CACHA,KAAKM,KAAO2B,EAAA,SAAIjC,KAAKG,aAAY,KAAIH,KAAKM,MAAY,KACtDN,KAAKQ,QAAU,MAAQyB,EAAG,KAAAC,MAAM,WAAWlC,KAAKI,gBAAsB,KAEtE6B,EAAW,aAAAE,IAAA,2CAAAC,MAAM,KAAAC,KAAK,UAAUC,QAAS,SAACC,GAAI,OAAAP,EAAKlB,KAAKyB,EAAV,EAAcC,KAAMxC,KAAKE,SAEvE+B,EAAA,SAAAE,IAAA,2CAAOM,KAAK,SAASD,KAAK,kBAAkBE,MAAO1C,KAAKM,OACxD2B,EAAA,SAAAE,IAAA,2CAAOM,KAAK,SAASD,KAAK,0BAA0BE,MAAO1C,KAAKM,OAEhE2B,EAAA,cAAAE,IAAA,2CAAYQ,KAAI,MACZV,EAAK,OAAAE,IAAA,2CAAAD,MAAM,WACPD,EAAK,OAAAE,IAAA,2CAAAD,MAAM,UACPD,EAAA,WAAAE,IAAA,2CAASS,IAAI,mBAAmBC,SAAQ,KAACC,OAAQ,IAAKC,MAAO,MAC7Dd,EAAA,aAAAE,IAAA,2CAAWE,KAAK,IAAIC,QAAS,SAACC,GAAI,OAAAP,EAAKf,KAAKsB,EAAV,KAGrCvC,KAAKO,YAAc,CAChB0B,EAAQ,UAAAe,GAAG,aAAaP,KAAK,kBAAkBQ,UAAU,qNAKzDhB,EAAA,UAAQQ,KAAK,kBAAkBG,IAAI,uFACnC,O,yHAvFH,I","ignoreList":[]}