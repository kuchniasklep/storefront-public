{"version":3,"file":"ks-order-dpd.entry.esm.js","sources":["src/components/order/confirmation/orderDPD.css?tag=ks-order-dpd","src/components/order/confirmation/orderDPD.tsx"],"sourcesContent":["ks-order-dpd .content {\n    background-color: #e8e8e8;\n\n    position: relative;\n    box-sizing: border-box;\n    margin: 20px;\n    max-width: 1200px;\n    width: 100%;\n    max-height: 100%;\n    overflow-y: auto;\n}\n\n@media screen and (max-width: 640px) {\n    ks-order-dpd .content {\n        margin: 0px;\n    }\n}\n\nks-order-dpd > ks-button {\n    max-width: 300px;\n    margin: 15px auto 0 auto;\n}\n\nks-order-dpd .topBar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    background-color: #dc0032;\n}\n\nks-order-dpd .missing {\n    color: #dc0032;\n}\n\nks-order-dpd .topBar ks-img2 {\n    height: 40px;\n}","import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\n@Component({\n  tag: 'ks-order-dpd',\n  styleUrl: 'orderDPD.css'\n})\nexport class OrderDPD {\n    @Element() root: HTMLElement;\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n    @Prop() pointMessage: string = \"\";\n    @Prop() missingMessage: string = \"\";\n    @Prop() description: string = \"\";\n\n    @State() code: string = \"\";\n    @State() initialized = false;\n\n    overlay: HTMLKsOverlayElement;\n    componentDidLoad() {\n        this.overlay = this.root.querySelector(\"ks-overlay\");\n    }\n\n    show(event: Event) {\n        event.preventDefault();\n        this.overlay.show();\n        this.initialized = true;\n    }\n\n    hide(event: Event) {\n        event?.preventDefault();\n        this.overlay.hide();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.code != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    @Method()\n    async select(point: string) {\n        this.code = point;\n        this.Validate();\n        this.hide(null);\n\n        let formData = new FormData();\n            formData.append(\"rodzaj\", \"wysylka_dpdpickup\");\n            formData.append(\"koszyk\", \"0\");\n            formData.append(\"value\", point);\n            formData.append(\"punktodbioru\", point);\n        \n        var headers = new Headers();\n            headers.append('pragma', 'no-cache');\n            headers.append('cache-control', 'no-cache');\n        \n        fetch(this.api, {\n            method: 'POST', \n            headers: headers, \n            body: formData,\n            credentials: \"same-origin\"\n        });\n    }\n\n    render() {\n        return [\n            this.code ? <p>{this.pointMessage}: {this.code}</p> : null,\n            this.valid === false ? <p class=\"missing\">{this.missingMessage}</p> : null,\n\n            <ks-button round icon=\"map-pin\" onClick={(e)=>this.show(e)} name={this.button}/>,\n                    \n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.code}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n\n            <ks-overlay dark>\n                <div class=\"content\">\n                    <div class=\"topBar\">\n                        <ks-img2 src=\"res/cart/dpd.svg\" vertical height={100} width={300}/>\n                        <ks-button icon=\"x\" onClick={(e)=>this.hide(e)} />\n                    </div>\n                    \n                    {this.initialized ? [\n                        <script id=\"dpd-widget\" type=\"text/javascript\" innerHTML=\"\n                            function pointSelected(pointID){\n                                document.querySelector('ks-order-dpd').select(pointID);\n                            }\n                        \"></script>,\n                        <script type=\"text/javascript\" src=\"//pudofinder.dpd.com.pl/source/dpd_widget.js?key=a9b08eb6c1b218b975529f9cea0e1364\"></script>\n                    ] : null}\n                </div>\n            </ks-overlay>\n        ];\n    }\n}"],"names":[],"mappings":"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"}