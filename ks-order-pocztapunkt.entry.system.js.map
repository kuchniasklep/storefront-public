{"version":3,"file":"ks-order-pocztapunkt.entry.system.js","sources":["src/components/order/confirmation/OrderPocztaPunkt.tsx"],"sourcesContent":["import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\ndeclare var PPWidgetApp: any;\n\n@Component({\n  tag: 'ks-order-pocztapunkt',\n})\nexport class OrderPocztapunkt {\n\n    @Prop({mutable: true}) search: string = \"WrocÅ‚aw, Polska\";\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n\n    @Element() root: HTMLElement;\n\n    componentDidLoad() {\n        this.root.style.display = \"block\";\n    }\n\n    @State() description: string = \"\";\n    @State() address: string = \"\";\n    @State() code: string = \"\";\n\n    async Show(event: Event) {\n        event.preventDefault();\n\n        PPWidgetApp.toggleMap({\n            callback: (c)=>this.Callback(c),\n            payOnPickup: false,\n            address: this.search\n        });\n    }\n\n\n    Callback(callback: any) {\n        var value = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        var punktodbioru = callback['pni'];\n\n        this.address = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        this.search = callback['city'];\n        this.code = callback['pni'];\n\n        this.description = callback['description'];\n        this.description = this.description.replace(/#/gi,'<br />');\n\n        let formData = new FormData();\n            formData.append(\"value\", value);\n            formData.append(\"punktodbioru\", punktodbioru);\n\n        var headers = new Headers();\n            headers.append('pragma', 'no-cache');\n            headers.append('cache-control', 'no-cache');\n\n        fetch(this.api, {\n            method: 'POST',\n            headers: headers,\n            body: formData,\n            credentials: \"same-origin\"\n        });\n\n        this.Validate();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.address != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    render() {\n        return[\n            <style innerHTML=\"\n                #overlay {\n                    position: fixed !important;\n                    display: flex !important;\n                    width: 100%;\n                    height: 100vh;\n                    justify-content: center;\n                    align-items: center;\n\n                    top: 0 !important;\n                }\n\n                @keyframes ks-fade {\n                    from {opacity: 1.0;}\n                    to {opacity: 0.4;}\n                }\n            \"></style>,\n\n            <p innerHTML={this.address}></p>,\n\n            <button class={\"uk-button uk-width-1-1 uk-margin-top \" + (this.valid ? \"uk-button-secondary\" : \"uk-button-danger\")}\n                    style={{animation: this.valid ? \"\" : \"ks-fade 0.5s cubic-bezier(.86,.01,.67,1) infinite alternate\"}}\n                    onClick={(e)=>this.Show(e)}>{this.button}</button>,\n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.address}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n            <input type=\"hidden\" name=\"OpisPunktuOdbioru\" value={this.description}/>\n        ]\n    }\n}"],"names":[],"mappings":"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"}