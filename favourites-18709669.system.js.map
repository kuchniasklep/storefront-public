{"version":3,"names":["addToFavourites","product","errorpopup","document","querySelector","navbar","cartBody","FormData","append","id","api","commonDynamic","get","Fetch","then","IncrementHeart","DataLayer","catch","error","show","removeFromFavourites","DecrementHeart","removeAllFavourites"],"sources":["src/global/functions/favourites.ts"],"sourcesContent":["import Fetch from \"./fetch\";\nimport { commonDynamic } from \"../data/commonDynamic\";\nimport { ProductShortData } from \"../data/product\";\nimport { DataLayer } from \"../dataLayer\";\n\nexport async function addToFavourites(product: ProductShortData) {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n    const navbar = document.querySelector('ks-navbar') as HTMLKsNavbarElement;\n\n    let cartBody = new FormData();\n        cartBody.append(\"id\", product.id);\n\n    const api = commonDynamic.get('api').addToFavourites;\n\n    return Fetch(api, cartBody)\n        .then(() => {\n            navbar.IncrementHeart();\n            DataLayer.addToFavourites(product);\n        })\n        .catch(error => errorpopup.show(error));\n}\n\nexport async function removeFromFavourites(id: string) {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n    const navbar = document.querySelector('ks-navbar') as HTMLKsNavbarElement;\n\n    let cartBody = new FormData();\n        cartBody.append(\"id\", id);\n        cartBody.append(\"akcja\", \"usun\");\n\n    const api = commonDynamic.get('api').removeFromFavourites;\n\n    return Fetch(api, cartBody)\n        .then(() => navbar.DecrementHeart())\n        .catch(error => errorpopup.show(error));\n}\n\nexport async function removeAllFavourites() {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n\n    const api = commonDynamic.get('api').removeAllFavourites;\n\n    return Fetch(api).catch(error => errorpopup.show(error));\n}"],"mappings":"qtDAKO,SAAeA,EAAgBC,G,iGAC5BC,EAAaC,SAASC,cAAc,kBACpCC,EAASF,SAASC,cAAc,aAElCE,EAAW,IAAIC,SACfD,EAASE,OAAO,KAAMP,EAAQQ,IAE5BC,EAAMC,EAAcC,IAAI,OAAOZ,gBAErC,SAAOa,EAAMH,EAAKJ,GACbQ,MAAK,WACFT,EAAOU,iBACPC,EAAUhB,gBAAgBC,E,IAE7BgB,OAAM,SAAAC,GAAS,OAAAhB,EAAWiB,KAAKD,EAAhB,I,OAGjB,SAAeE,EAAqBX,G,iGACjCP,EAAaC,SAASC,cAAc,kBACpCC,EAASF,SAASC,cAAc,aAElCE,EAAW,IAAIC,SACfD,EAASE,OAAO,KAAMC,GACtBH,EAASE,OAAO,QAAS,QAEvBE,EAAMC,EAAcC,IAAI,OAAOQ,qBAErC,SAAOP,EAAMH,EAAKJ,GACbQ,MAAK,WAAM,OAAAT,EAAOgB,gBAAP,IACXJ,OAAM,SAAAC,GAAS,OAAAhB,EAAWiB,KAAKD,EAAhB,I,OAGjB,SAAeI,I,6FACZpB,EAAaC,SAASC,cAAc,kBAEpCM,EAAMC,EAAcC,IAAI,OAAOU,oBAErC,SAAOT,EAAMH,GAAKO,OAAM,SAAAC,GAAS,OAAAhB,EAAWiB,KAAKD,EAAhB,I"}