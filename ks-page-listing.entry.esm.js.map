{"version":3,"file":"ks-page-listing.entry.esm.js","sources":["src/global/data/listing.ts","src/components/pages/listing/listing.css?tag=ks-page-listing","src/components/pages/listing/listing.tsx"],"sourcesContent":["import { createStore } from \"@stencil/store\";\nimport { InfoBannerData, ReviewAverage } from \"./common\";\nimport { CategoryNameData } from \"./product\";\n\nexport const listing = createStore({} as ListingData);\n\nexport interface ListingData {\n    type: string;\n    compare: boolean;\n\n    title: string;\n    sorting: number;\n    autocorrect: string;\n    query: string;\n    description: string;\n    bottomDescription: string;\n\n    theme: string;\n    info: ListingInfoData;\n\n    infoBanner: InfoBannerData;\n    breadcrumbs: NameLinkData[];\n    categories: NameLinkData[];\n    tags: NameLinkData[];\n    products: ProductCardData[];\n    infocards: InfoCardData[];\n\n    navigation: ListingNavigationData;\n    filters: ListingFilterData[];\n\n    noContentHeading: string;\n    noContentMessage: string;\n    reviewAverage: ReviewAverage;\n}\n\nexport interface ListingInfoData {\n    image: string;\n    webp: string;\n    width: number;\n    height: number;\n    \n    heading: string;\n    paragraph: string;\n    button: string;\n    link: string;\n}\n\nexport interface InfoCardData {\n    image: string;\n    webp: string;\n    text: string;\n}\n\nexport interface NameLinkData {\n    id: string;\n    name: string;\n    link: string;\n}\n\nexport interface ListingNavigationData {\n    count: number;\n    current: number;\n    products: number;\n    base: string;\n    paginationBase: string;\n    pattern: string;\n}\n\nexport interface ListingFilterData {\n    name: string;\n    category: string;\n    type: string;\n    active: boolean;\n    items: (ListingFilterCheckboxData|ListingFilterSliderData)[];\n}\n\nexport interface ListingFilterCheckboxData {\n    name: string;\n    value: string;\n    content: string;\n    active: boolean;\n}\n\nexport interface ListingFilterSliderData {\n    name: string;\n    values: string;\n    snap: boolean;\n    steps?: string;\n    from?: number;\n    to?: number;\n}\n\nexport interface ProductCardData {\n    id: string;\n    sku: string;\n    name: string;\n    link: string;\n    image: string;\n    imageFull: string;\n    webp: string;\n    unavailable?: boolean;\n    currentPrice: number;\n    previousPrice?: number;\n    lastPrice?: number;\n    shippingMessage?: string;\n    currency: string;\n    categories: CategoryNameData[];\n    breadcrumbs: CategoryNameData[];\n    brandName: string;\n}","ks-page-listing {\n    flex: 1 1 0;\n}\n\nks-page-listing .noresults {\n    width: auto;\n    max-height: 300px\n}","import { Component, h, Prop } from '@stencil/core';\nimport { common } from '../../../global/data/common';\nimport { listing, ListingData } from \"../../../global/data/listing\";\nimport { DataLayer } from '../../../global/dataLayer';\n\n@Component({\n    tag: 'ks-page-listing',\n    styleUrl: 'listing.css'\n})\nexport class PageListing {\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() listingData: string;\n\n    componentWillLoad() {\n        const listingDataElement = document.getElementById(this.listingData);\n\t\tconst listingData = JSON.parse(listingDataElement.innerHTML) as ListingData;\n\n        Object.keys(listingData).map(key => {\n\t\t\tlisting.set(key as keyof ListingData, listingData[key]);\n\t\t});\n\n        this.track();\n    }\n\n    track() {\n        if(!listing.get('query')) {\n            DataLayer.listing(listing.state);\n        }\n    }\n\n\trender() {\n        if(!listing?.get('title')) return false;\n\n        const bottomDescription = listing.get('bottomDescription');\n        const infoBanner = listing.get(\"infoBanner\");\n        const tags = listing.get('tags');\n        const navigation = listing.get('navigation');\n        const filters = listing.get('filters');\n        const products = listing.get('products');\n        const query = listing.get('query');\n        const review = listing.get('reviewAverage');\n        const infocards = listing.get('infocards');\n        const info = listing.get('info');\n\n        const strings = common.get('translations');\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n\n            {infoBanner ? \n                <ks-content-info-banner content={infoBanner} />\n            : null}\n\n            <ks-listing-header\n                heading={listing.get('title')}\n                breadcrumbs={listing.get('breadcrumbs')}\n                description={listing.get('description')}\n                categories={listing.get('categories')}\n                query={query}\n                autocorrect={listing.get('autocorrect')}\n                theme={listing.get('theme')}\n            />\n\n            {info ? <ks-listing-info data={info} /> : null}\n\n            {navigation && products?.length > 0 ?\n                <ks-listing-navigation products={navigation.products}>\n                    \n                    {filters?.length > 0 ?\n                        <ks-filtering base-url={navigation.base} query={query} filters={filters} />\n                    : null}\n\n                    <ks-sorting post={navigation.paginationBase} current={listing.get('sorting')}></ks-sorting>\n                    <ks-pagination count={navigation.count} current={navigation.current} base={navigation.paginationBase} pattern={navigation.pattern} />\n                </ks-listing-navigation>\n            : null}\n\n            {products?.length > 0 ?\n                <ks-product-container>\n                    {products.map(card => \n                        <ks-product-card product={card} flat compare={listing.get(\"compare\")}/>\n                    )}\n                </ks-product-container>\n            : \n                <ks-nocontent\n                    link-name={strings.noContentHome}\n                    back-name={strings.noContentBack}\n                >\n                    <h1>{listing.get('noContentHeading')}</h1>\n                    <p>{listing.get('noContentMessage')}</p>\n                </ks-nocontent>\n            }\n\n            {navigation && products?.length > 0 ?\n                <ks-listing-navigation products={navigation.products}>\n                    <ks-pagination count={navigation.count} current={navigation.current} base={navigation.paginationBase} pattern={navigation.pattern} />\n                </ks-listing-navigation>\n            : null}\n\n            {infocards?.length > 0 ?\n                <ks-info-cards data={infocards} />\n            : null}\n\n            { bottomDescription || tags?.length > 0 ?\n                <ks-listing-footer description={bottomDescription}>\n                    {tags?.length > 0 ?\n                        <div slot=\"tags\">\n                            {tags.map(crumb =>\n                                <a href={crumb.link}>{crumb.name}</a>\n                            )}\n                        </div>\n                    : null}\n\n                    {!query && navigation && products?.length > 0 && review ?\n                        <ks-content-reviews content={review} slot=\"comments\" grey />\n                    : null}\n                </ks-listing-footer>\n\n            : !query && navigation && products?.length > 0 && review ?\n                <ks-content-reviews content={review} />\n            : null }\n\n            {listing.get(\"compare\") ? <ks-compare-popup /> : null}\n        </ks-page-base>;\n\t}\n}\n"],"names":[],"mappings":"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"}