import{r as e,h as t,H as a,a as s}from"./index-0TTgkKkd.js";const o="ks-order-login{display:block;padding:30px;background-color:#f2f2f2;text-align:center}@media (min-width: 1200px){ks-order-login{padding:40px}}ks-order-login .contents{max-width:500px;margin:auto}ks-order-login .recovery{display:block;margin-top:10px}ks-order-login .contents h1{font-weight:700;font-size:28px}";const i=class{constructor(t){e(this,t);this.api="";this.action="";this.passwordMessage="";this.passwordRecovery="";this.heading="";this.login="";this.passwordRecoveryString="";this.cartProductsMessage="";this.promptHeading="";this.promptToCart="";this.promptToConfirmation=""}render(){return t(a,{key:"c0dd41f03b0c82117fceb52cff5d6914fc680d62"},t("section",{key:"af7553794d2d2e47113e075b6ccda531a2ede8b3",class:"contents"},t("h1",{key:"3f2bf335f07963bf5e0b715f385eae2b67a13bfc"},this.heading),t("form",{key:"4ade2755aa2d941b8c9e13b0f468306209c4eff0",onSubmit:e=>this.Submit(e)},t("slot",{key:"74e98a7517d26d8fd782b53a464860e9140fde11"}),t("ks-button",{key:"0bdcbdaafb6da86a1b519e846babe4b3fed2391b",submit:true,name:this.login})),t("a",{key:"7b63e25cd5e4c8cf74a7d5f3e7378c67c861f65d",class:"recovery",href:this.passwordRecovery},this.passwordRecoveryString)),t("ks-order-login-prompt",{key:"378264886118c61990eea6fae61f67924c351d4e",heading:this.promptHeading,toCart:this.promptToCart,toConfirmation:this.promptToConfirmation}))}async Submit(e){e.preventDefault();const t=this.root.querySelector("form");const a=t.querySelector("ks-input-dynamic, ks-input-text[email]");const s=t.querySelector("ks-input-text[password]");await a.Validate();await s.Validate();if(await a.IsValid()&&await s.IsValid()){var o=new Headers;o.append("pragma","no-cache");o.append("cache-control","no-cache");const e=new FormData(t);const a=await fetch(this.api,{body:e,method:"POST",headers:o,credentials:"same-origin"}).then((e=>e.text()));if(a=="false")s.message=this.passwordMessage;else if(a=="true"){this.LoginPrompt(e)}}}async LoginPrompt(e){var t=new Headers;t.append("pragma","no-cache");t.append("cache-control","no-cache");const a=new FormData;a.set("data",`email=${encodeURIComponent(e.get("email").toString())}&haslo=${encodeURIComponent(e.get("haslo").toString())}`);const s=await fetch(this.action,{body:a,method:"POST",headers:t,credentials:"same-origin"}).then((e=>e.text()));const o=this.root.querySelector("ks-order-login-prompt");if(s.search("koszyk.html")!=-1)o.show(this.cartProductsMessage);else o.show()}get root(){return s(this)}};i.style=o;export{i as ks_order_login};
//# sourceMappingURL=ks-order-login.entry.js.map