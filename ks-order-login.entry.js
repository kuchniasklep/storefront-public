import{r as e,h as t,H as a,a as s}from"./index-0TTgkKkd.js";const o="ks-order-login{display:block;padding:30px;background-color:#f2f2f2;text-align:center}@media (min-width: 1200px){ks-order-login{padding:40px}}ks-order-login .contents{max-width:500px;margin:auto}ks-order-login .recovery{display:block;margin-top:10px}ks-order-login .contents h1{font-weight:700;font-size:28px}";const i=class{constructor(t){e(this,t);this.api="";this.action="";this.passwordMessage="";this.passwordRecovery="";this.heading="";this.login="";this.passwordRecoveryString="";this.cartProductsMessage="";this.promptHeading="";this.promptToCart="";this.promptToConfirmation=""}render(){return t(a,{key:"a3db1ce3a87e93fae941088b7df3d40145231f66"},t("section",{key:"5a0529935512e7f3a13a70bff96f7136ce906ce1",class:"contents"},t("h1",{key:"6bf076c471207781f077ad9d34dbdd4b8a999e3c"},this.heading),t("form",{key:"60c245ade60a009795016eba31e7bf60f633a82e",onSubmit:e=>this.Submit(e)},t("slot",{key:"887a6c5b0e0d7dcae22c03f3f3e0f07c103c5d85"}),t("ks-button",{key:"85d017080f267ab52fe4a0f933ca879fbf1aed93",submit:true,name:this.login})),t("a",{key:"b1aef8306bd5a4dde70c24c5415bfe7e21724929",class:"recovery",href:this.passwordRecovery},this.passwordRecoveryString)),t("ks-order-login-prompt",{key:"8d59271d97968d7a21716cd6c7857bb51f3eb78d",heading:this.promptHeading,toCart:this.promptToCart,toConfirmation:this.promptToConfirmation}))}async Submit(e){e.preventDefault();const t=this.root.querySelector("form");const a=t.querySelector("ks-input-dynamic, ks-input-text[email]");const s=t.querySelector("ks-input-text[password]");await a.Validate();await s.Validate();if(await a.IsValid()&&await s.IsValid()){var o=new Headers;o.append("pragma","no-cache");o.append("cache-control","no-cache");const e=new FormData(t);const a=await fetch(this.api,{body:e,method:"POST",headers:o,credentials:"same-origin"}).then((e=>e.text()));if(a=="false")s.message=this.passwordMessage;else if(a=="true"){this.LoginPrompt(e)}}}async LoginPrompt(e){var t=new Headers;t.append("pragma","no-cache");t.append("cache-control","no-cache");const a=new FormData;a.set("data",`email=${encodeURIComponent(e.get("email").toString())}&haslo=${encodeURIComponent(e.get("haslo").toString())}`);const s=await fetch(this.action,{body:a,method:"POST",headers:t,credentials:"same-origin"}).then((e=>e.text()));const o=this.root.querySelector("ks-order-login-prompt");if(s.search("koszyk.html")!=-1)o.show(this.cartProductsMessage);else o.show()}get root(){return s(this)}};i.style=o;export{i as ks_order_login};
//# sourceMappingURL=ks-order-login.entry.js.map