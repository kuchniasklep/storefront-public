import{r as t,h as e,a}from"./index-0TTgkKkd.js";const s=class{constructor(e){t(this,e);this.api="";this.action="";this.passwordMessage="";this.passwordRecovery="";this.heading="";this.login="";this.passwordRecoveryString="";this.cartProductsMessage="";this.promptHeading="";this.promptToCart="";this.promptToConfirmation=""}componentDidLoad(){this.root.style.display="block"}render(){return[e("div",{key:"62a6a93a14d68ca2e080265f13ad31c41fcacd67",class:"uk-padding",style:{backgroundColor:"#f2f2f5"}},e("div",{key:"cb8c5667a9a9e916c883df4f7fff0eb9de9f603b",class:"uk-text-center",style:{maxWidth:"500px",margin:"auto"}},e("p",{key:"9969397f7a6405cf9f5130b6201d0a53d1e2c0e2",class:"ks-text-decorated uk-text-bold",style:{fontSize:"28px"}},this.heading),e("form",{key:"20e0b1e16d37c03b082f3cf30f5f50f4dc8caca5",onSubmit:t=>this.Submit(t)},e("slot",{key:"a7030e8f4ecd593a3bb495b936a7171b12e10398"}),e("ks-button",{key:"6f6030b50712239d520b409e62b6feb4d3b8f019",submit:true,name:this.login})),e("a",{key:"caeea6db9f2ceb4653c609368d2b5c51786fe31f",href:this.passwordRecovery},this.passwordRecoveryString)))]}async Submit(t){t.preventDefault();const e=this.root.querySelector("form");const a=e.querySelector("ks-input-dynamic, ks-input-text[email]");const s=e.querySelector("ks-input-text[password]");await a.Validate();await s.Validate();if(await a.IsValid()&&await s.IsValid()){var o=new Headers;o.append("pragma","no-cache");o.append("cache-control","no-cache");const t=new FormData(e);const a=await fetch(this.api,{body:t,method:"POST",headers:o,credentials:"same-origin"}).then((t=>t.text()));if(a=="false")s.message=this.passwordMessage;else if(a=="true"){this.LoginPrompt(t)}}}async LoginPrompt(t){var e=new Headers;e.append("pragma","no-cache");e.append("cache-control","no-cache");const a=new FormData;a.set("data",`email=${encodeURIComponent(t.get("email").toString())}&haslo=${encodeURIComponent(t.get("haslo").toString())}`);const s=await fetch(this.action,{body:a,method:"POST",headers:e,credentials:"same-origin"}).then((t=>t.text()));const o=document.createElement("ks-order-login-prompt");o.setAttribute("heading",this.promptHeading);o.setAttribute("to-cart",this.promptToCart);o.setAttribute("to-confirmation",this.promptToConfirmation);if(s.search("koszyk.html")!=-1){o.setAttribute("message",this.cartProductsMessage)}document.body.appendChild(o)}get root(){return a(this)}};export{s as ks_order_login};
//# sourceMappingURL=ks-order-login.entry.js.map