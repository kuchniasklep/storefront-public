import{r as t,h as s,c as e}from"./index-ca9b706f.js";const o=class{constructor(s){t(this,s),this.api="",this.action="",this.passwordMessage="",this.passwordRecovery="",this.heading="",this.login="",this.passwordRecoveryString="",this.cartProductsMessage="",this.promptHeading="",this.promptToCart="",this.promptToConfirmation=""}componentDidLoad(){this.root.style.display="block"}render(){return[s("div",{class:"uk-padding",style:{backgroundColor:"#f2f2f5"}},s("div",{class:"uk-text-center",style:{maxWidth:"500px",margin:"auto"}},s("p",{class:"ks-text-decorated uk-text-bold",style:{fontSize:"28px"}},this.heading),s("form",{onSubmit:t=>this.Submit(t)},s("slot",null),s("button",{type:"submit",class:"uk-button uk-button-secondary ks-text-decorated uk-text-bold uk-width-1-1 uk-margin-bottom",style:{fontSize:"20px",padding:"6px"}},this.login)),s("a",{href:this.passwordRecovery},this.passwordRecoveryString)))]}async Submit(t){t.preventDefault();const s=this.root.querySelector("form"),e=s.querySelector("ks-input-dynamic, ks-input-text[email]"),o=s.querySelector("ks-input-text[password]");if(await e.Validate(),await o.Validate(),await e.IsValid()&&await o.IsValid()){var a=new Headers;a.append("pragma","no-cache"),a.append("cache-control","no-cache");const t=new FormData(s),e=await fetch(this.api,{body:t,method:"POST",headers:a,credentials:"same-origin"}).then((t=>t.text()));"false"==e?o.message=this.passwordMessage:"true"==e&&this.LoginPrompt(t)}}async LoginPrompt(t){var s=new Headers;s.append("pragma","no-cache"),s.append("cache-control","no-cache");const e=new FormData;e.set("data",`email=${encodeURIComponent(t.get("email").toString())}&haslo=${encodeURIComponent(t.get("haslo").toString())}`);const o=await fetch(this.action,{body:e,method:"POST",headers:s,credentials:"same-origin"}).then((t=>t.text())),a=document.createElement("ks-order-login-prompt");a.setAttribute("heading",this.promptHeading),a.setAttribute("to-cart",this.promptToCart),a.setAttribute("to-confirmation",this.promptToConfirmation),-1!=o.search("koszyk.html")&&a.setAttribute("message",this.cartProductsMessage),document.body.appendChild(a)}get root(){return e(this)}};export{o as ks_order_login}