import{r as t,h as s,g as o}from"./index-1b90b4d2.js";const e=class{constructor(s){t(this,s);this.api="";this.action="";this.passwordMessage="";this.passwordRecovery="";this.heading="";this.login="";this.passwordRecoveryString="";this.cartProductsMessage="";this.promptHeading="";this.promptToCart="";this.promptToConfirmation=""}componentDidLoad(){this.root.style.display="block"}render(){return[s("div",{class:"uk-padding",style:{backgroundColor:"#f2f2f5"}},s("div",{class:"uk-text-center",style:{maxWidth:"500px",margin:"auto"}},s("p",{class:"ks-text-decorated uk-text-bold",style:{fontSize:"28px"}},this.heading),s("form",{onSubmit:t=>this.Submit(t)},s("slot",null),s("button",{type:"submit",class:"uk-button uk-button-secondary ks-text-decorated uk-text-bold uk-width-1-1 uk-margin-bottom",style:{fontSize:"20px",padding:"6px"}},this.login)),s("a",{href:this.passwordRecovery},this.passwordRecoveryString)))]}async Submit(t){t.preventDefault();const s=this.root.querySelector("form");const o=s.querySelector("ks-input-dynamic, ks-input-text[email]");const e=s.querySelector("ks-input-text[password]");await o.Validate();await e.Validate();if(await o.IsValid()&&await e.IsValid()){var i=new Headers;i.append("pragma","no-cache");i.append("cache-control","no-cache");const t=new FormData(s);const o=await fetch(this.api,{body:t,method:"POST",headers:i,credentials:"same-origin"}).then((t=>t.text()));if(o=="false")e.message=this.passwordMessage;else if(o=="true"){this.LoginPrompt(t)}}}async LoginPrompt(t){var s=new Headers;s.append("pragma","no-cache");s.append("cache-control","no-cache");const o=new FormData;o.set("data",`email=${encodeURIComponent(t.get("email").toString())}&haslo=${encodeURIComponent(t.get("haslo").toString())}`);const e=await fetch(this.action,{body:o,method:"POST",headers:s,credentials:"same-origin"}).then((t=>t.text()));const i=document.createElement("ks-order-login-prompt");i.setAttribute("heading",this.promptHeading);i.setAttribute("to-cart",this.promptToCart);i.setAttribute("to-confirmation",this.promptToConfirmation);if(e.search("koszyk.html")!=-1){i.setAttribute("message",this.cartProductsMessage)}document.body.appendChild(i)}get root(){return o(this)}};export{e as ks_order_login};
//# sourceMappingURL=ks-order-login.entry.js.map