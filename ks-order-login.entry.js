import{r as t,h as e,a}from"./index-0TTgkKkd.js";const s=class{constructor(e){t(this,e);this.api="";this.action="";this.passwordMessage="";this.passwordRecovery="";this.heading="";this.login="";this.passwordRecoveryString="";this.cartProductsMessage="";this.promptHeading="";this.promptToCart="";this.promptToConfirmation=""}componentDidLoad(){this.root.style.display="block"}render(){return[e("div",{key:"f44bd1180a7ff4a85980453e8038770372b8a537",class:"uk-padding",style:{backgroundColor:"#f2f2f5"}},e("div",{key:"3df78a4db22b049da600bf56efc279b7258f15d1",class:"uk-text-center",style:{maxWidth:"500px",margin:"auto"}},e("p",{key:"7488d9649c0a353f8bd28abb238ea27c5bb64796",class:"ks-text-decorated uk-text-bold",style:{fontSize:"28px"}},this.heading),e("form",{key:"fdf42116acc7f96519143605adc8ed4363f0712a",onSubmit:t=>this.Submit(t)},e("slot",{key:"43c282da4e047ee15886acc42304bb69768aea43"}),e("ks-button",{key:"1a47f10ba5b14ece500fffebf2731c80e67c6fe5",submit:true,name:this.login})),e("a",{key:"724acb3ff60412be61debdbbba78ce089835be06",href:this.passwordRecovery},this.passwordRecoveryString)))]}async Submit(t){t.preventDefault();const e=this.root.querySelector("form");const a=e.querySelector("ks-input-dynamic, ks-input-text[email]");const s=e.querySelector("ks-input-text[password]");await a.Validate();await s.Validate();if(await a.IsValid()&&await s.IsValid()){var o=new Headers;o.append("pragma","no-cache");o.append("cache-control","no-cache");const t=new FormData(e);const a=await fetch(this.api,{body:t,method:"POST",headers:o,credentials:"same-origin"}).then((t=>t.text()));if(a=="false")s.message=this.passwordMessage;else if(a=="true"){this.LoginPrompt(t)}}}async LoginPrompt(t){var e=new Headers;e.append("pragma","no-cache");e.append("cache-control","no-cache");const a=new FormData;a.set("data",`email=${encodeURIComponent(t.get("email").toString())}&haslo=${encodeURIComponent(t.get("haslo").toString())}`);const s=await fetch(this.action,{body:a,method:"POST",headers:e,credentials:"same-origin"}).then((t=>t.text()));const o=document.createElement("ks-order-login-prompt");o.setAttribute("heading",this.promptHeading);o.setAttribute("to-cart",this.promptToCart);o.setAttribute("to-confirmation",this.promptToConfirmation);if(s.search("koszyk.html")!=-1){o.setAttribute("message",this.cartProductsMessage)}document.body.appendChild(o)}get root(){return a(this)}};export{s as ks_order_login};
//# sourceMappingURL=ks-order-login.entry.js.map