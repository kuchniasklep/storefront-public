import{r as t,h as e,a}from"./index-0TTgkKkd.js";const s=class{constructor(e){t(this,e);this.api="";this.action="";this.passwordMessage="";this.passwordRecovery="";this.heading="";this.login="";this.passwordRecoveryString="";this.cartProductsMessage="";this.promptHeading="";this.promptToCart="";this.promptToConfirmation=""}componentDidLoad(){this.root.style.display="block"}render(){return[e("div",{key:"6c30def9e555afc240dec720c40d7edc744ad494",class:"uk-padding",style:{backgroundColor:"#f2f2f5"}},e("div",{key:"11b58b6fa9e4d853e82cb03863ea2fbce36ff877",class:"uk-text-center",style:{maxWidth:"500px",margin:"auto"}},e("p",{key:"d9c776680f681989a7c5dc09e0c54b98a0f5ce15",class:"ks-text-decorated uk-text-bold",style:{fontSize:"28px"}},this.heading),e("form",{key:"6a54c2c17347b42126daabe2d71dad9b1c2e71f5",onSubmit:t=>this.Submit(t)},e("slot",{key:"9a56b8c3fb78b39de53dc9cc2909f16bd43e22f7"}),e("ks-button",{key:"9f4a9fe112cf785c35dae336484e818e1326a055",submit:true,name:this.login})),e("a",{key:"f5a6deb9b83524e043059aa469d1b7f91912976a",href:this.passwordRecovery},this.passwordRecoveryString)))]}async Submit(t){t.preventDefault();const e=this.root.querySelector("form");const a=e.querySelector("ks-input-dynamic, ks-input-text[email]");const s=e.querySelector("ks-input-text[password]");await a.Validate();await s.Validate();if(await a.IsValid()&&await s.IsValid()){var o=new Headers;o.append("pragma","no-cache");o.append("cache-control","no-cache");const t=new FormData(e);const a=await fetch(this.api,{body:t,method:"POST",headers:o,credentials:"same-origin"}).then((t=>t.text()));if(a=="false")s.message=this.passwordMessage;else if(a=="true"){this.LoginPrompt(t)}}}async LoginPrompt(t){var e=new Headers;e.append("pragma","no-cache");e.append("cache-control","no-cache");const a=new FormData;a.set("data",`email=${encodeURIComponent(t.get("email").toString())}&haslo=${encodeURIComponent(t.get("haslo").toString())}`);const s=await fetch(this.action,{body:a,method:"POST",headers:e,credentials:"same-origin"}).then((t=>t.text()));const o=document.createElement("ks-order-login-prompt");o.setAttribute("heading",this.promptHeading);o.setAttribute("to-cart",this.promptToCart);o.setAttribute("to-confirmation",this.promptToConfirmation);if(s.search("koszyk.html")!=-1){o.setAttribute("message",this.cartProductsMessage)}document.body.appendChild(o)}get root(){return a(this)}};export{s as ks_order_login};
//# sourceMappingURL=ks-order-login.entry.js.map