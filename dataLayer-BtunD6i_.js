import{c as e}from"./commonDynamic-uutiB2IM.js";import{j as c}from"./fetch-Cj4w559p.js";var r;(function(r){var o;var t=new Promise((e=>{o=()=>{e()}}));function n(e){c("https://kuchniasklep.pl/api/fbconversion.php",e)}function u(){const c=e.get("customer");const r=e.get("loggedIn")&&c;return{customerDataAvailable:r,customerEmail:r?c.email:undefined,customerFirstName:r?c.firstName:undefined,customerLastName:r?c.lastName:undefined,customerSubscriberStatus:r?c.subscriber?1:undefined:undefined,customerCountryISO2:r?c.countryISO2:undefined,customerCity:r?c.city:undefined,customerPhone:r?c.phone:undefined,customerCurrency:r?c.currency:undefined}}async function i(e){e=crypto.randomUUID();const c={event:"ks.pageview",facebookEventId:e,...u()};window.dataLayer?.push(c);o();n(c)}r.pageview=i;async function d(e,c=""){await t;c=crypto.randomUUID();const r=e.breadcrumbs;const o={event:"ks.product",facebookEventId:c,...u(),productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productImage:e?.images.length>0?k(e.images[0].full.url):undefined,productURL:k(document.location.href),productSKU:e.model,productBrand:e.brand.name,productCategory:r[r.length-1].name,productAvailability:e.shippingTime,productQuantity:1,productCategories:e.categories,ecomm_prodid:e.id,ecomm_pagetype:"product",ecomm_totalvalue:e.currentPrice,ecommerce:{items:h([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,impressions:b([e])}}};window.dataLayer?.push({ecommerce:null});window.dataLayer?.push(o);n(o)}r.product=d;async function a(e){await t;const c=e.type=="category"?"category":e.type=="manufacturer"?"manufacturer":e.type=="search"?"search":null;if(!c)return;window.dataLayer?.push({ecommerce:null});window.dataLayer?.push({event:`ks.listing`,...u(),type:c,listingCategories:c=="category"?e.breadcrumbs.filter((e=>e.id!="0")):undefined,listingProducts:e.products,ecommerce:{items:h(e.products)},uaecommerce:{ecommerce:{currencyCode:e.products?.[0]?.currency,impressions:b(e.products)}}})}r.listing=a;async function m(e,c){await t;c=crypto.randomUUID();const r={event:"ks.addToCart",facebookEventId:c,...u(),productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:k(e.imageFull),productURL:k(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:h([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,add:{products:b([e])}}}};window.dataLayer?.push({ecommerce:null});window.dataLayer?.push(r);n(r)}r.addToCart=m;async function s(e){await t;window.dataLayer?.push({ecommerce:null});window.dataLayer?.push({event:"ks.removeFromCart",...u(),productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:k(e.imageFull),productURL:k(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:h([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,remove:{products:b([e])}}}})}r.removeFromCart=s;async function p(e){await t;window.dataLayer?.push({ecommerce:null});window.dataLayer?.push({event:"ks.addToFavourites",...u(),productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:k(e.imageFull),productURL:k(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:h([e]),value:e.currentPrice,currency:e.currency}})}r.addToFavourites=p;async function y(e){await t;window.dataLayer?.push({ecommerce:null});window.dataLayer?.push({event:"ks.viewCart",...u(),cartCurrency:e.currency,cartProductValue:e.productValue,cartValue:e.totalValue,cartProducts:e.products,ecomm_prodid:JSON.stringify(Object.values(e.products).map((e=>e.id))),ecomm_pagetype:"cart",ecomm_totalvalue:e.productValue,ecommerce:{items:h(Object.values(e.products)),value:e.productValue,currency:e.currency},uaecommerce:{ecommerce:{checkout:{actionField:{step:1},currencyCode:e.currency,products:b(Object.values(e.products))}}}})}r.view_cart=y;async function w(e,c){await t;c=crypto.randomUUID();const r={event:"ks.checkout",facebookEventId:c,...u(),orderProducts:e.products,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderShippingTime:e.totalShippingTimeDays,orderCoupon:e.coupon,ecommerce:{items:h(e.products)},uaecommerce:{ecommerce:{checkout:{actionField:{step:3},currencyCode:e.currency,products:b(e.products)}}}};window.dataLayer?.push({ecommerce:null});window.dataLayer?.push(r);n(r)}r.order_checkout=w;async function l(e,c){await t;c=crypto.randomUUID();const r={event:"ks.orderForm",facebookEventId:c,...u(),orderProducts:e.products,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderShippingTime:e.totalShippingTimeDays,orderCoupon:e.coupon,ecommerce:{items:h(e.products)},uaecommerce:{ecommerce:{checkout:{actionField:{step:2},currencyCode:e.currency,products:b(e.products)}}}};window.dataLayer?.push({ecommerce:null});window.dataLayer?.push(r);n(r)}r.order_form=l;async function f(e,c){await t;c=crypto.randomUUID();const r={event:"ks.order",facebookEventId:c,...u(),orderProducts:e.products,orderId:e.id,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderShippingTime:e.totalShippingTimeDays,orderCoupon:e.coupon,ecomm_prodid:JSON.stringify(Object.values(e.products).map((e=>e.id))),ecomm_pagetype:"purchase",ecomm_totalvalue:e.productValue,ecommerce:{transaction_id:e.id,value:e.totalValue,currency:e.currency,shipping:e.shippingValue,coupon:e.coupon,items:h(e.products)},uaecommerce:{ecommerce:{purchase:{currencyCode:e.currency,actionField:{id:e.id,revenue:e.totalValue,shipping:e.shippingValue,coupon:e.coupon},products:b(e.products)}}}};window.dataLayer?.push({ecommerce:null});window.dataLayer?.push(r);n(r)}r.order_placed=f;async function g(e){await t;window.dataLayer?.push({event:"ks.search",searchQuery:e,...u()})}r.search=g;async function v(e){await t;window.dataLayer?.push({event:"ks.subscribe",...u(),subscriptionPlace:e.place,subscriptionEmail:e.email,subscriptionName:e?.name,subscriptionStatus:e.subscriber?1:0})}r.subscribe=v;async function C(e){await t;window.dataLayer?.push({event:"ks.recipe",...u(),recipeName:e.title,recipeCategory:e.category,recipeCuisine:e.cuisine})}r.recipe=C;function k(e){return e.includes("http")?e:document.baseURI+e}function h(e){return e.map(((e,c)=>{const r=e.breadcrumbs.filter((e=>e.name!="Strona główna")).map((e=>e.name)).reverse();return{item_id:e.id,item_name:e.name,currency:e.currency,index:c,price:e.currentPrice,item_brand:e.brandName,item_category:r?.[0],item_category2:r?.[1],item_category3:r?.[2],item_category4:r?.[3],item_category5:r?.[4]}}))}function b(e){return e.map(((e,c)=>{const r=e.breadcrumbs.filter((e=>e.name!="Strona główna")).map((e=>e.name));return{name:e.name,id:e.id,price:e.currentPrice,brand:e.brandName,category:r.join("/"),position:c+1,quantity:e.quantity}}))}})(r||(r={}));export{r as D};
//# sourceMappingURL=dataLayer-BtunD6i_.js.map