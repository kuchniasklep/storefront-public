{"version":3,"names":["async","addToFavourites","product","errorpopup","document","querySelector","navbar","cartBody","FormData","append","id","api","commonDynamic","get","Fetch","then","IncrementHeart","DataLayer","catch","error","show","removeFromFavourites","DecrementHeart","removeAllFavourites"],"sources":["src/global/functions/favourites.ts"],"sourcesContent":["import Fetch from \"./fetch\";\nimport { commonDynamic } from \"../data/commonDynamic\";\nimport { ProductShortData } from \"../data/product\";\nimport { DataLayer } from \"../dataLayer\";\n\nexport async function addToFavourites(product: ProductShortData) {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n    const navbar = document.querySelector('ks-navbar') as HTMLKsNavbarElement;\n\n    let cartBody = new FormData();\n        cartBody.append(\"id\", product.id);\n\n    const api = commonDynamic.get('api').addToFavourites;\n\n    return Fetch(api, cartBody)\n        .then(() => {\n            navbar.IncrementHeart();\n            DataLayer.addToFavourites(product);\n        })\n        .catch(error => errorpopup.show(error));\n}\n\nexport async function removeFromFavourites(id: string) {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n    const navbar = document.querySelector('ks-navbar') as HTMLKsNavbarElement;\n\n    let cartBody = new FormData();\n        cartBody.append(\"id\", id);\n        cartBody.append(\"akcja\", \"usun\");\n\n    const api = commonDynamic.get('api').removeFromFavourites;\n\n    return Fetch(api, cartBody)\n        .then(() => navbar.DecrementHeart())\n        .catch(error => errorpopup.show(error));\n}\n\nexport async function removeAllFavourites() {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n\n    const api = commonDynamic.get('api').removeAllFavourites;\n\n    return Fetch(api).catch(error => errorpopup.show(error));\n}"],"mappings":"oIAKOA,eAAeC,EAAgBC,GAClC,MAAMC,EAAaC,SAASC,cAAc,kBAC1C,MAAMC,EAASF,SAASC,cAAc,aAEtC,IAAIE,EAAW,IAAIC,SACfD,EAASE,OAAO,KAAMP,EAAQQ,IAElC,MAAMC,EAAMC,EAAcC,IAAI,OAAOZ,gBAErC,OAAOa,EAAMH,EAAKJ,GACbQ,MAAK,KACFT,EAAOU,iBACPC,EAAUhB,gBAAgBC,EAAQ,IAErCgB,OAAMC,GAAShB,EAAWiB,KAAKD,IACxC,CAEOnB,eAAeqB,EAAqBX,GACvC,MAAMP,EAAaC,SAASC,cAAc,kBAC1C,MAAMC,EAASF,SAASC,cAAc,aAEtC,IAAIE,EAAW,IAAIC,SACfD,EAASE,OAAO,KAAMC,GACtBH,EAASE,OAAO,QAAS,QAE7B,MAAME,EAAMC,EAAcC,IAAI,OAAOQ,qBAErC,OAAOP,EAAMH,EAAKJ,GACbQ,MAAK,IAAMT,EAAOgB,mBAClBJ,OAAMC,GAAShB,EAAWiB,KAAKD,IACxC,CAEOnB,eAAeuB,IAClB,MAAMpB,EAAaC,SAASC,cAAc,kBAE1C,MAAMM,EAAMC,EAAcC,IAAI,OAAOU,oBAErC,OAAOT,EAAMH,GAAKO,OAAMC,GAAShB,EAAWiB,KAAKD,IACrD,Q"}