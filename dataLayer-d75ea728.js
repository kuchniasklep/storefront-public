import{c as e}from"./commonDynamic-3e6c308f.js";import{j as o}from"./fetch-13200e62.js";var c;(function(c){var r;var t=new Promise((e=>{r=()=>{e()}}));function n(e){o("https://kuchniasklep.pl/api/fbconversion.php",e)}function i(){const o=e.get("customer");const c=e.get("loggedIn")&&o;return{customerDataAvailable:c,customerEmail:c?o.email:undefined,customerFirstName:c?o.firstName:undefined,customerLastName:c?o.lastName:undefined,customerSubscriberStatus:c?o.subscriber?1:0:undefined,customerCountryISO2:c?o.countryISO2:undefined,customerCity:c?o.city:undefined,customerPhone:c?o.phone:undefined,customerCurrency:c?o.currency:undefined}}async function d(e){var o;e=crypto.randomUUID();const c=Object.assign({event:"ks.pageview",facebookEventId:e},i());(o=window.dataLayer)===null||o===void 0?void 0:o.push(c);r();n(c)}c.pageview=d;async function u(e,o=""){var c,r;await t;o=crypto.randomUUID();const d=e.breadcrumbs;const u=Object.assign(Object.assign({event:"ks.product",facebookEventId:o},i()),{productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productImage:(e===null||e===void 0?void 0:e.images.length)>0?C(e.images[0].full.url):undefined,productURL:C(document.location.href),productSKU:e.model,productBrand:e.brand.name,productCategory:d[d.length-1].name,productAvailability:e.shippingTime,productQuantity:1,productCategories:e.categories,ecomm_prodid:e.id,ecomm_pagetype:"product",ecomm_totalvalue:e.currentPrice,ecommerce:{items:j([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,impressions:O([e])}}});(c=window.dataLayer)===null||c===void 0?void 0:c.push({ecommerce:null});(r=window.dataLayer)===null||r===void 0?void 0:r.push(u);n(u)}c.product=u;async function a(e){var o,c,r,n;await t;const d=e.type=="category"?"category":e.type=="manufacturer"?"manufacturer":e.type=="search"?"search":null;if(!d)return;(o=window.dataLayer)===null||o===void 0?void 0:o.push({ecommerce:null});(c=window.dataLayer)===null||c===void 0?void 0:c.push(Object.assign(Object.assign({event:`ks.listing`},i()),{type:d,listingCategories:d=="category"?e.breadcrumbs.filter((e=>e.id!="0")):undefined,listingProducts:e.products,ecommerce:{items:j(e.products)},uaecommerce:{ecommerce:{currencyCode:(n=(r=e.products)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.currency,impressions:O(e.products)}}}))}c.listing=a;async function m(e,o){var c,r;await t;o=crypto.randomUUID();const d=Object.assign(Object.assign({event:"ks.addToCart",facebookEventId:o},i()),{productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:C(e.imageFull),productURL:C(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:j([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,add:{products:O([e])}}}});(c=window.dataLayer)===null||c===void 0?void 0:c.push({ecommerce:null});(r=window.dataLayer)===null||r===void 0?void 0:r.push(d);n(d)}c.addToCart=m;async function s(e){var o,c;await t;(o=window.dataLayer)===null||o===void 0?void 0:o.push({ecommerce:null});(c=window.dataLayer)===null||c===void 0?void 0:c.push(Object.assign(Object.assign({event:"ks.removeFromCart"},i()),{productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:C(e.imageFull),productURL:C(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:j([e])},uaecommerce:{ecommerce:{currencyCode:e.currency,remove:{products:O([e])}}}}))}c.removeFromCart=s;async function l(e){var o,c;await t;(o=window.dataLayer)===null||o===void 0?void 0:o.push({ecommerce:null});(c=window.dataLayer)===null||c===void 0?void 0:c.push(Object.assign(Object.assign({event:"ks.addToFavourites"},i()),{productId:e.id,productName:e.name,productPrice:e.currentPrice,productCurrency:e.currency,productQuantity:e.quantity,productImage:C(e.imageFull),productURL:C(e.link),productSKU:e.sku,productCategories:e.categories,ecommerce:{items:j([e]),value:e.currentPrice,currency:e.currency}}))}c.addToFavourites=l;async function v(e){var o,c;await t;(o=window.dataLayer)===null||o===void 0?void 0:o.push({ecommerce:null});(c=window.dataLayer)===null||c===void 0?void 0:c.push(Object.assign(Object.assign({event:"ks.viewCart"},i()),{cartCurrency:e.currency,cartProductValue:e.productValue,cartValue:e.totalValue,cartProducts:e.products,ecomm_prodid:JSON.stringify(Object.values(e.products).map((e=>e.id))),ecomm_pagetype:"cart",ecomm_totalvalue:e.productValue,ecommerce:{items:j(Object.values(e.products)),value:e.productValue,currency:e.currency},uaecommerce:{ecommerce:{checkout:{actionField:{step:1},currencyCode:e.currency,products:O(Object.values(e.products))}}}}))}c.view_cart=v;async function p(e,o){var c,r;await t;o=crypto.randomUUID();const d=Object.assign(Object.assign({event:"ks.checkout",facebookEventId:o},i()),{orderProducts:e.products,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderCoupon:e.coupon,ecommerce:{items:j(e.products)},uaecommerce:{ecommerce:{checkout:{actionField:{step:3},currencyCode:e.currency,products:O(e.products)}}}});(c=window.dataLayer)===null||c===void 0?void 0:c.push({ecommerce:null});(r=window.dataLayer)===null||r===void 0?void 0:r.push(d);n(d)}c.order_checkout=p;async function y(e,o){var c,r;await t;o=crypto.randomUUID();const d=Object.assign(Object.assign({event:"ks.orderForm",facebookEventId:o},i()),{orderProducts:e.products,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderCoupon:e.coupon,ecommerce:{items:j(e.products)},uaecommerce:{ecommerce:{checkout:{actionField:{step:2},currencyCode:e.currency,products:O(e.products)}}}});(c=window.dataLayer)===null||c===void 0?void 0:c.push({ecommerce:null});(r=window.dataLayer)===null||r===void 0?void 0:r.push(d);n(d)}c.order_form=y;async function w(e,o){var c,r;await t;o=crypto.randomUUID();const d=Object.assign(Object.assign({event:"ks.order",facebookEventId:o},i()),{orderProducts:e.products,orderId:e.id,orderValue:e.totalValue,orderProductValue:e.productValue,orderCurrency:e.currency,orderShipping:e.shippingValue,orderCoupon:e.coupon,ecomm_prodid:JSON.stringify(Object.values(e.products).map((e=>e.id))),ecomm_pagetype:"purchase",ecomm_totalvalue:e.productValue,ecommerce:{transaction_id:e.id,value:e.totalValue,currency:e.currency,shipping:e.shippingValue,coupon:e.coupon,items:j(e.products)},uaecommerce:{ecommerce:{purchase:{currencyCode:e.currency,actionField:{id:e.id,revenue:e.totalValue,shipping:e.shippingValue,coupon:e.coupon},products:O(e.products)}}}});(c=window.dataLayer)===null||c===void 0?void 0:c.push({ecommerce:null});(r=window.dataLayer)===null||r===void 0?void 0:r.push(d);n(d)}c.order_placed=w;async function b(e){var o;await t;(o=window.dataLayer)===null||o===void 0?void 0:o.push(Object.assign({event:"ks.search",searchQuery:e},i()))}c.search=b;async function f(e){var o;await t;(o=window.dataLayer)===null||o===void 0?void 0:o.push(Object.assign(Object.assign({event:"ks.subscribe"},i()),{subscriptionPlace:e.place,subscriptionEmail:e.email,subscriptionName:e===null||e===void 0?void 0:e.name,subscriptionStatus:e.subscriber?1:0}))}c.subscribe=f;async function g(e){var o;await t;(o=window.dataLayer)===null||o===void 0?void 0:o.push(Object.assign(Object.assign({event:"ks.recipe"},i()),{recipeName:e.title,recipeCategory:e.category,recipeCuisine:e.cuisine}))}c.recipe=g;function C(e){return e.includes("http")?e:document.baseURI+e}function j(e){return e.map(((e,o)=>{const c=e.breadcrumbs.filter((e=>e.name!="Strona główna")).map((e=>e.name)).reverse();return{item_id:e.id,item_name:e.name,currency:e.currency,index:o,price:e.currentPrice,item_brand:e.brandName,item_category:c===null||c===void 0?void 0:c[0],item_category2:c===null||c===void 0?void 0:c[1],item_category3:c===null||c===void 0?void 0:c[2],item_category4:c===null||c===void 0?void 0:c[3],item_category5:c===null||c===void 0?void 0:c[4]}}))}function O(e){return e.map(((e,o)=>{const c=e.breadcrumbs.filter((e=>e.name!="Strona główna")).map((e=>e.name));return{name:e.name,id:e.id,price:e.currentPrice,brand:e.brandName,category:c.join("/"),position:o+1,quantity:e.quantity}}))}})(c||(c={}));export{c as D};
//# sourceMappingURL=dataLayer-d75ea728.js.map