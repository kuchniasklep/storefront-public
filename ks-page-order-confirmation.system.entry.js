var __awaiter=this&&this.__awaiter||function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r["throw"](e))}catch(t){i(t)}}function l(e){e.done?n(e.value):a(e.value).then(o,s)}l((r=r.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return l([e,t])}}function l(o){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,a&&(i=o[0]&2?a["return"]:o[0]?a["throw"]||((i=a["return"])&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;if(a=0,i)o=[o[0]&2,i.value];switch(o[0]){case 0:case 1:i=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;a=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){n.label=o[1];break}if(o[0]===6&&n.label<i[1]){n.label=i[1];i=o;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(o);break}if(i[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(s){o=[6,s];a=0}finally{r=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};System.register(["./index-9d88b83b.system.js","./common-e4da7a19.system.js","./commonDynamic-ae951e05.system.js","./index-901f8c50.system.js"],(function(e){"use strict";var t,n,r,a,i,o;return{setters:[function(e){t=e.r;n=e.h;r=e.g},function(e){a=e.c},function(e){i=e.c},function(e){o=e.c}],execute:function(){var s=o({api:{},totalValue:0,productValue:0,productAmount:0,pointsForOrder:0,totalShippingTime:"",otherValues:[],products:{},easyprotect:[],recycle:[],shipping:{},payment:{},info:{}});var l="ks-page-order-confirmation .card{display:block;padding:0px;-webkit-box-sizing:border-box;box-sizing:border-box;max-width:1200px;width:100%;margin:20px auto;background:var(--card-background);color:var(--card-text-color);-webkit-box-shadow:var(--card-shadow);box-shadow:var(--card-shadow)}ks-page-order-confirmation .easyprotect-info{margin-top:-15px;margin-bottom:30px;text-align:justify}ks-page-order-confirmation .pickupOption input{margin-right:10px;-webkit-transform:translate(0, 1px);transform:translate(0, 1px)}ks-page-order-confirmation .pickupOption label{width:auto}ks-page-order-confirmation .paymentContainer{text-align:center;padding:5px}";var c=e("ks_page_order_confirmation",function(){function e(e){t(this,e);this.loading=false}e.prototype.componentWillLoad=function(){var e=document.getElementById(this.orderData);var t=JSON.parse(e.innerHTML);Object.keys(t).map((function(e){s.set(e,t[e])}))};e.prototype.Submit=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,a,i,o,s;return __generator(this,(function(l){switch(l.label){case 0:e.preventDefault();t=this.root.querySelector("form.card");n=t.querySelectorAll("ks-input-dynamic, ks-order-document-select, ks-input-text, ks-input-textarea, ks-input-check, ks-order-inpost, ks-order-pocztapunkt, ks-order-dpd");console.log(t);r=Number.MAX_VALUE;a=true;i=0;l.label=1;case 1:if(!(i<n.length))return[3,5];o=n[i];if(o.closest("ks-input-dynamic *")!=null)return[3,4];return[4,o.Validate()];case 2:l.sent();return[4,o.IsValid()];case 3:if(!l.sent()){s=o.getBoundingClientRect().top-document.body.getBoundingClientRect().top;if(s<r)r=s;a=false}l.label=4;case 4:i++;return[3,1];case 5:if(a){this.loading=true;t.submit()}else{try{window.scroll({top:r-100,behavior:"smooth"})}catch(c){window.scroll(0,r-100)}}return[2]}}))}))};e.prototype.ShowPrompt=function(e){var t=this.root.querySelector("ks-order-form-modal");t.setAttribute("message",e);t.Show()};e.prototype.render=function(){var e=this;var t;var r=Object.entries(s.get("products"));var o=s.get("shipping");var l=s.get("payment");var c=s.get("info");var u=s.get("api");var d=s.get("easyprotectStrings");return n("ks-page-base",{skipbase:this.skipbase,commonData:this.commonData,commonDynamicData:this.commonDynamicData},n("form",{class:"card",action:u.submit,method:"post",onSubmit:function(t){return e.Submit(t)}},n("ks-tracker-order",{form:true,"event-id":s.get("eventId"),value:s.get("productValue"),products:Object.keys(s.get("products")).join(",")}),n("ks-order-progress",{current:1}),n("div",{class:"uk-padding@m uk-padding-small"},n("ks-cart-product-heading",null),r.map((function(e){var t=e[0],r=e[1];return n("ks-cart-product",{name:r.name,img:r.img,price:r.price,amount:r.amount,"shipping-time":r.shippingTime})})),n("ks-cart-product-price",{amount:s.get("productAmount"),price:s.get("productValue"),"shipping-time":s.get("totalShippingTime"),"edit-link":a.get("cartLink")}),n("br",null),n("br",null),s.get("easyprotect")?[n("ks-order-heading",{heading:d.heading,link:a.get("cartLink")}),n("p",{class:"easyprotect-info"},d.descriptionStart,n("a",{href:d.link,target:"_blank"},d.linkName),d.descriptionEnd),s.get("easyprotect").map((function(e){return n("ks-cart-easyprotect-warranty",{name:e.name,price:e.price,time:e.time})})),n("br",null),n("br",null)]:null,((t=s.get("recycle"))===null||t===void 0?void 0:t.length)>0?[n("ks-order-heading",{heading:"Odbiór zużytego sprzętu",link:a.get("cartLink")+"#recycle"}),n("div",{style:{marginBottom:"40px"}},s.get("recycle").map((function(e){return n("p",{style:{margin:"5px 0"}},e)})))]:null,n("div",{class:"uk-child-width-1-2@m","uk-grid":true,"uk-height-match":"ks-cart-tile > div"},n("div",null,n("ks-order-heading",{heading:o.heading,link:a.get("cartLink")}),n("ks-cart-tile",{logo:o.logo,name:o.name,price:o.price,color:o.color},n("div",null,o.info,o.type=="inpost"?n("ks-order-inpost",{search:o.city,api:u.changeShippingLocation}):o.type=="pocztapunkt"?[n("script",{src:"https://mapa.ecommerce.poczta-polska.pl/widget/scripts/ppwidget.js"}),n("ks-order-pocztapunkt",{search:o.city,api:u.changeShippingLocation})]:o.type=="pickup"?n("div",{class:"ListaWyboru"},n("div",{id:"ListaOpcjiWysylki"},o.pickup.map((function(e){return n("div",{class:"pickupOption"},n("input",{id:e.key,type:"radio",value:e.key,name:"lokalizacjaOsobisty",checked:e.checked}),n("label",{htmlFor:e.key},e.value))})))):null))),n("div",null,n("ks-order-heading",{heading:l.heading,link:a.get("cartLink")}),n("ks-cart-tile",{logo:l.logo,name:l.name,price:l.price,color:l.color,innerHTML:l.info}))),n("div",{class:"uk-child-width-1-2@m","uk-grid":true},n("div",null,n("ks-order-address-section",{heading:c.shippingInfoHeading,link:u.changeData},n("ks-order-address-field",{name:c.name.field},n("span",null,c.name.value)),c.company?n("ks-order-address-field",{name:c.company.field},n("span",null,c.company.value)):null,n("ks-order-address-field",{name:c.address.field},n("span",{innerHTML:c.address.value})),n("ks-order-address-field",{name:c.phone.field},n("span",null,c.phone.value)))),n("div",null,n("ks-order-address-section",{"hide-on-mobile":true,heading:c.documentInfoHeading,link:u.changeData},c.documentName?n("ks-order-address-field",{name:c.documentName.field},n("span",null,c.documentName.value)):null,c.documentCompany?n("ks-order-address-field",{name:c.documentCompany.field},n("span",null,c.documentCompany.value)):null,n("ks-order-address-field",{name:c.documentAddress.field},n("span",{innerHTML:c.documentAddress.value}))),n("ks-order-document-select",{name:"dokument",api:u.changeDocument}),n("br",null))),n("br",null),n("ks-input-textarea",{name:"komentarz",label:"Uwagi",rows:4}),n("br",null),i.get("loggedIn")?[n("ks-input-check",{required:true,name:"regulamin",value:"1",label:c.rules}),n("br",null),n("br",null)]:null,n("input",{type:"hidden",name:"zgoda_opinie",value:"1"}),s.get("otherValues").map((function(e){return n("ks-cart-summary",{text:e.name,price:e.value.toString()})})),n("ks-cart-summary",{large:true,text:"Razem:",price:s.get("totalValue").toString()})),n("div",{class:"uk-position-relative"},n("button",{type:"submit",formnovalidate:true,class:"uk-button uk-button-danger uk-width-1-1 uk-width-expand@m ks-text-decorated",style:{fontSize:"28px",fontWeight:"700",padding:"20px"}},"ZAMAWIAM I PŁACĘ"),this.loading?n("div",{class:"uk-overlay uk-light uk-padding-remove uk-position-cover uk-animation-fade",style:{animationDuration:"0.3s",backgroundColor:"#e21334"}},n("div",{"uk-spinner":"ratio: 1.5",class:"uk-position-center"})):null),n("ks-order-form-modal",null)))};Object.defineProperty(e.prototype,"root",{get:function(){return r(this)},enumerable:false,configurable:true});return e}());c.style=l}}}));