var __spreadArray=this&&this.__spreadArray||function(e,n,t){if(t||arguments.length===2)for(var o=0,r=n.length,i;o<r;o++){if(i||!(o in n)){if(!i)i=Array.prototype.slice.call(n,0,o);i[o]=n[o]}}return e.concat(i||Array.prototype.slice.call(n))};System.register(["./common-3952d158.system.js","./commonDynamic-af70983b.system.js","./tracker-7f3a2dbd.system.js"],(function(e){"use strict";var n,t,o,r,i;return{setters:[function(e){n=e.c},function(e){t=e.c},function(e){o=e.t;r=e.e;i=e.r}],execute:function(){e("l",a);var c=function(){function e(){this.ttq=new Promise((function(e){var n=setInterval((function(){if(ttq!==undefined){e(ttq);clearInterval(n)}}),100)}))}e.prototype.pageview=function(e,n){this.ttq.then((function(e){e.track("Browse")}))};e.prototype.product=function(e,n){if(n===void 0){n=""}this.ttq.then((function(n){n.track("ViewContent",{content_type:"product",content_id:e.id,content_name:e.name,currency:e.currency,price:e.currentPrice,quantity:1,value:e.currentPrice})}))};e.prototype.listing=function(e,n){};e.prototype.addToCart=function(e,n){this.ttq.then((function(n){n.track("AddToCart",{content_type:"product",content_id:e.id,content_name:e.name,currency:e.currency,price:e.currentPrice,quantity:e.quantity,value:e.currentPrice*e.quantity})}))};e.prototype.order_checkout=function(e,n,t){var o=this;this.ttq.then((function(e){e.track("StartCheckout",{contents:o.transformProducts(n.products),value:n.productValue,currency:n.currency})}))};e.prototype.order_form=function(e,n,t){var o=this;this.ttq.then((function(e){e.track("AddBilling",{contents:o.transformProducts(n.products),value:n.productValue,currency:n.currency})}))};e.prototype.order_placed=function(e,n,t){var o=this;this.ttq.then((function(e){e.track("Checkout",{contents:o.transformProducts(n.products),value:n.productValue,currency:n.currency})}))};e.prototype.search=function(e){};e.prototype.subscribe=function(e,n){};e.prototype.transformProducts=function(e){return e.map((function(e){return{content_id:e.id,content_type:"product",content_name:e.name,quantity:e.quantity,price:e.currentPrice}}))};return e}();var d=function(){function e(e){var n=e.split(", ");this.pixel=new Promise((function(e){!function(e,n,t,o,r,i,c){if(e.fbq)return;r=e.fbq=function(){r.callMethod?r.callMethod.apply(r,arguments):r.queue.push(arguments)};if(!e._fbq)e._fbq=r;r.push=r;r.loaded=!0;r.version="2.0";r.queue=[];i=n.createElement(t);i.async=!0;i.src=o;c=n.getElementsByTagName(t)[0];c.parentNode.insertBefore(i,c)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");n.forEach((function(e){fbq("init",e)}));e(fbq)}))}e.prototype.pageview=function(e,n){this.pixel.then((function(e){e("track","PageView",{},{eventID:n})}))};e.prototype.product=function(e,n){if(n===void 0){n=""}this.pixel.then((function(t){t("track","ViewContent",{content_type:"product",content_name:e.name,value:e.currentPrice,currency:e.currency,content_ids:[e.id]},{eventID:n})}))};e.prototype.listing=function(e,n){};e.prototype.addToCart=function(e,n){this.pixel.then((function(t){t("track","AddToCart",{content_type:"product",content_name:e.name,value:e.currentPrice,currency:e.currency,contents:[{id:e.id,quantity:e.quantity}]},{eventID:n})}))};e.prototype.order_checkout=function(e,n,t){var o=this;this.pixel.then((function(e){e("track","InitiateCheckout",{contents:o.transformProducts(n.products),content_type:"product",value:n.productValue,currency:n.currency},{eventID:t})}))};e.prototype.order_form=function(e,n,t){};e.prototype.order_placed=function(e,n,t){var o=this;this.pixel.then((function(e){e("track","Purchase",{contents:o.transformProducts(n.products),content_type:"product",value:n.productValue,currency:n.currency},{eventID:t})}))};e.prototype.search=function(e){this.pixel.then((function(n){n("track","Search",{search_string:e})}))};e.prototype.subscribe=function(e,n){};e.prototype.transformProducts=function(e){return e.map((function(e){return{id:e.id,quantity:e.quantity}}))};return e}();var u=function(){function e(){}e.prototype.init=function(e){if(e===void 0){e=undefined}var n,t;if((n=window._edrone)===null||n===void 0?void 0:n.page_loaded)(t=window._edrone)===null||t===void 0?void 0:t.init(e)};e.prototype.relativeToAbsolute=function(e){return e.includes("http")?e:document.baseURI+e};e.prototype.pageview=function(e,n){if(!e.loggedIn||!e.customer)return;var t=e.customer;window._edrone=window._edrone||{};window._edrone.email=t.email;window._edrone.first_name=t.firstName;window._edrone.last_name=t.lastName;window._edrone.subscriber_status=t.subscriber?1:0;window._edrone.country=t.countryISO2;window._edrone.city=t.city;window._edrone.phone=t.phone;this.init()};e.prototype.product=function(e,n){if(n===void 0){n=""}window._edrone=window._edrone||{};window._edrone.product_skus=e.model;window._edrone.product_ids=e.id;window._edrone.product_titles=encodeURIComponent(e.name);if((e===null||e===void 0?void 0:e.images.length)>0)window._edrone.product_images=encodeURIComponent(this.relativeToAbsolute(e.images[0].full.url));window._edrone.product_urls=encodeURIComponent(this.relativeToAbsolute(document.location.href));window._edrone.product_availability=e.availability;window._edrone.product_category_ids=e.categories.map((function(e){return e.id})).join("~");window._edrone.product_category_names=e.categories.map((function(e){return encodeURIComponent(e.name)})).join("~");window._edrone.action_type="product_view";this.init()};e.prototype.listing=function(e,n){window._edrone=window._edrone||{};var t=e.breadcrumbs.filter((function(e){return e.id!="0"}));window._edrone.product_category_ids=t.map((function(e){return e.id})).join("~");window._edrone.product_category_names=t.map((function(e){return encodeURIComponent(e.name)})).join("~");window._edrone.action_type="category_view";this.init()};e.prototype.addToCart=function(e,n){window._edrone=window._edrone||{};window._edrone.product_ids=e.id;window._edrone.product_skus=e.sku;window._edrone.product_titles=encodeURIComponent(e.name);window._edrone.product_images=encodeURIComponent(this.relativeToAbsolute(e.imageFull));window._edrone.product_urls=encodeURIComponent(this.relativeToAbsolute(e.link));window._edrone.product_category_ids=e.categories.map((function(e){return e.id})).join("~");window._edrone.product_category_names=e.categories.map((function(e){return encodeURIComponent(e.name)})).join("~");window._edrone.action_type="add_to_cart";this.init()};e.prototype.order_checkout=function(e,n,t){if(!e.loggedIn||!e.customer)return;var o=e.customer;window._edrone=window._edrone||{};window._edrone.email=o.email;window._edrone.first_name=o.firstName;window._edrone.last_name=o.lastName;window._edrone.subscriber_status=o.subscriber?1:0;window._edrone.country=o.countryISO2;window._edrone.city=o.city;window._edrone.phone=o.phone;window._edrone.action_type="other";this.init()};e.prototype.order_form=function(e,n,t){};e.prototype.order_placed=function(e,n,t){var o=this;var r=e.customer;var i=n.products;window._edrone=window._edrone||{};window._edrone.email=r.email;window._edrone.first_name=r.firstName;window._edrone.last_name=r.lastName;window._edrone.subscriber_status=r.subscriber?1:0;window._edrone.product_skus=i.map((function(e){return e.sku})).join("|");window._edrone.product_ids=i.map((function(e){return e.id})).join("|");window._edrone.product_titles=i.map((function(e){return encodeURIComponent(e.id)})).join("|");window._edrone.product_images=i.map((function(e){return encodeURIComponent(o.relativeToAbsolute(e.image))})).join("|");window._edrone.product_urls=i.map((function(e){return encodeURIComponent(o.relativeToAbsolute(e.link))})).join("|");window._edrone.product_counts=i.map((function(e){return e.quantity})).join("|");window._edrone.product_category_ids=i.map((function(e){return e.categories.map((function(e){return e.id})).join("~")})).join("|");window._edrone.product_category_names=i.map((function(e){return e.categories.map((function(e){return encodeURIComponent(e.name)})).join("~")})).join("|");window._edrone.order_id=n.id;window._edrone.country=r.countryISO2;window._edrone.city=r.city;window._edrone.base_currency=r.currency;window._edrone.order_currency=n.currency;window._edrone.base_payment_value=n.productValue;window._edrone.order_payment_value=n.productValue;window._edrone.action_type="order";this.init()};e.prototype.search=function(e){};e.prototype.subscribe=function(e,n){window._edrone=window._edrone||{};window._edrone.customer_tags=n.place;window._edrone.email=n.email;if(n===null||n===void 0?void 0:n.name)window._edrone.first_name=n.name;window._edrone.subscriber_status=n.subscriber?1:0;if(e.loggedIn&&e.customer){var t=e.customer;window._edrone.first_name=t.firstName;window._edrone.last_name=t.lastName;window._edrone.country=t.countryISO2;window._edrone.city=t.city;window._edrone.phone=t.phone}window._edrone.action_type="subscribe";this.init(false)};return e}();function a(e,o,r){var i=document.getElementById(e);var c=JSON.parse(i.innerHTML);Object.keys(c).map((function(e){n.set(e,c[e])}));if(r.isBrowser){var d=document.getElementById(o);var u=JSON.parse(d.innerHTML);Object.keys(u).map((function(e){t.set(e,u[e])}));setTimeout((function(){t.set("loaded",true)}),100);s()}}function s(){o.get("loaded").then((function(){var e=t.get("tracking");var n=function(e){return o.set("trackers",__spreadArray(__spreadArray([],o.get("trackers"),true),[e],false))};if(e.tiktok)n(new c);if(e.facebook)n(new d(e.facebook));if(e.edrone)n(new u);r((function(n){return n===null||n===void 0?void 0:n.pageview(t.state,e.pageview)}));i()}))}}}}));