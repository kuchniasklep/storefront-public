import{g as e}from"./a11y-BT_m41LL.js";function t(t){let{swiper:r,extendParams:i,on:n,emit:a,params:s}=t;r.autoplay={running:false,paused:false,timeLeft:0};i({autoplay:{enabled:false,delay:3e3,waitForTransition:true,disableOnInteraction:false,stopOnLastSlide:false,reverseDirection:false,pauseOnMouseEnter:false}});let u;let f;let o=s&&s.autoplay?s.autoplay.delay:3e3;let l=s&&s.autoplay?s.autoplay.delay:3e3;let c;let m=(new Date).getTime();let p;let d;let y;let T;let w;let b;let v;function D(e){if(!r||r.destroyed||!r.wrapperEl)return;if(e.target!==r.wrapperEl)return;r.wrapperEl.removeEventListener("transitionend",D);if(v||e.detail&&e.detail.bySwiperTouchMove){return}S()}const F=()=>{if(r.destroyed||!r.autoplay.running)return;if(r.autoplay.paused){p=true}else if(p){l=c;p=false}const e=r.autoplay.paused?c:m+l-(new Date).getTime();r.autoplay.timeLeft=e;a("autoplayTimeLeft",e,e/o);f=requestAnimationFrame((()=>{F()}))};const g=()=>{let e;if(r.virtual&&r.params.virtual.enabled){e=r.slides.find((e=>e.classList.contains("swiper-slide-active")))}else{e=r.slides[r.activeIndex]}if(!e)return undefined;const t=parseInt(e.getAttribute("data-swiper-autoplay"),10);return t};const A=e=>{if(r.destroyed||!r.autoplay.running)return;cancelAnimationFrame(f);F();let t=typeof e==="undefined"?r.params.autoplay.delay:e;o=r.params.autoplay.delay;l=r.params.autoplay.delay;const i=g();if(!Number.isNaN(i)&&i>0&&typeof e==="undefined"){t=i;o=i;l=i}c=t;const n=r.params.speed;const s=()=>{if(!r||r.destroyed)return;if(r.params.autoplay.reverseDirection){if(!r.isBeginning||r.params.loop||r.params.rewind){r.slidePrev(n,true,true);a("autoplay")}else if(!r.params.autoplay.stopOnLastSlide){r.slideTo(r.slides.length-1,n,true,true);a("autoplay")}}else{if(!r.isEnd||r.params.loop||r.params.rewind){r.slideNext(n,true,true);a("autoplay")}else if(!r.params.autoplay.stopOnLastSlide){r.slideTo(0,n,true,true);a("autoplay")}}if(r.params.cssMode){m=(new Date).getTime();requestAnimationFrame((()=>{A()}))}};if(t>0){clearTimeout(u);u=setTimeout((()=>{s()}),t)}else{requestAnimationFrame((()=>{s()}))}return t};const h=()=>{m=(new Date).getTime();r.autoplay.running=true;A();a("autoplayStart")};const L=()=>{r.autoplay.running=false;clearTimeout(u);cancelAnimationFrame(f);a("autoplayStop")};const M=(e,t)=>{if(r.destroyed||!r.autoplay.running)return;clearTimeout(u);if(!e){b=true}const i=()=>{a("autoplayPause");if(r.params.autoplay.waitForTransition){r.wrapperEl.addEventListener("transitionend",D)}else{S()}};r.autoplay.paused=true;if(t){if(w){c=r.params.autoplay.delay}w=false;i();return}const n=c||r.params.autoplay.delay;c=n-((new Date).getTime()-m);if(r.isEnd&&c<0&&!r.params.loop)return;if(c<0)c=0;i()};const S=()=>{if(r.isEnd&&c<0&&!r.params.loop||r.destroyed||!r.autoplay.running)return;m=(new Date).getTime();if(b){b=false;A(c)}else{A()}r.autoplay.paused=false;a("autoplayResume")};const O=()=>{if(r.destroyed||!r.autoplay.running)return;const t=e();if(t.visibilityState==="hidden"){b=true;M(true)}if(t.visibilityState==="visible"){S()}};const q=e=>{if(e.pointerType!=="mouse")return;b=true;v=true;if(r.animating||r.autoplay.paused)return;M(true)};const R=e=>{if(e.pointerType!=="mouse")return;v=false;if(r.autoplay.paused){S()}};const _=()=>{if(r.params.autoplay.pauseOnMouseEnter){r.el.addEventListener("pointerenter",q);r.el.addEventListener("pointerleave",R)}};const j=()=>{if(r.el&&typeof r.el!=="string"){r.el.removeEventListener("pointerenter",q);r.el.removeEventListener("pointerleave",R)}};const x=()=>{const t=e();t.addEventListener("visibilitychange",O)};const E=()=>{const t=e();t.removeEventListener("visibilitychange",O)};n("init",(()=>{if(r.params.autoplay.enabled){_();x();h()}}));n("destroy",(()=>{j();E();if(r.autoplay.running){L()}}));n("_freeModeStaticRelease",(()=>{if(y||b){S()}}));n("_freeModeNoMomentumRelease",(()=>{if(!r.params.autoplay.disableOnInteraction){M(true,true)}else{L()}}));n("beforeTransitionStart",((e,t,i)=>{if(r.destroyed||!r.autoplay.running)return;if(i||!r.params.autoplay.disableOnInteraction){M(true,true)}else{L()}}));n("sliderFirstMove",(()=>{if(r.destroyed||!r.autoplay.running)return;if(r.params.autoplay.disableOnInteraction){L();return}d=true;y=false;b=false;T=setTimeout((()=>{b=true;y=true;M(true)}),200)}));n("touchEnd",(()=>{if(r.destroyed||!r.autoplay.running||!d)return;clearTimeout(T);clearTimeout(u);if(r.params.autoplay.disableOnInteraction){y=false;d=false;return}if(y&&r.params.cssMode)S();y=false;d=false}));n("slideChange",(()=>{if(r.destroyed||!r.autoplay.running)return;w=true}));Object.assign(r.autoplay,{start:h,stop:L,pause:M,resume:S})}export{t as A};
//# sourceMappingURL=autoplay-CJ_Tkzeb.js.map