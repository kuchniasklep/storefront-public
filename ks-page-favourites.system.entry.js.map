{"version":3,"names":["favourites","createStore","favouritesCss","PageRecipe","exports","class_1","hostRef","this","removeAllLoading","prototype","componentWillLoad","favouritesDataElement","document","getElementById","favouritesData","JSON","parse","innerHTML","Object","keys","map","key","set","removeAll","removeAllFavourites","then","location","reload","render","_this","products","get","descriptions","h","skipbase","commonData","commonDynamicData","class","length","priceFormat","rounded","name","loading","onClick","card","summary","id","product","round","border","link"],"sources":["src/global/data/favourites.ts","src/components/pages/favourites/favourites.css?tag=ks-page-favourites","src/components/pages/favourites/favourites.tsx"],"sourcesContent":["import { createStore } from \"@stencil/store\";\nimport { ProductCardData } from \"./listing\";\n\nexport const favourites = createStore({} as FavouritesData);\n\nexport interface FavouritesData {\n    value: number;\n    valueString: string;\n    removeAllString: string;\n\n    emptyHeading: string;\n    emptyButton: string;\n\n    descriptions: {[index: string]: string};\n    products: ProductCardData[];\n}","ks-page-favourites .container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex: 1 1 auto;\n}\n\nks-page-favourites .favourites-container {\n    max-width: 100%;\n    width: 1000px;\n    box-sizing: border-box;\n    padding: 30px;\n    margin: 30px 0px;\n    background-color: #fff;\n    border-radius: 10px;\n}\n\nks-page-favourites .favourites-header {\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n}\n\nks-page-favourites .favourites-header .removeAll {\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n}\n\nks-page-favourites .favourites-header > span {\n    font-size: 26px;\n    line-height: 26px;\n    font-weight: 700;\n    font-family: var(--font-emphasis);\n    white-space: nowrap;\n}\n\nks-page-favourites .favourites-header h1 {\n    width: 100%;\n    margin: 0px;\n    font-size: 24px;\n}\n\nks-page-favourites .favourites-header .value {\n    color: var(--color-secondary);\n}\n\nks-page-favourites .product-container {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    margin-top: 20px;\n}\n\nks-page-favourites .empty {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    flex: 1 0 auto;\n    min-height: 320px;\n    padding: 40px 40px;\n}\n\nks-page-favourites .empty h1 {\n    font-size: 20px;\n    font-weight: 700;\n    margin-bottom: 30px;\n}\n\nks-page-favourites .empty ks-button {\n    max-width: 300px;\n    width: 100%;\n}\n\n\n@media (max-width: 1060px) {\n    ks-page-favourites {\n        background-color: #fff;\n    }\n}\n\n@media screen and (max-width: 550px) {\n    ks-page-favourites .favourites-header h1 {\n        text-align: center;\n    }\n\n    ks-page-favourites .favourites-header {\n        flex-wrap: wrap;\n        justify-content: center;\n    }\n\n    ks-page-favourites .favourites-header > span {\n        font-size: 20px;\n        line-height: 20px;\n    }\n\n    ks-page-favourites .favourites-header .removeAll {\n        justify-content: center;\n        width: 100%;\n        margin-top: 10px;\n    }\n    \n}","import { Component, h, Prop, State } from '@stencil/core';\nimport { favourites, FavouritesData } from \"../../../global/data/favourites\";\nimport { removeAllFavourites } from \"../../../global/functions/favourites\";\nimport priceFormat from '../../../global/functions/price';\n\ndeclare global { interface Window { dataLayer: any[] }}\n\n@Component({\n    tag: 'ks-page-favourites',\n    styleUrl: 'favourites.css'\n})\nexport class PageRecipe{\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() favouritesData: string;\n    @State() removeAllLoading: boolean = false;\n\n    componentWillLoad() {\n        const favouritesDataElement = document.getElementById(this.favouritesData);\n\t\tconst favouritesData = JSON.parse(favouritesDataElement.innerHTML) as FavouritesData;\n\n        Object.keys(favouritesData).map(key => {\n\t\t\tfavourites.set(key as keyof FavouritesData, favouritesData[key]);\n\t\t});\n    }\n\n    removeAll() {\n        if(this.removeAllLoading) return;\n        this.removeAllLoading = true;\n    \n        removeAllFavourites().then(() => {\n            location.reload();\n        });\n    }\n\n\trender() {\n        const products = favourites.get('products');\n        const descriptions = favourites.get('descriptions');\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n            <div class=\"container\">\n                {products?.length > 0 ?\n                    <div class=\"favourites-container\">\n                        <div class=\"favourites-header\">\n                            <h1>{favourites.get('valueString')} {priceFormat(favourites.get('value'))}</h1>\n                            <div class=\"removeAll\">\n                                <ks-button rounded\n                                    name={favourites.get('removeAllString')}\n                                    loading={this.removeAllLoading}\n                                    onClick={()=>this.removeAll()}\n                                />\n                            </div>\n                        </div>\n\n                        <div class=\"product-container\">\n                            {products?.map(card =>\n                                <ks-product-fav-card summary={descriptions[card.id]} product={card} />\n                            )}\n                        </div>\n                    </div>\n                :\n                    <div class=\"empty\">\n                        <h1>{favourites.get('emptyHeading')}</h1>\n                        <ks-button round border name={favourites.get('emptyButton')} link=\"/\" />\n                    </div>\n                }\n            </div>\n        </ks-page-base>;\n\t}\n}\n"],"mappings":"8bAGO,IAAMA,EAAaC,EAAY,ICHtC,IAAMC,EAAgB,y7D,ICWTC,EAAUC,EAAA,gCAJvB,SAAAC,EAAAC,G,UAUaC,KAAgBC,iBAAY,KAsDxC,CApDGH,EAAAI,UAAAC,kBAAA,WACI,IAAMC,EAAwBC,SAASC,eAAeN,KAAKO,gBACjE,IAAMA,EAAiBC,KAAKC,MAAML,EAAsBM,WAElDC,OAAOC,KAAKL,GAAgBM,KAAI,SAAAC,GACrCrB,EAAWsB,IAAID,EAA6BP,EAAeO,GAC5D,G,EAGEhB,EAAAI,UAAAc,UAAA,WACI,GAAGhB,KAAKC,iBAAkB,OAC1BD,KAAKC,iBAAmB,KAExBgB,IAAsBC,MAAK,WACvBC,SAASC,QACb,G,EAGPtB,EAAAI,UAAAmB,OAAA,eAAAC,EAAAtB,KACO,IAAMuB,EAAW9B,EAAW+B,IAAI,YAChC,IAAMC,EAAehC,EAAW+B,IAAI,gBAE1C,OAAOE,EAAA,gBAAAZ,IAAA,2CAAca,SAAU3B,KAAK2B,SAAUC,WAAY5B,KAAK4B,WAAYC,kBAAmB7B,KAAK6B,mBACzFH,EAAK,OAAAZ,IAAA,2CAAAgB,MAAM,cACNP,IAAQ,MAARA,SAAQ,SAARA,EAAUQ,QAAS,EAChBL,EAAK,OAAAI,MAAM,wBACPJ,EAAK,OAAAI,MAAM,qBACPJ,EAAA,UAAKjC,EAAW+B,IAAI,eAAc,IAAGQ,EAAYvC,EAAW+B,IAAI,WAChEE,EAAK,OAAAI,MAAM,aACPJ,EAAA,aAAWO,QAAO,KACdC,KAAMzC,EAAW+B,IAAI,mBACrBW,QAASnC,KAAKC,iBACdmC,QAAS,WAAI,OAAAd,EAAKN,WAAL,MAKzBU,EAAA,OAAKI,MAAM,qBACNP,IAAQ,MAARA,SAAQ,SAARA,EAAUV,KAAI,SAAAwB,GACX,OAAAX,EAAqB,uBAAAY,QAASb,EAAaY,EAAKE,IAAKC,QAASH,GAA9D,MAKZX,EAAK,OAAAI,MAAM,SACPJ,EAAA,UAAKjC,EAAW+B,IAAI,iBACpBE,EAAW,aAAAe,MAAK,KAACC,OAAM,KAACR,KAAMzC,EAAW+B,IAAI,eAAgBmB,KAAK,Q,WAtDnE,I","ignoreList":[]}