{"version":3,"file":"favourites-CasE1SW4.system.js","sources":["src/global/functions/favourites.ts"],"sourcesContent":["import Fetch from \"./fetch\";\nimport { commonDynamic } from \"../data/commonDynamic\";\nimport { ProductShortData } from \"../data/product\";\nimport { DataLayer } from \"../dataLayer\";\n\nexport async function addToFavourites(product: ProductShortData) {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n    const navbar = document.querySelector('ks-navbar') as HTMLKsNavbarElement;\n\n    let cartBody = new FormData();\n        cartBody.append(\"id\", product.id);\n\n    const api = commonDynamic.get('api').addToFavourites;\n\n    return Fetch(api, cartBody)\n        .then(() => {\n            navbar.IncrementHeart();\n            DataLayer.addToFavourites(product);\n        })\n        .catch(error => errorpopup.show(error));\n}\n\nexport async function removeFromFavourites(id: string) {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n    const navbar = document.querySelector('ks-navbar') as HTMLKsNavbarElement;\n\n    let cartBody = new FormData();\n        cartBody.append(\"id\", id);\n        cartBody.append(\"akcja\", \"usun\");\n\n    const api = commonDynamic.get('api').removeFromFavourites;\n\n    return Fetch(api, cartBody)\n        .then(() => navbar.DecrementHeart())\n        .catch(error => errorpopup.show(error));\n}\n\nexport async function removeAllFavourites() {\n    const errorpopup = document.querySelector('ks-error-popup') as HTMLKsErrorPopupElement;\n\n    const api = commonDynamic.get('api').removeAllFavourites;\n\n    return Fetch(api).catch(error => errorpopup.show(error));\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;YAKO,eAAe,eAAe,CAAC,OAAyB,EAAA;gBAC3D,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAA4B;gBACtF,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAwB;YAEzE,IAAA,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE;gBACzB,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC;gBAErC,MAAM,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,eAAe;YAEpD,IAAA,OAAO,KAAK,CAAC,GAAG,EAAE,QAAQ;qBACrB,IAAI,CAAC,MAAK;oBACP,MAAM,CAAC,cAAc,EAAE;YACvB,QAAA,SAAS,CAAC,eAAe,CAAC,OAAO,CAAC;YACtC,KAAC;YACA,SAAA,KAAK,CAAC,KAAK,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC/C;YAEO,eAAe,oBAAoB,CAAC,EAAU,EAAA;gBACjD,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAA4B;gBACtF,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAwB;YAEzE,IAAA,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE;YACzB,IAAA,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC;YACzB,IAAA,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC;gBAEpC,MAAM,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,oBAAoB;YAEzD,IAAA,OAAO,KAAK,CAAC,GAAG,EAAE,QAAQ;qBACrB,IAAI,CAAC,MAAM,MAAM,CAAC,cAAc,EAAE;YAClC,SAAA,KAAK,CAAC,KAAK,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC/C;YAEO,eAAe,mBAAmB,GAAA;gBACrC,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAA4B;gBAEtF,MAAM,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,mBAAmB;YAExD,IAAA,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,KAAK,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC5D;;;;;;;;"}