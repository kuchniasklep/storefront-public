{"version":3,"file":"ks-image.entry.system.js","sources":["src/components/elements/image.tsx"],"sourcesContent":["import { Component, h, Prop, State, Method, Watch } from '@stencil/core';\n\n/** @deprecated Ks-image is deprecated. Use ks-img instead. */\n\n@Component({\n\ttag: 'ks-image'\n})\nexport class Image {\n    @Prop() src: string;\n    @Prop() alt: string;\n\n    @Prop() width: string;\n    @Prop() height: string;\n\n    @Prop() sync: boolean = false;\n    @Prop() cover: boolean = false;\n    @Prop() contain: boolean = false;\n\n    @State() loaded: boolean = false;\n    @State() loadAnimated: boolean = false;\n    \n    @Method() async loadCheck(e: Event) {\n        if (e.target instanceof HTMLElement && !e.target.getAttribute(\"src\").includes('data:image'))\n            this.loaded = true;\n    }\n\n    componentDidUpdate() {\n        if (this.loaded && !this.loadAnimated) {\n            setTimeout(() => {\n               this.loadAnimated = true;\n            }, 1000);\n        }\n    }\n\n    @Watch('src') srcListener() {\n        this.loaded = false;\n        this.loadAnimated = false;\n    }\n\n\trender() {\n        let imageStyle = \"\";\n\n        if (!this.loaded)\n            imageStyle = \"uk-invisible uk-position-center\";\n            \n        else if (!this.loadAnimated) \n            imageStyle = \"uk-animation-fade\"\n        \n        if(this.sync)\n            return <img src={this.src} width={this.width} height={this.height} alt={this.alt}/>;\n\n        else if(this.cover) return (\n            <div class={\"uk-cover-container\"}>\n                <canvas width={this.width} height={this.height}></canvas>\n                {!this.loaded ? <div class=\"ks-spinner uk-position-center\"></div> : null}\n                <img uk-cover onLoad={e => this.loadCheck(e)} class={imageStyle} width={this.width} height={this.height} data-src={this.src} alt={this.alt} uk-img=\"target: !ks-image\"/>\n            </div>\n        );\n\n        else if(this.contain) return (\n\t\t\t<div class={\"uk-position-relative\"}>\n                <canvas width={this.width} height={this.height}></canvas>\n                {!this.loaded ? <div class=\"ks-spinner uk-position-center\"></div> : null}\n                <img onLoad={e => this.loadCheck(e)} class={imageStyle + \" uk-position-center uk-responsive-height\"} data-src={this.src} width={this.width} height={this.height} alt={this.alt} uk-img=\"target: !ks-image\"/>\n            </div>\n\t\t);\n\n        else return (\n\t\t\t<div class={\"uk-position-relative\"}>\n                {!this.loaded ? [\n                    <canvas width={this.width} height={this.height}></canvas>,\n                    <div class=\"ks-spinner uk-position-center\"></div>\n                ]: null}\n                <img onLoad={e => this.loadCheck(e)} class={imageStyle} data-src={this.src} width={this.width} height={this.height} alt={this.alt} uk-img=\"target: !ks-image\"/>\n            </div>\n\t\t);\n\t}\n}\n"],"names":[],"mappings":"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"}