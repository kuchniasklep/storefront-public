{"version":3,"names":["OrderPocztapunkt","exports","class_1","prototype","componentDidLoad","this","root","style","display","Show","event","preventDefault","PPWidgetApp","toggleMap","callback","c","_this","Callback","payOnPickup","address","search","value","punktodbioru","code","description","replace","formData","FormData","append","headers","Headers","fetch","api","method","body","credentials","Validate","valid","IsValid","render","h","innerHTML","class","animation","onClick","e","button","type","name"],"sources":["src/components/order/confirmation/OrderPocztaPunkt.tsx"],"sourcesContent":["import { Component, h, Prop, Element, State, Method } from '@stencil/core';\n\ndeclare var PPWidgetApp: any;\n\n@Component({\n  tag: 'ks-order-pocztapunkt',\n})\nexport class OrderPocztapunkt {\n\n    @Prop({mutable: true}) search: string = \"WrocÅ‚aw, Polska\";\n    @Prop() api: string = \"\";\n    @Prop() button: string = \"\";\n\n    @Element() root: HTMLElement;\n\n    componentDidLoad() {\n        this.root.style.display = \"block\";\n    }\n\n    @State() description: string = \"\";\n    @State() address: string = \"\";\n    @State() code: string = \"\";\n\n    async Show(event: Event) {\n        event.preventDefault();\n\n        PPWidgetApp.toggleMap({\n            callback: (c)=>this.Callback(c),\n            payOnPickup: false,\n            address: this.search\n        });\n    }\n\n\n    Callback(callback: any) {\n        var value = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        var punktodbioru = callback['pni'];\n\n        this.address = callback['name'] + ' - ' + callback['city'] + ' - ' + callback['street'];\n        this.search = callback['city'];\n        this.code = callback['pni'];\n\n        this.description = callback['description'];\n        this.description = this.description.replace(/#/gi,'<br />');\n\n        let formData = new FormData();\n            formData.append(\"value\", value);\n            formData.append(\"punktodbioru\", punktodbioru);\n\n        var headers = new Headers();\n            headers.append('pragma', 'no-cache');\n            headers.append('cache-control', 'no-cache');\n\n        fetch(this.api, {\n            method: 'POST',\n            headers: headers,\n            body: formData,\n            credentials: \"same-origin\"\n        });\n\n        this.Validate();\n    }\n\n    @State() valid: boolean = true;\n\n    @Method()\n    async Validate() {\n        this.valid = this.address != \"\";\n    }\n\n    @Method()\n    async IsValid() {\n        return this.valid;\n    }\n\n    render() {\n        return[\n            <style innerHTML=\"\n                #overlay {\n                    position: fixed !important;\n                    display: flex !important;\n                    width: 100%;\n                    height: 100vh;\n                    justify-content: center;\n                    align-items: center;\n\n                    top: 0 !important;\n                }\n\n                @keyframes ks-fade {\n                    from {opacity: 1.0;}\n                    to {opacity: 0.4;}\n                }\n            \"></style>,\n\n            <p innerHTML={this.address}></p>,\n\n            <button class={\"uk-button uk-width-1-1 uk-margin-top \" + (this.valid ? \"uk-button-secondary\" : \"uk-button-danger\")}\n                    style={{animation: this.valid ? \"\" : \"ks-fade 0.5s cubic-bezier(.86,.01,.67,1) infinite alternate\"}}\n                    onClick={(e)=>this.Show(e)}>{this.button}</button>,\n            <input type=\"hidden\" name=\"lokalizacjaRuch\" value={this.address}/>,\n            <input type=\"hidden\" name=\"ShippingDestinationCode\" value={this.code}/>,\n            <input type=\"hidden\" name=\"OpisPunktuOdbioru\" value={this.description}/>\n        ]\n    }\n}"],"mappings":"wmDAOaA,EAAgBC,EAAA,kC,oCAEe,kB,SAClB,G,YACG,G,iBAQM,G,aACJ,G,UACH,G,WA0CE,I,CAhD1BC,EAAAC,UAAAC,iBAAA,WACIC,KAAKC,KAAKC,MAAMC,QAAU,O,EAOxBN,EAAAC,UAAAM,KAAN,SAAWC,G,gGACPA,EAAMC,iBAENC,YAAYC,UAAU,CAClBC,SAAU,SAACC,GAAI,OAAAC,EAAKC,SAASF,EAAd,EACfG,YAAa,MACbC,QAASd,KAAKe,S,iBAKtBlB,EAAAC,UAAAc,SAAA,SAASH,GACL,IAAIO,EAAQP,EAAS,QAAU,MAAQA,EAAS,QAAU,MAAQA,EAAS,UAC3E,IAAIQ,EAAeR,EAAS,OAE5BT,KAAKc,QAAUL,EAAS,QAAU,MAAQA,EAAS,QAAU,MAAQA,EAAS,UAC9ET,KAAKe,OAASN,EAAS,QACvBT,KAAKkB,KAAOT,EAAS,OAErBT,KAAKmB,YAAcV,EAAS,eAC5BT,KAAKmB,YAAcnB,KAAKmB,YAAYC,QAAQ,MAAM,UAElD,IAAIC,EAAW,IAAIC,SACfD,EAASE,OAAO,QAASP,GACzBK,EAASE,OAAO,eAAgBN,GAEpC,IAAIO,EAAU,IAAIC,QACdD,EAAQD,OAAO,SAAU,YACzBC,EAAQD,OAAO,gBAAiB,YAEpCG,MAAM1B,KAAK2B,IAAK,CACZC,OAAQ,OACRJ,QAASA,EACTK,KAAMR,EACNS,YAAa,gBAGjB9B,KAAK+B,U,EAMHlC,EAAAC,UAAAiC,SAAN,W,qFACI/B,KAAKgC,MAAQhC,KAAKc,SAAW,G,iBAI3BjB,EAAAC,UAAAmC,QAAN,W,qFACI,SAAOjC,KAAKgC,M,QAGhBnC,EAAAC,UAAAoC,OAAA,eAAAvB,EAAAX,KACI,MAAM,CACFmC,EAAA,SAAOC,UAAU,ufAkBjBD,EAAA,KAAGC,UAAWpC,KAAKc,UAEnBqB,EAAA,UAAQE,MAAO,yCAA2CrC,KAAKgC,MAAQ,sBAAwB,oBACvF9B,MAAO,CAACoC,UAAWtC,KAAKgC,MAAQ,GAAK,+DACrCO,QAAS,SAACC,GAAI,OAAA7B,EAAKP,KAAKoC,EAAV,GAAexC,KAAKyC,QAC1CN,EAAA,SAAOO,KAAK,SAASC,KAAK,kBAAkB3B,MAAOhB,KAAKc,UACxDqB,EAAA,SAAOO,KAAK,SAASC,KAAK,0BAA0B3B,MAAOhB,KAAKkB,OAChEiB,EAAA,SAAOO,KAAK,SAASC,KAAK,oBAAoB3B,MAAOhB,KAAKmB,c,yHA/FzC,G"}