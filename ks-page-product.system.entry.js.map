{"version":3,"names":["productCss","PageProduct","exports","class_1","prototype","componentWillLoad","productDataElement","document","getElementById","this","productData","JSON","parse","innerHTML","Object","keys","map","key","product","set","setDefaultTrait","productDynamicDataElement","productDynamicData","productDynamicData_1","productDynamic","setTimeout","track","get","traits","reduce","accumulator","trait","id","items","DataLayer","state","componentDidUpdate","window","handleInpostIziButtons","render","infoBanner","productBanner","points","recycle","installments","tags","variants","gspr","tabs","__spreadArray","name","info","youtube","similar","accessories","model","ean","review","strings","h","skipbase","commonData","commonDynamicData","content","cartText","common","addToCart","availabilityText","notifyAvailability","style","marginTop","icon","href","message","shortMessage","attributeMessage","image","energyOld","energy","marginRight","class","negotiateHeading","payuId","payuKey","caParameters","button","price","payuIcon","parameters","caIcon","slot","length","padding","names","tab","join","index","open","main","_a","files","center","file","round","newtab","nofollow","link","url","width","maxWidth","_b","similarHeading","card","accessoriesHeading"],"sources":["src/components/pages/product/product.css?tag=ks-page-product","src/components/pages/product/product.tsx"],"sourcesContent":["ks-page-product > ks-page-base > .listing-heading {\n    text-align: center;\n    margin-top: 15px;\n    font-size: large;\n    font-weight: 700;\n    margin-bottom: 15px;\n    font-family: var(--font-emphasis);\n}\n\nks-page-product > ks-page-base > ks-product-container {\n    margin-bottom: 15px;\n}","import { Component, h, Prop, Build } from '@stencil/core';\nimport { product, ProductData } from \"../../../global/data/product\";\nimport { productDynamic, ProductDynamicData } from \"../../../global/data/productDynamic\";\nimport { common } from '../../../global/data/common';\nimport { DataLayer } from '../../../global/dataLayer';\n\ndeclare global { interface Window { dataLayer: any[] }}\n@Component({\n    tag: 'ks-page-product',\n    styleUrl: 'product.css'\n})\nexport class PageProduct {\n    @Prop() skipbase: boolean;\n    @Prop() commonData: string;\n    @Prop() commonDynamicData: string;\n\n    @Prop() productData: string;\n    @Prop() productDynamicData: string;\n\n    componentWillLoad() {\n        const productDataElement = document.getElementById(this.productData);\n\t\tconst productData = JSON.parse(productDataElement.innerHTML) as ProductData;\n\n        Object.keys(productData).map(key => {\n\t\t\tproduct.set(key as keyof ProductData, productData[key]);\n\t\t});\n\n        this.setDefaultTrait();\n\n        if (Build.isBrowser) {\n            const productDynamicDataElement = document.getElementById(this.productDynamicData);\n            const productDynamicData = JSON.parse(productDynamicDataElement.innerHTML) as ProductDynamicData;\n    \n            Object.keys(productDynamicData).map(key => {\n                productDynamic.set(key as keyof ProductDynamicData, productDynamicData[key]);\n            });\n    \n            setTimeout(() => {\n                productDynamic.set(\"loaded\", true);\n            }, 100);\n\n            this.track();\n        }\n    }\n\n    setDefaultTrait() {\n\t\tif(!product?.get(\"traits\"))\treturn;\n\t\t\n\t\tconst traits = product.get(\"traits\").reduce((accumulator, trait) => {\n\t\t\treturn accumulator + \"x\" + trait.id + \"-\" + trait.items[0].id;\n\t\t}, \"\");\n\n\t\tproduct.set(\"traitIDs\", traits);\n\t}\n\n    track() {\n        DataLayer.product(product.state, productDynamic.get(\"eventId\"));\n    }\n\n    componentDidUpdate() {\n        (window as any).handleInpostIziButtons();\n    }\n\n\trender() {\n        if(!product?.get('name')) return false;\n\n        const infoBanner = product.get(\"infoBanner\");\n        const productBanner = product.get(\"productBanner\");\n\n        const points = product.get(\"points\");\n        const recycle = product.get(\"recycle\");\n        const installments = product.get('installments');\n        const tags = product.get('tags');\n        const variants = product.get('variants');\n\n        const gspr = product.get(\"gspr\");\n        const tabs = [\n            ...product.get('tabs'), \n            ...(gspr?.name || gspr?.info ?\n                [{name: \"Producent\", gspr: gspr}] : []\n            )\n        ]\n\n        const youtube = product.get('youtube');\n\n        const similar = product.get('similar');\n        const accessories = product.get('accessories');\n\n        const model = product.get('model') || product.get('catalog');\n        const ean = product.get('ean');\n\n        const review = product.get('reviewAverage');\n\n        const strings = product.get('strings');\n\n\t\treturn <ks-page-base skipbase={this.skipbase} commonData={this.commonData} commonDynamicData={this.commonDynamicData}>\n\n            {infoBanner ? \n                <ks-content-info-banner content={infoBanner} />\n            : null}\n\n            <ks-container>\n                <ks-product-notify-edrone/>\n                <ks-product-admin/>\n\n                {product.get(\"message\") ?\n                    <ks-product-message/>\n                :null}\n                \n                <ks-product-info>\n                    {product.get('traits') ?\n                        <ks-product-traits></ks-product-traits>\n                    : null}\n                \n                    <ks-product-purchase\n                        cartText={common.get('translations').addToCart}\n                        availabilityText={strings.notifyAvailability}\n                    ></ks-product-purchase>\n\n                    <ks-product-shipping></ks-product-shipping>\n\n                    {product.get('warranty') ? \n                        <ks-product-attribute style={{marginTop: \"15px\"}} icon=\"tool\" href={product.get('warrantyLink')}>\n                            {product.get('warranty')}\n                        </ks-product-attribute>\n                    : null}\n                    \n                    {points ?\n                        <ks-product-tooltip message={points.message}>\n                            <ks-product-attribute icon=\"gift\">{points.shortMessage}</ks-product-attribute>\n                        </ks-product-tooltip>\n                    : null}\n\n                    {recycle ?\n                        <ks-product-tooltip message={recycle.message}>\n                            <ks-product-attribute icon=\"recycle\">{recycle.shortMessage}</ks-product-attribute>\n                        </ks-product-tooltip>\n                    : null}\n\n                    {installments?.attributeMessage ?\n                        <ks-product-attribute icon=\"dollar-sign\">{installments?.attributeMessage}</ks-product-attribute>\n                    : null}\n\n                    {product.get(\"energy\") && product.get(\"energyLabel\") ? \n                        <ks-product-image-popup image={product.get(\"energyLabel\")}>\n                            <ks-product-attribute energyOld={product.get(\"energyOld\")} energy={product.get(\"energy\")}>Klasa energetyczna</ks-product-attribute>\n                        </ks-product-image-popup>\n                    : null}\n\n                    {model || ean ?\n                        <ks-product-attribute style={{marginTop: \"15px\"}} icon=\"file\" >\n                            <span style={{marginRight: \"15px\"}}>\n                                {model ? <span style={{marginRight: \"7px\"}}>{strings.model} {model} </span> : null}\n                                {ean ? <span>{strings.ean} {ean}</span> : null}\n                            </span>\n                        </ks-product-attribute>\n                    : null}\n\n                    <div class=\"buttons\">\n                        {product.get('negotiateEnabled') ?\n                            <ks-product-negotiate>\n                                <ks-product-button>{product.get('strings').negotiateHeading}</ks-product-button>\n                            </ks-product-negotiate>\n                        : null}\n\n                        {(installments.payuId && installments.payuKey) || installments.caParameters ?\n                            <ks-product-installments name={installments.button}>\n                                {installments.payuId && installments.payuKey ?\n                                    <ks-product-calculator-payu\n                                        price={product.get(\"currentPrice\")}\n                                        pos-id={installments.payuId}\n                                        api-key={installments.payuKey}>\n                                        <ks-product-button icon={installments.payuIcon}/>\n                                    </ks-product-calculator-payu>\n                                : null}\n\n                                {installments.caParameters ?\n                                    <ks-product-calculator-ca\n                                        price={product.get(\"currentPrice\")}\n                                        parameters={installments.caParameters}>\n                                        <ks-product-button icon={installments.caIcon}/>\n                                    </ks-product-calculator-ca>\n                                : null}\n                            </ks-product-installments>\n                        : null}\n                    </div>\n\n                    <ks-product-brand slot=\"brand\"/>\n                </ks-product-info>\n            </ks-container>\n\n            {productBanner && productBanner?.image ?\n                <ks-container>\n                    <ks-content-info-banner productBanner={productBanner} />\n                </ks-container>\n            : null}\n\n            {tags?.length > 0 || variants?.length > 0 ?\n                <ks-container padding>\n                    {tags?.length > 0 && !(variants?.length > 0) ?\n                        <ks-product-tags />\n                    : null}\n\n                    {variants?.length > 0 ?\n                        <ks-product-variants />\n                    : null}\n                </ks-container>\n            : null}\n\n            {tabs?.length > 0 ?\n                <ks-container>\n                    <ks-product-tabs names={tabs.map(tab => tab.name).join(\", \")}>\n                        {tabs.map((tab, index) => \n                            <ks-product-tab name={tab.name} open={index==0} main={index==0} content={tab.content} gspr={tab.gspr} />\n                        )}\n                    </ks-product-tabs>\n                </ks-container>\n            : null}\n\n            {gspr.files?.length > 0 ?\n                <ks-container padding center>\n                    {gspr.files.map(file => \n                        <ks-button class=\"file\" round newtab nofollow link={file.url} name={file.name} style={{width: \"100%\", maxWidth: \"300px\"}}/>\n                    )}\n                </ks-container>\n            : null}\n\n            {product.get('reviewProducts')?.length > 0 ?\n                <ks-container>\n                    <ks-review-product />\n                </ks-container>\n            : null}\n\n            {tags?.length > 0 && variants?.length > 0 ?\n                <ks-container padding>\n                    <ks-product-tags/>\n                </ks-container>\n            : null}\n\n            {youtube ?\n                <ks-container>\n                    {youtube.map(id => <ks-product-youtube video-id={id} />)}\n                </ks-container>\n            : null}\n\n            {similar?.length > 0 ? [\n                    <span class=\"listing-heading\">{strings.similarHeading}</span>,\n                    <ks-product-container>\n                        {similar.map(card => \n                            <ks-product-card product={card}/>\n                        )}\n                    </ks-product-container>]\n            : null}\n\n            {accessories?.length > 0 ? [\n                <span class=\"listing-heading\">{strings.accessoriesHeading}</span>,\n                <ks-product-container>\n                    {accessories.map(card => \n                        <ks-product-card product={card}/>\n                    )}\n                </ks-product-container>\n            ] : null}\n\n            {review ?\n                <ks-content-reviews content={review} />\n            : null}\n        </ks-page-base>;\n\t}\n}\n\n\n\n\n"],"mappings":"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","ignoreList":[]}